% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/modern_plotting.R
\name{plot_segment_quality}
\alias{plot_segment_quality}
\title{Visualize Segment Quality Metrics}
\usage{
plot_segment_quality(
  segments,
  plot_type = "overview",
  level = 2,
  metrics = NULL,
  color_palette = NULL,
  theme_style = "minimal",
  title = NULL,
  show_labels = TRUE,
  label_size = 3,
  segment_naming = "auto"
)
}
\arguments{
\item{segments}{A moneca object returned by \code{\link{moneca}}.}

\item{plot_type}{Character string specifying the type of visualization:
\itemize{
  \item "overview" (default): Multi-panel overview of key metrics
  \item "cohesion": Within-mobility vs segment size scatter plot
  \item "radar": Radar/spider plot of normalized metrics per segment
  \item "heatmap": Heatmap of all metrics across levels
  \item "evolution": Line plot showing metric evolution across levels
}}

\item{level}{Integer specifying which hierarchical level to visualize. 
Default is 2. Use NULL for all levels (only valid for some plot types).}

\item{metrics}{Character vector of metrics to include. Default includes all.
Options: "within.mobility", "share.of.mobility", "Density", "Nodes", 
"Max.path", "share.of.total"}

\item{color_palette}{Character string specifying the RColorBrewer palette.
Default is "Set3" for categorical data, "RdYlBu" for continuous.}

\item{theme_style}{Character string specifying the plot theme: "minimal" 
(default), "classic", or "void".}

\item{title}{Character string for plot title. Default is auto-generated
based on plot type.}

\item{show_labels}{Logical indicating whether to show segment labels.
Default is TRUE.}

\item{label_size}{Numeric size for labels. Default is 3.}

\item{segment_naming}{Specifies how to name segments in the visualization. Can be:
\itemize{
  \item Character string: "auto" (default), "concat", "pattern", or "custom" - 
    these are passed to \code{\link{segment.membership.enhanced}} for automatic naming
  \item data.frame: Custom segment labels with required columns "name" and "segment_label".
    \strong{This parameter accepts the direct output from \code{\link{segment.membership.enhanced}},}
    making it easy to maintain consistent segment naming across all visualizations.
    The data.frame must have:
    \itemize{
      \item "name": Node names from the original mobility matrix
      \item "segment_label": Meaningful segment names (e.g., "Executive_Leadership")
    }
  \item NULL: Uses default "auto" strategy
}
\strong{Recommended workflow:} Generate enhanced membership with 
\code{enhanced <- segment.membership.enhanced(segments, naming_strategy = "pattern")} 
and pass directly: \code{plot_segment_quality(segments, segment_naming = enhanced)}.
This ensures consistent, meaningful segment names across all plot types and visualizations.}
}
\value{
A ggplot2 object (or list of ggplot2 objects for "overview" type).
}
\description{
Creates comprehensive visualizations of segment quality metrics from MONECA 
analysis. This function provides multiple plot types to help assess the 
quality and characteristics of the segmentation.
}
\details{
Each plot type serves a different analytical purpose:

\strong{Overview}: Four-panel display showing:
\itemize{
  \item Within-mobility by segment (bar chart)
  \item Segment sizes (nodes) 
  \item Network density
  \item Share of total mobility
}

\strong{Cohesion}: Scatter plot with within-mobility on y-axis and segment
size on x-axis. Ideal segments appear in the upper-right (large and cohesive).
Points are sized by share of mobility.

\strong{Radar}: Multi-dimensional comparison showing all metrics normalized
to 0-1 scale. Useful for comparing segment profiles.

\strong{Heatmap}: Shows all metrics across all levels and segments. Colors
indicate metric values, making patterns easy to spot.

\strong{Evolution}: Line plots showing how each metric changes across 
hierarchical levels for each segment lineage.
}
\examples{
# Generate data and run MONECA
mobility_data <- generate_mobility_data(n_classes = 8, seed = 123)
seg <- moneca(mobility_data, segment.levels = 3)

# Overview of level 2 quality
plot_segment_quality(seg)

# Cohesion vs size analysis
plot_segment_quality(seg, plot_type = "cohesion", level = 2)

# Radar plot for segment comparison
plot_segment_quality(seg, plot_type = "radar", level = 2)

# Heatmap of all metrics across levels
plot_segment_quality(seg, plot_type = "heatmap", level = NULL)

# Evolution of metrics across levels
plot_segment_quality(seg, plot_type = "evolution", 
                    metrics = c("within.mobility", "Density"))

# Custom styling
plot_segment_quality(seg, plot_type = "cohesion",
                    color_palette = "Dark2",
                    theme_style = "classic",
                    title = "Segment Quality Analysis")

# Using segment.membership.enhanced for consistent naming (RECOMMENDED)
enhanced_membership <- segment.membership.enhanced(seg, level = 2, 
                                                  naming_strategy = "pattern")
plot_segment_quality(seg, plot_type = "overview",
                    segment_naming = enhanced_membership,
                    title = "Quality Analysis with Pattern-Based Names")

# Works with all plot types
plot_segment_quality(seg, plot_type = "radar", 
                    segment_naming = enhanced_membership)
plot_segment_quality(seg, plot_type = "heatmap", 
                    segment_naming = enhanced_membership)
plot_segment_quality(seg, plot_type = "evolution", 
                    segment_naming = enhanced_membership)

# Combining with custom segment names for professional visualization
custom_names <- data.frame(
  name = c("Executive", "Manager", "Professional", "Technical"),
  segment_label = c("Leadership Level", "Management Tier", 
                  "Professional Services", "Technical Specialists"),
  stringsAsFactors = FALSE
)
plot_segment_quality(seg, plot_type = "radar", 
                    segment_naming = custom_names,
                    title = "Professional Hierarchy Quality Metrics")

}
\seealso{
\code{\link{segment.quality}} for the underlying metrics,
\code{\link{moneca}} for the main analysis function,
\code{\link{plot_moneca_ggraph}} for network visualization
}
