% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/loglinear_models.R
\name{.build_design_moneca_topology}
\alias{.build_design_moneca_topology}
\title{Build design for MONECA topology model}
\usage{
.build_design_moneca_topology(df, categories, segment_membership)
}
\arguments{
\item{df}{Long-format data frame from \code{.matrix_to_long}.}

\item{categories}{Character vector of category names.}

\item{segment_membership}{Named character vector mapping category name
to segment label (e.g., \code{"seg_1"}, \code{"seg_2"}).}
}
\value{
Data frame with diagonal indicators and a seg_pair factor column.
}
\description{
Adds diagonal indicators and a segment-pair factor encoding within-segment
and between-segment relationships based on MONECA segment membership.
Uses a single factor variable for numerical stability with large matrices.
}
\keyword{internal}
