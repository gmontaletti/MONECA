% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/descriptive_functions.R
\name{level.matrix}
\alias{level.matrix}
\title{Extract and Label Hierarchical Mobility Matrix}
\usage{
level.matrix(segments, level = 2, include_total = FALSE)
}
\arguments{
\item{segments}{A moneca object returned by \code{\link{moneca}} or
\code{\link{moneca_fast}}.}

\item{level}{Integer. The hierarchical level to extract (default 2). Level 1
returns the original input matrix.}

\item{include_total}{Logical. If \code{TRUE}, keep the "Total" row and column
in the returned matrix (default \code{FALSE}).}
}
\value{
A matrix with rows and columns labeled by the most central node in
  each segment. The matrix carries a \code{"segment_map"} attribute: a
  \code{data.frame} with columns \code{segment} (integer index),
  \code{main_node} (label chosen for that segment), \code{members}
  (comma-separated string of all member names), and \code{n_members} (number
  of members in the segment).
}
\description{
Extracts the mobility matrix at a given hierarchical level from a moneca
result, strips the "Total" margin (unless \code{include_total = TRUE}), and
labels rows and columns by the most central node within each segment.
Centrality is measured as the sum of incoming and outgoing relative-risk
weights within the segment subgraph.
}
\examples{
mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42)
seg <- moneca_fast(mob, segment.levels = 2)
mx2 <- level.matrix(seg, level = 2)
mx2
attr(mx2, "segment_map")
}
