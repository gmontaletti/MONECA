<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>New MONECA - Fast Clustering with Maximal Cliques — new_moneca • moneca</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="New MONECA - Fast Clustering with Maximal Cliques — new_moneca"><meta property="og:description" content="A variant of MONECA that uses maximal cliques for improved performance.
Maximal cliques are complete subgraphs that cannot be extended by adding
another node, providing faster computation at the cost of potentially
different clustering results compared to the standard algorithm."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">moneca</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/loglinear-models.html">Log-Linear Models for Mobility Tables</a>
    </li>
    <li>
      <a href="../articles/loglinear-profession-mobility.html">Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data</a>
    </li>
    <li>
      <a href="../articles/moneca-introduction.html">Introduction to moneca: Mobility Network Clustering Analysis</a>
    </li>
    <li>
      <a href="../articles/reduce_density_guida_it.html">Riduzione della Densità per Matrici di Mobilità di Grandi Dimensioni</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gmontaletti/MONECA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>New MONECA - Fast Clustering with Maximal Cliques</h1>
    <small class="dont-index">Source: <a href="https://github.com/gmontaletti/MONECA/blob/master/R/new_moneca.R" class="external-link"><code>R/new_moneca.R</code></a></small>
    <div class="hidden name"><code>new_moneca.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A variant of MONECA that uses maximal cliques for improved performance.
Maximal cliques are complete subgraphs that cannot be extended by adding
another node, providing faster computation at the cost of potentially
different clustering results compared to the standard algorithm.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_moneca</span><span class="op">(</span></span>
<span>  mx <span class="op">=</span> <span class="va">mx</span>,</span>
<span>  segment.levels <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  cut.off <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"symmetric"</span>,</span>
<span>  delete.upper.tri <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  small.cell.reduction <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  auto_tune <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tune_method <span class="op">=</span> <span class="st">"stability"</span>,</span>
<span>  tune_verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max.clique.size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use.sparse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min.density <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-mx">mx<a class="anchor" aria-label="anchor" href="#arg-mx"></a></dt>
<dd><p>A mobility table (square matrix) with row and column totals in the last
row/column. Row names should identify the categories/classes.</p></dd>


<dt id="arg-segment-levels">segment.levels<a class="anchor" aria-label="anchor" href="#arg-segment-levels"></a></dt>
<dd><p>Integer specifying the number of hierarchical segmentation
levels to compute. Default is 3. The algorithm may return fewer levels if no
further meaningful segmentation is possible.</p></dd>


<dt id="arg-cut-off">cut.off<a class="anchor" aria-label="anchor" href="#arg-cut-off"></a></dt>
<dd><p>Numeric threshold for the minimum relative risk to be considered
a significant tie. Default is 1 (no mobility above random expectation required).</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>Character string specifying edge mode ("symmetric", "Mutual", or
"Unmutual"). Currently not fully implemented - uses symmetric mode.</p></dd>


<dt id="arg-delete-upper-tri">delete.upper.tri<a class="anchor" aria-label="anchor" href="#arg-delete-upper-tri"></a></dt>
<dd><p>Logical indicating whether to use only lower triangle
for efficiency. Default is TRUE.</p></dd>


<dt id="arg-small-cell-reduction">small.cell.reduction<a class="anchor" aria-label="anchor" href="#arg-small-cell-reduction"></a></dt>
<dd><p>Numeric value to handle small cell counts. Cells with
counts below this threshold are set to 0. Default is 0 (no reduction).</p></dd>


<dt id="arg-auto-tune">auto_tune<a class="anchor" aria-label="anchor" href="#arg-auto-tune"></a></dt>
<dd><p>Logical indicating whether to automatically tune the
small.cell.reduction parameter. When TRUE, uses optimization methods to
select the best value. Default is FALSE.</p></dd>


<dt id="arg-tune-method">tune_method<a class="anchor" aria-label="anchor" href="#arg-tune-method"></a></dt>
<dd><p>Character string specifying the auto-tuning method when
auto_tune is TRUE. Options are "stability" (default), "quality", or
"performance". See <code><a href="auto_tune_small_cell_reduction.html">auto_tune_small_cell_reduction</a></code> for details.</p></dd>


<dt id="arg-tune-verbose">tune_verbose<a class="anchor" aria-label="anchor" href="#arg-tune-verbose"></a></dt>
<dd><p>Logical indicating whether to print verbose messages
during auto-tuning. Default is FALSE.</p></dd>


<dt id="arg-max-clique-size">max.clique.size<a class="anchor" aria-label="anchor" href="#arg-max-clique-size"></a></dt>
<dd><p>Maximum size of cliques to consider (NULL for no limit).
Default is NULL. Useful for preventing memory issues with very dense graphs.
When specified, uses the optimized <code><a href="moneca_fast.html">moneca_fast</a></code> implementation.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical indicating whether to show progress bars during
computation. Default is FALSE. Set to TRUE for long-running analyses.</p></dd>


<dt id="arg-use-sparse">use.sparse<a class="anchor" aria-label="anchor" href="#arg-use-sparse"></a></dt>
<dd><p>Logical indicating whether to use sparse matrices for large
data. Default is FALSE. Only applicable when max.clique.size is specified.</p></dd>


<dt id="arg-min-density">min.density<a class="anchor" aria-label="anchor" href="#arg-min-density"></a></dt>
<dd><p>Minimum strength-based density to continue processing.
Calculated as mean(strength)/max(strength). Default is 0 (disabled).
Only applicable when max.clique.size is specified. Set to 0.01 or higher
for early stopping optimization on sparse graphs.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class "moneca" containing:</p><dl><dt>segment.list</dt>
<dd><p>A list of segment memberships for each hierarchical level.
      Each element is a list of vectors containing the original row indices.</p></dd>

    <dt>mat.list</dt>
<dd><p>A list of aggregated mobility matrices for each level, where
      rows/columns represent segments instead of original categories.</p></dd>

    <dt>small.cell.reduction</dt>
<dd><p>The small cell reduction parameter used.</p></dd>


</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function always uses maximal cliques (via <code><a href="https://r.igraph.org/reference/cliques.html" class="external-link">igraph::max_cliques()</a></code>),
which typically results in:</p><ul><li><p><strong>Faster computation:</strong> Maximal cliques are fewer in number and
    faster to find than all cliques</p></li>
<li><p><strong>Different results:</strong> Clustering may differ from standard MONECA
    as maximal cliques are more restrictive</p></li>
<li><p><strong>Better scalability:</strong> Recommended for large networks (&gt;20 nodes)
    or dense graphs</p></li>
</ul><p>The function intelligently selects the underlying implementation:</p><ul><li><p>If <code>max.clique.size</code>, <code>progress</code>, <code>use.sparse</code>, or
    <code>min.density</code> are specified, uses <code><a href="moneca_fast.html">moneca_fast</a></code> for
    advanced performance features</p></li>
<li><p>Otherwise, uses the standard <code><a href="moneca.html">moneca</a></code> implementation</p></li>
</ul><p><strong>When to use new_moneca():</strong></p><ul><li><p>Working with large networks (&gt;20 nodes)</p></li>
<li><p>Dense mobility tables where standard MONECA is slow</p></li>
<li><p>When computational speed is prioritized over exhaustive clique enumeration</p></li>
<li><p>Exploratory analysis where approximate clustering is acceptable</p></li>
</ul><p><strong>When to use standard moneca():</strong></p><ul><li><p>Small to medium networks (&lt;20 nodes)</p></li>
<li><p>When you need the most comprehensive clique-based segmentation</p></li>
<li><p>Publication-quality results requiring the original algorithm</p></li>
<li><p>When computational time is not a constraint</p></li>
</ul></div>
    <div id="performance-considerations">
    <h2>Performance Considerations</h2>


<p>The performance gain from using maximal cliques depends on graph density:</p><ul><li><p><strong>Sparse graphs:</strong> 2-5x speedup</p></li>
<li><p><strong>Medium density:</strong> 5-20x speedup</p></li>
<li><p><strong>Dense graphs:</strong> 20-100x speedup</p></li>
</ul></div>
    <div id="result-differences">
    <h2>Result Differences</h2>


<p>Maximal cliques produce different but valid results because they represent
a more restrictive interpretation of network structure. Key differences:</p><ul><li><p>Maximal cliques may merge some segments that all-cliques would separate</p></li>
<li><p>Hierarchical structure may have fewer levels</p></li>
<li><p>Overall clustering quality remains high but interpretation differs</p></li>
</ul></div>
    <div id="references">
    <h2>References</h2>
    <p>Toubøl, J., &amp; Larsen, A. G. (2017). Mapping the Social Class Structure:
From Occupational Mobility to Social Class Categories Using Network Analysis.
Sociology, 51(6), 1257-1276.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><strong>Related functions:</strong>
<code><a href="moneca.html">moneca</a></code> for the standard algorithm using all cliques,
<code><a href="moneca_fast.html">moneca_fast</a></code> for single-core optimization</p>
<p><strong>Visualization:</strong>
<code><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></code> for network visualization,
<code><a href="segment.membership.html">segment.membership</a></code> for extracting segment memberships</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Generate synthetic mobility data</span></span></span>
<span class="r-in"><span><span class="va">mobility_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_mobility_data.html">generate_mobility_data</a></span><span class="op">(</span>n_classes <span class="op">=</span> <span class="fl">6</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic usage - uses maximal cliques</span></span></span>
<span class="r-in"><span><span class="va">seg_new</span> <span class="op">&lt;-</span> <span class="fu">new_moneca</span><span class="op">(</span><span class="va">mobility_data</span>, segment.levels <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">seg_new</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare with standard moneca</span></span></span>
<span class="r-in"><span><span class="va">seg_standard</span> <span class="op">&lt;-</span> <span class="fu"><a href="moneca.html">moneca</a></span><span class="op">(</span><span class="va">mobility_data</span>, segment.levels <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></span><span class="op">(</span><span class="va">seg_new</span>, node_color <span class="op">=</span> <span class="st">"segment"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Giampaolo Montaletti, Jonas Touboel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

