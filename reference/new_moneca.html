<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>New MONECA - Fast Clustering with Maximal Cliques — new_moneca • moneca</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="New MONECA - Fast Clustering with Maximal Cliques — new_moneca"><meta name="description" content="A variant of MONECA that uses maximal cliques for improved performance.
Maximal cliques are complete subgraphs that cannot be extended by adding
another node, providing faster computation at the cost of potentially
different clustering results compared to the standard algorithm."><meta property="og:description" content="A variant of MONECA that uses maximal cliques for improved performance.
Maximal cliques are complete subgraphs that cannot be extended by adding
another node, providing faster computation at the cost of potentially
different clustering results compared to the standard algorithm."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">moneca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/moneca-introduction.html">Introduction to moneca: Mobility Network Clustering Analysis</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="https://gmontaletti.github.io/MONECA/news/index.html#moneca-100">Version 1.0.0</a></li>
    <li><a class="dropdown-item" href="https://gmontaletti.github.io/MONECA/news/index.html#moneca-09">Version 0.9</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmontaletti/MONECA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>New MONECA - Fast Clustering with Maximal Cliques</h1>
      <small class="dont-index">Source: <a href="https://github.com/gmontaletti/MONECA/blob/master/R/new_moneca.R" class="external-link"><code>R/new_moneca.R</code></a></small>
      <div class="d-none name"><code>new_moneca.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A variant of MONECA that uses maximal cliques for improved performance.
Maximal cliques are complete subgraphs that cannot be extended by adding
another node, providing faster computation at the cost of potentially
different clustering results compared to the standard algorithm.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_moneca</span><span class="op">(</span></span>
<span>  mx <span class="op">=</span> <span class="va">mx</span>,</span>
<span>  segment.levels <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  cut.off <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mode <span class="op">=</span> <span class="st">"symmetric"</span>,</span>
<span>  delete.upper.tri <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  small.cell.reduction <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  auto_tune <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tune_method <span class="op">=</span> <span class="st">"stability"</span>,</span>
<span>  tune_verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  max.clique.size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use.sparse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min.density <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mx">mx<a class="anchor" aria-label="anchor" href="#arg-mx"></a></dt>
<dd><p>A mobility table (square matrix) with row and column totals in the last
row/column. Row names should identify the categories/classes.</p></dd>


<dt id="arg-segment-levels">segment.levels<a class="anchor" aria-label="anchor" href="#arg-segment-levels"></a></dt>
<dd><p>Integer specifying the number of hierarchical segmentation
levels to compute. Default is 3. The algorithm may return fewer levels if no
further meaningful segmentation is possible.</p></dd>


<dt id="arg-cut-off">cut.off<a class="anchor" aria-label="anchor" href="#arg-cut-off"></a></dt>
<dd><p>Numeric threshold for the minimum relative risk to be considered
a significant tie. Default is 1 (no mobility above random expectation required).</p></dd>


<dt id="arg-mode">mode<a class="anchor" aria-label="anchor" href="#arg-mode"></a></dt>
<dd><p>Character string specifying edge mode ("symmetric", "Mutual", or
"Unmutual"). Currently not fully implemented - uses symmetric mode.</p></dd>


<dt id="arg-delete-upper-tri">delete.upper.tri<a class="anchor" aria-label="anchor" href="#arg-delete-upper-tri"></a></dt>
<dd><p>Logical indicating whether to use only lower triangle
for efficiency. Default is TRUE.</p></dd>


<dt id="arg-small-cell-reduction">small.cell.reduction<a class="anchor" aria-label="anchor" href="#arg-small-cell-reduction"></a></dt>
<dd><p>Numeric value to handle small cell counts. Cells with
counts below this threshold are set to 0. Default is 0 (no reduction).</p></dd>


<dt id="arg-auto-tune">auto_tune<a class="anchor" aria-label="anchor" href="#arg-auto-tune"></a></dt>
<dd><p>Logical indicating whether to automatically tune the
small.cell.reduction parameter. When TRUE, uses optimization methods to
select the best value. Default is FALSE.</p></dd>


<dt id="arg-tune-method">tune_method<a class="anchor" aria-label="anchor" href="#arg-tune-method"></a></dt>
<dd><p>Character string specifying the auto-tuning method when
auto_tune is TRUE. Options are "stability" (default), "quality", or
"performance". See <code><a href="auto_tune_small_cell_reduction.html">auto_tune_small_cell_reduction</a></code> for details.</p></dd>


<dt id="arg-tune-verbose">tune_verbose<a class="anchor" aria-label="anchor" href="#arg-tune-verbose"></a></dt>
<dd><p>Logical indicating whether to print verbose messages
during auto-tuning. Default is FALSE.</p></dd>


<dt id="arg-max-clique-size">max.clique.size<a class="anchor" aria-label="anchor" href="#arg-max-clique-size"></a></dt>
<dd><p>Maximum size of cliques to consider (NULL for no limit).
Default is NULL. Useful for preventing memory issues with very dense graphs.
When specified, uses the optimized <code><a href="moneca_fast.html">moneca_fast</a></code> implementation.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical indicating whether to show progress bars during
computation. Default is FALSE. Set to TRUE for long-running analyses.</p></dd>


<dt id="arg-use-sparse">use.sparse<a class="anchor" aria-label="anchor" href="#arg-use-sparse"></a></dt>
<dd><p>Logical indicating whether to use sparse matrices for large
data. Default is FALSE. Only applicable when max.clique.size is specified.</p></dd>


<dt id="arg-min-density">min.density<a class="anchor" aria-label="anchor" href="#arg-min-density"></a></dt>
<dd><p>Minimum strength-based density to continue processing.
Calculated as mean(strength)/max(strength). Default is 0 (disabled).
Only applicable when max.clique.size is specified. Set to 0.01 or higher
for early stopping optimization on sparse graphs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class "moneca" containing:</p><dl><dt>segment.list</dt>
<dd><p>A list of segment memberships for each hierarchical level.
      Each element is a list of vectors containing the original row indices.</p></dd>

    <dt>mat.list</dt>
<dd><p>A list of aggregated mobility matrices for each level, where
      rows/columns represent segments instead of original categories.</p></dd>

    <dt>small.cell.reduction</dt>
<dd><p>The small cell reduction parameter used.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function always uses maximal cliques (via <code><a href="https://r.igraph.org/reference/cliques.html" class="external-link">igraph::max_cliques()</a></code>),
which typically results in:</p><ul><li><p><strong>Faster computation:</strong> Maximal cliques are fewer in number and
    faster to find than all cliques</p></li>
<li><p><strong>Different results:</strong> Clustering may differ from standard MONECA
    as maximal cliques are more restrictive</p></li>
<li><p><strong>Better scalability:</strong> Recommended for large networks (&gt;20 nodes)
    or dense graphs</p></li>
</ul><p>The function intelligently selects the underlying implementation:</p><ul><li><p>If <code>max.clique.size</code>, <code>progress</code>, <code>use.sparse</code>, or
    <code>min.density</code> are specified, uses <code><a href="moneca_fast.html">moneca_fast</a></code> for
    advanced performance features</p></li>
<li><p>Otherwise, uses the standard <code><a href="moneca.html">moneca</a></code> implementation</p></li>
</ul><p><strong>When to use new_moneca():</strong></p><ul><li><p>Working with large networks (&gt;20 nodes)</p></li>
<li><p>Dense mobility tables where standard MONECA is slow</p></li>
<li><p>When computational speed is prioritized over exhaustive clique enumeration</p></li>
<li><p>Exploratory analysis where approximate clustering is acceptable</p></li>
</ul><p><strong>When to use standard moneca():</strong></p><ul><li><p>Small to medium networks (&lt;20 nodes)</p></li>
<li><p>When you need the most comprehensive clique-based segmentation</p></li>
<li><p>Publication-quality results requiring the original algorithm</p></li>
<li><p>When computational time is not a constraint</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="performance-considerations">Performance Considerations<a class="anchor" aria-label="anchor" href="#performance-considerations"></a></h2>


<p>The performance gain from using maximal cliques depends on graph density:</p><ul><li><p><strong>Sparse graphs:</strong> 2-5x speedup</p></li>
<li><p><strong>Medium density:</strong> 5-20x speedup</p></li>
<li><p><strong>Dense graphs:</strong> 20-100x speedup</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="result-differences">Result Differences<a class="anchor" aria-label="anchor" href="#result-differences"></a></h2>


<p>Maximal cliques produce different but valid results because they represent
a more restrictive interpretation of network structure. Key differences:</p><ul><li><p>Maximal cliques may merge some segments that all-cliques would separate</p></li>
<li><p>Hierarchical structure may have fewer levels</p></li>
<li><p>Overall clustering quality remains high but interpretation differs</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Toubøl, J., &amp; Larsen, A. G. (2017). Mapping the Social Class Structure:
From Occupational Mobility to Social Class Categories Using Network Analysis.
Sociology, 51(6), 1257-1276.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><strong>Related functions:</strong>
<code><a href="moneca.html">moneca</a></code> for the standard algorithm using all cliques,
<code><a href="moneca_fast.html">moneca_fast</a></code> for single-core optimization</p>
<p><strong>Visualization:</strong>
<code><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></code> for network visualization,
<code><a href="segment.membership.html">segment.membership</a></code> for extracting segment memberships</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Generate synthetic mobility data</span></span></span>
<span class="r-in"><span><span class="va">mobility_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_mobility_data.html">generate_mobility_data</a></span><span class="op">(</span>n_classes <span class="op">=</span> <span class="fl">6</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic usage - uses maximal cliques</span></span></span>
<span class="r-in"><span><span class="va">seg_new</span> <span class="op">&lt;-</span> <span class="fu">new_moneca</span><span class="op">(</span><span class="va">mobility_data</span>, segment.levels <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">seg_new</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare with standard moneca</span></span></span>
<span class="r-in"><span><span class="va">seg_standard</span> <span class="op">&lt;-</span> <span class="fu"><a href="moneca.html">moneca</a></span><span class="op">(</span><span class="va">mobility_data</span>, segment.levels <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualize results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></span><span class="op">(</span><span class="va">seg_new</span>, node_color <span class="op">=</span> <span class="st">"segment"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Giampaolo Montaletti, Jonas Touboel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

