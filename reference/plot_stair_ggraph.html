<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Multi-Level Segmentation Visualization (Stair Plot) — plot_stair_ggraph • moneca</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Multi-Level Segmentation Visualization (Stair Plot) — plot_stair_ggraph"><meta property="og:description" content='Creates a series of network plots showing how segmentation evolves across
hierarchical levels in a moneca analysis. This "stair plot" provides insight
into the progressive clustering of social positions.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">moneca</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/loglinear-models.html">Log-Linear Models for Mobility Tables</a>
    </li>
    <li>
      <a href="../articles/loglinear-profession-mobility.html">Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data</a>
    </li>
    <li>
      <a href="../articles/moneca-introduction.html">Introduction to moneca: Mobility Network Clustering Analysis</a>
    </li>
    <li>
      <a href="../articles/reduce_density_guida_it.html">Riduzione della Densità per Matrici di Mobilità di Grandi Dimensioni</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gmontaletti/MONECA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Multi-Level Segmentation Visualization (Stair Plot)</h1>
    <small class="dont-index">Source: <a href="https://github.com/gmontaletti/MONECA/blob/master/R/modern_plotting.R" class="external-link"><code>R/modern_plotting.R</code></a></small>
    <div class="hidden name"><code>plot_stair_ggraph.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Creates a series of network plots showing how segmentation evolves across
hierarchical levels in a moneca analysis. This "stair plot" provides insight
into the progressive clustering of social positions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_stair_ggraph</span><span class="op">(</span></span>
<span>  <span class="va">segments</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">segments</span><span class="op">$</span><span class="va">segment.list</span><span class="op">)</span>,</span>
<span>  layout <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  segment_naming <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  include_first_level <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-segments">segments<a class="anchor" aria-label="anchor" href="#arg-segments"></a></dt>
<dd><p>A moneca object returned by <code><a href="moneca.html">moneca</a></code>.</p></dd>


<dt id="arg-levels">levels<a class="anchor" aria-label="anchor" href="#arg-levels"></a></dt>
<dd><p>Integer vector specifying which hierarchical levels to visualize.
Default includes all levels.</p></dd>


<dt id="arg-layout">layout<a class="anchor" aria-label="anchor" href="#arg-layout"></a></dt>
<dd><p>Layout specification for consistency across plots. Can be:</p><ul><li><p>NULL (default): Use layout.matrix() for consistent positioning</p></li>
<li><p>Character string: Layout algorithm name ("fr", "kk", "stress", etc.)</p></li>
<li><p>Matrix: Custom coordinate matrix for node positions</p></li>
</ul></dd>


<dt id="arg-ncol">ncol<a class="anchor" aria-label="anchor" href="#arg-ncol"></a></dt>
<dd><p>Integer specifying the number of columns in the plot grid.
Default is 2. Set to 1 for vertical arrangement.</p></dd>


<dt id="arg-segment-naming">segment_naming<a class="anchor" aria-label="anchor" href="#arg-segment-naming"></a></dt>
<dd><p>Specifies how to name segments across all visualization levels. Can be:</p><ul><li><p>Character string: "auto" (default), "concat", "pattern", or "custom" -
    these are passed to <code><a href="segment.membership.enhanced.html">segment.membership.enhanced</a></code> for automatic naming</p></li>
<li><p>data.frame: Custom segment labels with columns "name" (node names from the
    mobility matrix) and "segment_label" (desired custom labels). This allows complete
    control over segment naming across all hierarchical levels</p></li>
<li><p>NULL: Uses default "auto" strategy</p></li>
</ul><p>When a data.frame is provided, custom labels override automatically generated names
consistently across all levels. The data.frame approach is particularly useful for
stair plots as it maintains consistent naming across the hierarchical progression.</p></dd>


<dt id="arg-include-first-level">include_first_level<a class="anchor" aria-label="anchor" href="#arg-include-first-level"></a></dt>
<dd><p>Logical indicating whether to include the first level
(individual classes without segmentation). Default is TRUE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>If <code>combine_plots = TRUE</code>, returns a combined plot grid object.
If <code>combine_plots = FALSE</code>, returns a list of ggplot objects, one for each level.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The stair plot helps visualize the hierarchical nature of MONECA segmentation
by showing how larger segments at higher levels break down into smaller, more
specific segments at lower levels. This is particularly useful for:</p><ul><li><p>Understanding the segmentation process</p></li>
<li><p>Identifying optimal levels of analysis</p></li>
<li><p>Presenting results to different audiences</p></li>
<li><p>Comparing segmentation stability across levels</p></li>
</ul><p>When using a consistent layout across all plots, the relative positions of
nodes remain the same, making it easier to track how segments evolve.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="plot_moneca_ggraph.html">plot_moneca_ggraph</a></code> for single-level visualization,
<code><a href="plot_ego_ggraph.html">plot_ego_ggraph</a></code> for ego network analysis,
<code><a href="layout.matrix.html">layout.matrix</a></code> for consistent layouts,
<code><a href="moneca.html">moneca</a></code> for the main analysis function</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Generate synthetic data and run MONECA</span></span></span>
<span class="r-in"><span><span class="va">mobility_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_mobility_data.html">generate_mobility_data</a></span><span class="op">(</span>n_classes <span class="op">=</span> <span class="fl">6</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">seg</span> <span class="op">&lt;-</span> <span class="fu"><a href="moneca.html">moneca</a></span><span class="op">(</span><span class="va">mobility_data</span>, segment.levels <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic stair plot</span></span></span>
<span class="r-in"><span><span class="va">stair_plots</span> <span class="op">&lt;-</span> <span class="fu">plot_stair_ggraph</span><span class="op">(</span><span class="va">seg</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Customized stair plot with specific levels</span></span></span>
<span class="r-in"><span><span class="va">custom_stair</span> <span class="op">&lt;-</span> <span class="fu">plot_stair_ggraph</span><span class="op">(</span><span class="va">seg</span>,</span></span>
<span class="r-in"><span>                                 levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 layout <span class="op">=</span> <span class="st">"stress"</span>,</span></span>
<span class="r-in"><span>                                 ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Giampaolo Montaletti, Jonas Touboel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

