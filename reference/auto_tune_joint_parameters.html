<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Joint Auto-Tuning for small.cell.reduction and cut.off Parameters — auto_tune_joint_parameters • moneca</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Joint Auto-Tuning for small.cell.reduction and cut.off Parameters — auto_tune_joint_parameters"><meta name="description" content="Automatically selects optimal values for both small.cell.reduction and cut.off
parameters simultaneously, considering their mathematical relationships and
compound effects on clustering results. Features advanced progress tracking
and flexible parameter grid customization for efficient optimization."><meta property="og:description" content="Automatically selects optimal values for both small.cell.reduction and cut.off
parameters simultaneously, considering their mathematical relationships and
compound effects on clustering results. Features advanced progress tracking
and flexible parameter grid customization for efficient optimization."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">moneca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/moneca-introduction.html">Introduction to moneca: Mobility Network Clustering Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="https://gmontaletti.github.io/MONECA/news/index.html#moneca-08">Version 0.8</a></li>
    <li><a class="dropdown-item" href="https://gmontaletti.github.io/MONECA/news/index.html#moneca-07">Version 0.7</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmontaletti/MONECA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Joint Auto-Tuning for small.cell.reduction and cut.off Parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/gmontaletti/MONECA/blob/master/R/joint_tuning.R" class="external-link"><code>R/joint_tuning.R</code></a></small>
      <div class="d-none name"><code>auto_tune_joint_parameters.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Automatically selects optimal values for both small.cell.reduction and cut.off
parameters simultaneously, considering their mathematical relationships and
compound effects on clustering results. Features advanced progress tracking
and flexible parameter grid customization for efficient optimization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span>
<span>  <span class="va">mx</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"grid"</span>,</span>
<span>  scr_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  cutoff_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  scr_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cutoff_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_grid_points <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  n_bootstrap <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  objectives <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"stability"</span>, <span class="st">"quality"</span><span class="op">)</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  plot_surface <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bayesian_iterations <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  acquisition_function <span class="op">=</span> <span class="st">"ei"</span>,</span>
<span>  exploration_factor <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  n_initial <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mx">mx<a class="anchor" aria-label="anchor" href="#arg-mx"></a></dt>
<dd><p>Mobility matrix to analyze. Must be a square numeric matrix.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character string specifying optimization strategy:</p><ul><li><p>"grid" (default): 2D grid search with stability assessment</p></li>
<li><p>"bayesian": Bayesian optimization using Gaussian Process surrogate modeling
    with Expected Improvement or Upper Confidence Bound acquisition functions.
    Efficient for expensive evaluations, uses Latin Hypercube Sampling for
    initial design and sequential evaluation with adaptive point selection.
    Recommended when evaluation budget is limited or parameter space is large.
    <strong>Note: Sequential by mathematical necessity</strong> - each new evaluation point
    depends on the GP model updated from all previous evaluations.</p></li>
<li><p>"pareto": Multi-objective Pareto frontier optimization</p></li>
<li><p>"adaptive": Adaptive refinement starting with coarse grid</p></li>
</ul></dd>


<dt id="arg-scr-range">scr_range<a class="anchor" aria-label="anchor" href="#arg-scr-range"></a></dt>
<dd><p>Numeric vector of length 2 specifying the range for
small.cell.reduction parameter. Default is c(0, NULL) where NULL
auto-determines the upper bound. Ignored if scr_values is provided.</p></dd>


<dt id="arg-cutoff-range">cutoff_range<a class="anchor" aria-label="anchor" href="#arg-cutoff-range"></a></dt>
<dd><p>Numeric vector of length 2 specifying the range for
cut.off parameter. Default is c(0.5, 3). Ignored if cutoff_values is provided.</p></dd>


<dt id="arg-scr-values">scr_values<a class="anchor" aria-label="anchor" href="#arg-scr-values"></a></dt>
<dd><p>Numeric vector of custom small.cell.reduction values to test.
If provided, overrides scr_range and n_grid_points for SCR dimension.
Values must be non-negative and will be converted to integers. Allows
for targeted testing of specific parameter values based on prior knowledge
or domain expertise. Default is NULL.</p></dd>


<dt id="arg-cutoff-values">cutoff_values<a class="anchor" aria-label="anchor" href="#arg-cutoff-values"></a></dt>
<dd><p>Numeric vector of custom cut.off values to test.
If provided, overrides cutoff_range and n_grid_points for cutoff dimension.
Values must be positive. Enables focused evaluation of specific threshold
values identified through previous analysis. Default is NULL.</p></dd>


<dt id="arg-n-grid-points">n_grid_points<a class="anchor" aria-label="anchor" href="#arg-n-grid-points"></a></dt>
<dd><p>Integer number of grid points per dimension for grid
search. Default is 10. Ignored for dimensions with custom values.
Larger values provide finer resolution but increase computation time.</p></dd>


<dt id="arg-n-bootstrap">n_bootstrap<a class="anchor" aria-label="anchor" href="#arg-n-bootstrap"></a></dt>
<dd><p>Integer number of bootstrap samples for stability
assessment. Default is 50. Higher values improve stability estimation
accuracy but increase computation time.</p></dd>


<dt id="arg-objectives">objectives<a class="anchor" aria-label="anchor" href="#arg-objectives"></a></dt>
<dd><p>Character vector of optimization objectives. Options include:
"stability", "quality", "sparsity", "modularity".
Default is c("stability", "quality"). Multiple objectives are
combined using weighted aggregation.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>Numeric vector of weights for combining multiple objectives.
Must sum to 1. Default is equal weights. Allows prioritization of
specific clustering properties in the optimization.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Integer seed for reproducibility. Default is NULL.
Ensures consistent results across runs when set.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical indicating whether to show detailed progress information.
Default is TRUE. When enabled, displays real-time progress tracking with
ETA estimation, parameter evaluation updates, and performance statistics.
Progress tracking works seamlessly with both sequential and parallel execution.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Character or logical indicating parallel processing preference.
Can be "auto" (default, intelligent switching), TRUE/FALSE (force parallel/sequential),
or "parallel"/"sequential" for explicit control. When "auto", the function
analyzes problem characteristics and system resources to make optimal decision.
Progress tracking is maintained across all parallel workers.
<strong>Method-specific behavior:</strong></p><ul><li><p><strong>Grid search</strong>: Can parallelize across parameter combinations</p></li>
<li><p><strong>Adaptive</strong>: Can parallelize within each refinement phase</p></li>
<li><p><strong>Bayesian</strong>: Uses sequential evaluation regardless of this setting
    due to mathematical dependencies between evaluations. Individual evaluations
    may use internal parallelization if available.</p></li>
</ul></dd>


<dt id="arg-plot-surface">plot_surface<a class="anchor" aria-label="anchor" href="#arg-plot-surface"></a></dt>
<dd><p>Logical indicating whether to plot optimization surface.
Default is FALSE. Creates interactive visualization of the parameter space
and optimization results when enabled.</p></dd>


<dt id="arg-bayesian-iterations">bayesian_iterations<a class="anchor" aria-label="anchor" href="#arg-bayesian-iterations"></a></dt>
<dd><p>Integer number of Bayesian optimization iterations.
Default is 20. Controls the number of sequential evaluations after initial
design points. Higher values allow more thorough exploration but increase
computation time. Only used when method = "bayesian".</p></dd>


<dt id="arg-acquisition-function">acquisition_function<a class="anchor" aria-label="anchor" href="#arg-acquisition-function"></a></dt>
<dd><p>Character string specifying acquisition function
for Bayesian optimization. Options are:</p><ul><li><p>"ei" (default): Expected Improvement - balances exploration and exploitation</p></li>
<li><p>"ucb": Upper Confidence Bound - more exploration-focused</p></li>
</ul><p>Only used when method = "bayesian".</p></dd>


<dt id="arg-exploration-factor">exploration_factor<a class="anchor" aria-label="anchor" href="#arg-exploration-factor"></a></dt>
<dd><p>Numeric exploration parameter for acquisition function.
Default is 0.1. Controls exploration vs exploitation trade-off:</p><ul><li><p>Smaller values (e.g., 0.01-0.05): More exploitation, faster convergence</p></li>
<li><p>Larger values (e.g., 0.1-0.5): More exploration, better global search</p></li>
</ul><p>Only used when method = "bayesian".</p></dd>


<dt id="arg-n-initial">n_initial<a class="anchor" aria-label="anchor" href="#arg-n-initial"></a></dt>
<dd><p>Integer number of initial design points for Bayesian optimization.
Default is 5. These points are sampled using Latin Hypercube Sampling to
provide good coverage of the parameter space before sequential optimization
begins. More points provide better initialization but increase initial cost.
Only used when method = "bayesian".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class "moneca_joint_tuning" containing:</p>
<dl><dt>optimal_scr</dt>
<dd><p>Optimal small.cell.reduction value</p></dd>

  <dt>optimal_cutoff</dt>
<dd><p>Optimal cut.off value</p></dd>

  <dt>optimization_surface</dt>
<dd><p>Matrix of objective values for parameter grid</p></dd>

  <dt>parameter_grid</dt>
<dd><p>Data frame of tested parameter combinations</p></dd>

  <dt>scores</dt>
<dd><p>Detailed scores for each parameter combination</p></dd>

  <dt>method</dt>
<dd><p>Optimization method used</p></dd>

  <dt>objectives</dt>
<dd><p>Objectives optimized</p></dd>

  <dt>selection_rationale</dt>
<dd><p>Explanation of parameter selection</p></dd>

  <dt>mathematical_relationship</dt>
<dd><p>Estimated interaction effects</p></dd>

  <dt>computation_time</dt>
<dd><p>Total optimization time</p></dd>

  <dt>scr_values</dt>
<dd><p>Vector of tested small.cell.reduction values (custom or generated)</p></dd>

  <dt>cutoff_values</dt>
<dd><p>Vector of tested cut.off values (custom or generated)</p></dd>

  <dt>performance_stats</dt>
<dd><p>Optimization performance statistics including
                         parallel processing efficiency, cache utilization,
                         and progress tracking metrics</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This enhanced function provides comprehensive joint parameter optimization
with advanced features for progress tracking and custom parameter grids:</p>
<p><strong>Mathematical Framework:</strong>
The function considers the sequential filtering relationship between parameters:
1. small.cell.reduction filters raw counts: mx[mx &lt; scr] = 0
2. Relative risk calculation: RR = Observed / Expected
3. cut.off filters relative risks: RR[RR &lt; cutoff] = NA</p>
<p>Network density is affected multiplicatively by both parameters.
The function models this interaction to find optimal combinations.</p>
<p><strong>Progress Tracking System:</strong>
Real-time progress monitoring works seamlessly across execution modes:</p><ul><li><p>File-based progress tracking ensures visibility in parallel processing</p></li>
<li><p>ETA estimation based on completed evaluations and current performance</p></li>
<li><p>Progress updates shown at regular intervals (every 5<!-- % completion) --></p></li>
<li><p>Performance statistics including cache hit rates and evaluation speed</p></li>
<li><p>Graceful degradation if progress tracking encounters issues</p></li>
</ul><p><strong>Custom Grid Vector Support:</strong>
Flexible parameter specification allows targeted optimization:</p><ul><li><p>Custom vectors override ranges and grid point specifications</p></li>
<li><p>Mixed usage: custom values for one parameter, range for another</p></li>
<li><p>Automatic integer conversion for small.cell.reduction values</p></li>
<li><p>Input validation ensures parameter feasibility</p></li>
<li><p>Smart grid sizing based on problem characteristics</p></li>
</ul><p><strong>Performance Optimizations:</strong>
Multiple efficiency enhancements improve user experience:</p><ul><li><p>Intelligent caching system reduces redundant computations</p></li>
<li><p>Smart parameter ordering optimizes evaluation sequence</p></li>
<li><p>Early termination for large parameter spaces when beneficial</p></li>
<li><p>Adaptive parallel processing based on problem size and resources</p></li>
<li><p>Memory management prevents cache overflow in long sessions</p></li>
</ul><p><strong>Bayesian Optimization Framework:</strong>
The Bayesian method uses advanced machine learning techniques for efficient
parameter search, particularly beneficial for expensive evaluations:</p><ul><li><p><strong>Gaussian Process surrogate modeling</strong>: Builds a probabilistic model
    of the objective function that provides both predictions and uncertainty estimates</p></li>
<li><p><strong>Latin Hypercube Sampling</strong>: Initial design points are strategically
    placed using space-filling design for optimal coverage</p></li>
<li><p><strong>Acquisition functions</strong>: Balance exploration (searching uncertain regions)
    vs exploitation (searching near current best points):</p><ul><li><p>Expected Improvement (EI): Maximizes expected improvement over current best</p></li>
<li><p>Upper Confidence Bound (UCB): Optimizes upper confidence bound of predictions</p></li>
</ul></li>
<li><p><strong>Sequential evaluation</strong>: Each new point is chosen to maximize
    information gain about the optimal parameter combination</p></li>
<li><p><strong>Adaptive point selection</strong>: Later evaluations focus on most
    promising regions based on accumulated knowledge</p></li>
</ul><p><strong>Why Bayesian Optimization is Sequential:</strong>
Bayesian optimization is inherently sequential due to its mathematical foundation:</p><ul><li><p>Each new evaluation point depends on the Gaussian Process model fitted to
    ALL previous evaluations</p></li>
<li><p>The acquisition function requires the updated posterior distribution from
    all completed evaluations to select the next most informative point</p></li>
<li><p>Parallel evaluation would select multiple points using the same outdated
    model, reducing the efficiency gained from adaptive point selection</p></li>
<li><p>This sequential nature is what makes Bayesian optimization efficient:
    it typically finds good solutions with far fewer total evaluations than
    grid search, even though evaluations cannot be parallelized</p></li>
</ul><p><strong>Method Selection Guidelines:</strong>
Choose optimization method based on problem characteristics:</p><ul><li><p><strong>Grid search</strong>: Best for small parameter spaces (≤100 evaluations),
    when comprehensive coverage is needed, or when evaluations are fast.
    Can fully utilize parallel processing for faster wall-clock time.</p></li>
<li><p><strong>Bayesian optimization</strong>: Optimal for limited evaluation budgets,
    expensive function evaluations, large parameter spaces, or when seeking
    global optimum efficiently. Typically requires 15-50 evaluations.
    <strong>Sequential execution</strong>: May appear slower per unit time due to lack
    of parallelization, but often faster overall due to requiring fewer total evaluations.</p></li>
<li><p><strong>Adaptive refinement</strong>: Good compromise between thoroughness and
    efficiency, recommended for moderate-sized problems. Can parallelize within
    each refinement phase.</p></li>
<li><p><strong>Pareto optimization</strong>: Use when multiple competing objectives
    need simultaneous consideration</p></li>
</ul><p><strong>Bayesian Optimization Tuning:</strong>
Parameter selection for Bayesian optimization:</p><ul><li><p><strong>n_initial</strong>: More points (8-15) for complex landscapes, fewer (3-8)
    for smooth functions or limited budgets</p></li>
<li><p><strong>bayesian_iterations</strong>: Typically 10-30 for most problems. More iterations
    allow better convergence but increase computational cost</p></li>
<li><p><strong>acquisition_function</strong>: EI for balanced search, UCB for more exploration</p></li>
<li><p><strong>exploration_factor</strong>: 0.01-0.05 for exploitation, 0.1-0.5 for exploration</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="auto_tune_small_cell_reduction.html">auto_tune_small_cell_reduction</a></code>,
<code><a href="analyze_parameter_interaction.html">analyze_parameter_interaction</a></code>,
<code><a href="plot_optimization_surface.html">plot_optimization_surface</a></code>,
<code><a href="clear_evaluation_caches.html">clear_evaluation_caches</a></code> for memory management,
<code><a href="detect_system_resources.html">detect_system_resources</a></code> for parallel processing guidance</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Generate sample data</span></span></span>
<span class="r-in"><span><span class="va">mobility_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_mobility_data.html">generate_mobility_data</a></span><span class="op">(</span>n_classes <span class="op">=</span> <span class="fl">6</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Grid search optimization</span></span></span>
<span class="r-in"><span><span class="va">joint_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"grid"</span>,</span></span>
<span class="r-in"><span>  n_grid_points <span class="op">=</span> <span class="fl">15</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  plot_surface <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use optimal parameters</span></span></span>
<span class="r-in"><span><span class="va">segments</span> <span class="op">&lt;-</span> <span class="fu"><a href="moneca.html">moneca</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  small.cell.reduction <span class="op">=</span> <span class="va">joint_result</span><span class="op">$</span><span class="va">optimal_scr</span>,</span></span>
<span class="r-in"><span>  cut.off <span class="op">=</span> <span class="va">joint_result</span><span class="op">$</span><span class="va">optimal_cutoff</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adaptive refinement for efficiency</span></span></span>
<span class="r-in"><span><span class="va">adaptive_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"adaptive"</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Custom parameter vectors for targeted testing</span></span></span>
<span class="r-in"><span><span class="co"># Useful when you have domain knowledge about effective parameter ranges</span></span></span>
<span class="r-in"><span><span class="va">custom_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"grid"</span>,</span></span>
<span class="r-in"><span>  scr_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>,  <span class="co"># Specific SCR values to test</span></span></span>
<span class="r-in"><span>  cutoff_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>, <span class="fl">2.0</span><span class="op">)</span>,  <span class="co"># Specific cutoff values</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>  <span class="co"># Shows progress with ETA estimation</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Mixed usage - custom SCR values with cutoff range</span></span></span>
<span class="r-in"><span><span class="co"># Demonstrates flexibility: custom vector + automatic range</span></span></span>
<span class="r-in"><span><span class="va">mixed_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"grid"</span>,</span></span>
<span class="r-in"><span>  scr_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span>,  <span class="co"># Custom SCR values</span></span></span>
<span class="r-in"><span>  cutoff_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">2.5</span><span class="op">)</span>,       <span class="co"># Automatic cutoff range</span></span></span>
<span class="r-in"><span>  n_grid_points <span class="op">=</span> <span class="fl">8</span>,                <span class="co"># Grid points for cutoff only</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Progress tracking demonstration</span></span></span>
<span class="r-in"><span><span class="co"># Note: Progress output appears in console during execution</span></span></span>
<span class="r-in"><span><span class="va">large_scale_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"grid"</span>,</span></span>
<span class="r-in"><span>  n_grid_points <span class="op">=</span> <span class="fl">20</span>,  <span class="co"># Creates 400 combinations</span></span></span>
<span class="r-in"><span>  parallel <span class="op">=</span> <span class="st">"auto"</span>,   <span class="co"># Smart parallel processing</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>       <span class="co"># Real-time progress with ETA</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access enhanced return information</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">large_scale_result</span><span class="op">$</span><span class="va">performance_stats</span><span class="op">)</span>  <span class="co"># Optimization efficiency</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">large_scale_result</span><span class="op">$</span><span class="va">scr_values</span><span class="op">)</span>         <span class="co"># Actual values tested</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">large_scale_result</span><span class="op">$</span><span class="va">cutoff_values</span><span class="op">)</span>      <span class="co"># Actual values tested</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bayesian optimization for efficient parameter search</span></span></span>
<span class="r-in"><span><span class="co"># Recommended when evaluation budget is limited or parameter space is large</span></span></span>
<span class="r-in"><span><span class="va">bayesian_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"bayesian"</span>,</span></span>
<span class="r-in"><span>  bayesian_iterations <span class="op">=</span> <span class="fl">15</span>,  <span class="co"># Sequential evaluations after initial design</span></span></span>
<span class="r-in"><span>  acquisition_function <span class="op">=</span> <span class="st">"ei"</span>, <span class="co"># Expected Improvement (balanced)</span></span></span>
<span class="r-in"><span>  exploration_factor <span class="op">=</span> <span class="fl">0.1</span>,   <span class="co"># Moderate exploration</span></span></span>
<span class="r-in"><span>  n_initial <span class="op">=</span> <span class="fl">8</span>,              <span class="co"># Initial Latin Hypercube points</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bayesian optimization with high exploration for global search</span></span></span>
<span class="r-in"><span><span class="co"># Useful for complex or multimodal parameter landscapes</span></span></span>
<span class="r-in"><span><span class="va">exploratory_result</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>, </span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"bayesian"</span>,</span></span>
<span class="r-in"><span>  bayesian_iterations <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  acquisition_function <span class="op">=</span> <span class="st">"ucb"</span>, <span class="co"># Upper Confidence Bound (more exploratory)</span></span></span>
<span class="r-in"><span>  exploration_factor <span class="op">=</span> <span class="fl">0.3</span>,     <span class="co"># High exploration</span></span></span>
<span class="r-in"><span>  n_initial <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Efficient Bayesian search with custom parameter ranges</span></span></span>
<span class="r-in"><span><span class="co"># Combines domain knowledge with efficient optimization</span></span></span>
<span class="r-in"><span><span class="va">efficient_bayesian</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"bayesian"</span>,</span></span>
<span class="r-in"><span>  scr_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span>,          <span class="co"># Custom SCR range based on data characteristics</span></span></span>
<span class="r-in"><span>  cutoff_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">2.5</span><span class="op">)</span>,    <span class="co"># Custom cutoff range</span></span></span>
<span class="r-in"><span>  bayesian_iterations <span class="op">=</span> <span class="fl">12</span>,      <span class="co"># Fewer iterations for quick optimization</span></span></span>
<span class="r-in"><span>  acquisition_function <span class="op">=</span> <span class="st">"ei"</span>,</span></span>
<span class="r-in"><span>  exploration_factor <span class="op">=</span> <span class="fl">0.05</span>,     <span class="co"># Low exploration for fast convergence</span></span></span>
<span class="r-in"><span>  n_initial <span class="op">=</span> <span class="fl">5</span>,                 <span class="co"># Minimal initial points</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare methods: Grid vs Bayesian efficiency</span></span></span>
<span class="r-in"><span><span class="co"># Demonstrates when to use each approach</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For small parameter spaces: Grid search</span></span></span>
<span class="r-in"><span><span class="va">grid_small</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"grid"</span>, </span></span>
<span class="r-in"><span>  n_grid_points <span class="op">=</span> <span class="fl">8</span>,  <span class="co"># 64 total evaluations</span></span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For equivalent evaluation budget: Bayesian optimization</span></span></span>
<span class="r-in"><span><span class="va">bayesian_equivalent</span> <span class="op">&lt;-</span> <span class="fu">auto_tune_joint_parameters</span><span class="op">(</span></span></span>
<span class="r-in"><span>  mx <span class="op">=</span> <span class="va">mobility_data</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"bayesian"</span>,</span></span>
<span class="r-in"><span>  n_initial <span class="op">=</span> <span class="fl">8</span>,            <span class="co"># Initial design points  </span></span></span>
<span class="r-in"><span>  bayesian_iterations <span class="op">=</span> <span class="fl">56</span>, <span class="co"># Sequential evaluations (8 + 56 = 64 total)</span></span></span>
<span class="r-in"><span>  acquisition_function <span class="op">=</span> <span class="st">"ei"</span>,</span></span>
<span class="r-in"><span>  exploration_factor <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access Bayesian-specific results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bayesian_result</span><span class="op">$</span><span class="va">bayesian_info</span><span class="op">)</span>      <span class="co"># Bayesian optimization details</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bayesian_result</span><span class="op">$</span><span class="va">convergence_history</span><span class="op">)</span> <span class="co"># Objective improvement over iterations</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Giampaolo Montaletti, Jonas Touboel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

