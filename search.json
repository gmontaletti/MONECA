[{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"about-moneca","dir":"","previous_headings":"","what":"About moneca","title":"CLAUDE.md","text":"moneca (Mobility Network Clustering Analysis) R package creates weighted networks mobility tables uses cliques create discrete nested clusters. package analyzes social mobility patterns graph-theoretic approaches. Current Status (v0.9.2): package streamlined focused API 21 exported functions, organized core analysis, data generation, modern visualization, analysis tools, legacy compatibility functions. Recent major revision removed archived experimental features consolidated codebase around proven core algorithm modern visualization system.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"building-and-checking","dir":"","previous_headings":"Package Development Commands","what":"Building and Checking","title":"CLAUDE.md","text":"","code":"# Build package R CMD build .  # Check package (comprehensive validation) R CMD check moneca_0.4.0.tar.gz  # Install from source R CMD INSTALL .  # Alternative with devtools (recommended) devtools::build() devtools::check() devtools::install()"},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"testing-and-documentation","dir":"","previous_headings":"Package Development Commands","what":"Testing and Documentation","title":"CLAUDE.md","text":"","code":"# Run comprehensive test suite devtools::test()  # Generate documentation with roxygen2 devtools::document()  # Build vignettes devtools::build_vignettes()  # Run examples devtools::run_examples()  # Load for interactive testing devtools::load_all()  # Check test coverage covr::package_coverage()"},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"dependencies-installation","dir":"","previous_headings":"Package Development Commands","what":"Dependencies Installation","title":"CLAUDE.md","text":"","code":"# Install all required dependencies install.packages(c(\"ggplot2\", \"ggraph\", \"igraph\", \"tidygraph\", \"dplyr\",                     \"RColorBrewer\", \"scales\", \"toOrdinal\", \"grid\"))  # Install development dependencies install.packages(c(\"devtools\", \"testthat\", \"knitr\", \"rmarkdown\", \"covr\"))  # Quick dependency check devtools::install_deps()"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"core-algorithm-flow","dir":"","previous_headings":"Code Architecture","what":"Core Algorithm Flow","title":"CLAUDE.md","text":"moneca(): Main clustering function runs iterative segmentation moneca_fast(): Optimized implementation producing identical results moneca() weight.matrix(): Converts mobility tables relative risk matrices find.segments(): Identifies cliques weighted networks (internal function) segment.matrix(): Aggregates mobility data segments next iteration (internal function)","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"key-data-structures","dir":"","previous_headings":"Code Architecture","what":"Key Data Structures","title":"CLAUDE.md","text":"segment.list: Nested list clique memberships level mat.list: Mobility matrices segmentation level small.cell.reduction: Parameter controlling minimum cell sizes","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"streamlined-api-21-exported-functions","dir":"","previous_headings":"Code Architecture","what":"Streamlined API (21 Exported Functions)","title":"CLAUDE.md","text":"package exports exactly 21 functions organized functional groups:","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"core-analysis-3","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Core Analysis (3)","title":"CLAUDE.md","text":"moneca() - Main algorithm moneca_fast() - Fast implementation weight.matrix() - Weight matrix conversion","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"data-generation-1","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Data Generation (1)","title":"CLAUDE.md","text":"generate_mobility_data() - Synthetic data generator","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"modern-visualization-5","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Modern Visualization (5)","title":"CLAUDE.md","text":"plot_moneca_ggraph() - Main network plots plot_ego_ggraph() - Ego network analysis plot_stair_ggraph() - Multi-level visualization plot_moneca_dendrogram() - Hierarchical tree plots plot_segment_quality() - Quality assessment plots","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"analysis-tools-6","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Analysis Tools (6)","title":"CLAUDE.md","text":"segment.membership() - Extract membership segment.membership.dataframe() - Membership data frame segment.quality() - Quality metrics segment.edges() - Edge weights segment.colors() - Color assignments vertex.mobility() - Vertex-level metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"auto-tuning-1","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Auto-Tuning (1)","title":"CLAUDE.md","text":"auto_tune_small_cell_reduction() - Parameter optimization","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"legacy-visualization-5","dir":"","previous_headings":"Code Architecture > Streamlined API (21 Exported Functions)","what":"Legacy Visualization (5)","title":"CLAUDE.md","text":"moneca.plot() - Base R plotting gg.moneca() - Original ggplot2 ego.plot() - Legacy ego network stair.plot() - Legacy stair plot layout.matrix() - Custom layout","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"modern-visualization-system-rmodern_plottingr","dir":"","previous_headings":"Code Architecture","what":"Modern Visualization System (R/modern_plotting.R)","title":"CLAUDE.md","text":"plot_moneca_ggraph(): Main network visualization ggraph (RECOMMENDED) plot_ego_ggraph(): Ego network analysis plots modern styling plot_stair_ggraph(): Multi-level segmentation visualization Enhanced Segment Naming: modern plotting functions support flexible segment naming Legacy functions: gg.moneca(), moneca.plot(), ego.plot() still available","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"synthetic-data-generation-rsynthetic_datar","dir":"","previous_headings":"Code Architecture","what":"Synthetic Data Generation (R/synthetic_data.R)","title":"CLAUDE.md","text":"generate_mobility_data(): Creates realistic synthetic mobility matrices generate_example_datasets(): Pre-configured datasets different mobility scenarios Parameters: immobility_strength, class_clustering, noise_level, custom class names","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"modern-ggraph-system-preferred","dir":"","previous_headings":"Code Architecture > Visualization Architecture","what":"Modern ggraph System (Preferred)","title":"CLAUDE.md","text":"Uses tidygraph graph manipulation ggraph modern network layouts Supports: FR, KK, stress, custom layouts Customizable node aesthetics (size, color, shape segment/mobility) Advanced edge styling (width, color, transparency weight)","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"legacy-plotting-backward-compatibility","dir":"","previous_headings":"Code Architecture > Visualization Architecture","what":"Legacy Plotting (Backward Compatibility)","title":"CLAUDE.md","text":"moneca.plot(): Base R plotting using igraph gg.moneca(): Original ggplot2 plotting (depends eliter package) layout.matrix(): Fruchterman-Reingold layout segment-based attraction","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"igraph-compatibility-system","dir":"","previous_headings":"Code Architecture","what":"igraph Compatibility System","title":"CLAUDE.md","text":"package includes sophisticated compatibility layer (R/igraph_compatibility.R) : - Automatically detects igraph version runtime - Maps old dot-notation functions new underscore functions - Provides custom norm_coords implementation removed functions - Ensures compatibility igraph >= 1.3.0 Key compatibility functions: - moneca_graph_from_adjacency() â†’ graph.adjacency() graph_from_adjacency_matrix() - moneca_get_edgelist() â†’ get.edgelist() as_edgelist() - moneca_norm_coords() â†’ custom implementation norm_coords unavailable","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"modern-visualization-system","dir":"","previous_headings":"Code Architecture","what":"Modern Visualization System","title":"CLAUDE.md","text":"package now includes modern plotting functions using ggraph: - plot_moneca_ggraph(): Main network visualization ggraph - plot_ego_ggraph(): Ego network analysis plots - plot_stair_ggraph(): Multi-level segmentation visualization - Legacy functions (gg.moneca(), moneca.plot()) still available backward compatibility","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"enhanced-segment-naming-system","dir":"","previous_headings":"Code Architecture","what":"Enhanced Segment Naming System","title":"CLAUDE.md","text":"modern plotting functions support flexible segment naming segment_naming parameter:","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"input-types","dir":"","previous_headings":"Code Architecture > Enhanced Segment Naming System","what":"Input Types:","title":"CLAUDE.md","text":"Character strings: â€œautoâ€, â€œconcatâ€, â€œpatternâ€, â€œcustomâ€ (existing functionality) Data frame: Must columns â€œnameâ€ â€œsegment_labelâ€ (NEW FEATURE) NULL: Defaults â€œautoâ€ strategy","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"implementation-details","dir":"","previous_headings":"Code Architecture > Enhanced Segment Naming System","what":"Implementation Details:","title":"CLAUDE.md","text":"Data frame validation: Ensures required columns exist Partial naming support: Missing names fall back default strategies Cross-function consistency: Works across plotting functions Error handling: Clear error messages invalid inputs","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"usage-examples","dir":"","previous_headings":"Code Architecture > Enhanced Segment Naming System","what":"Usage Examples:","title":"CLAUDE.md","text":"","code":"# String-based naming (existing) plot_moneca_ggraph(seg, segment_naming = \"auto\")  # Custom data frame (new) custom_labels <- data.frame(   name = c(\"Class1\", \"Class2\", \"Class3\"),   segment_label = c(\"Executive\", \"Professional\", \"Technical\"),   stringsAsFactors = FALSE ) plot_moneca_ggraph(seg, segment_naming = custom_labels)"},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"synthetic-data-generation","dir":"","previous_headings":"Code Architecture","what":"Synthetic Data Generation","title":"CLAUDE.md","text":"generate_mobility_data(): Creates realistic synthetic mobility matrices generate_example_datasets(): Pre-configured datasets different mobility scenarios Supports customizable parameters: immobility strength, class clustering, noise levels","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"testing-framework-teststestthat","dir":"","previous_headings":"Code Architecture","what":"Testing Framework (tests/testthat/)","title":"CLAUDE.md","text":"Comprehensive test suite using testthat (>= 3.0.0) test-synthetic-data.R: Data generation validation, parameter handling, reproducibility test-moneca-core.R: Core algorithms, weight matrices, hierarchical segmentation test-plotting.R: Modern ggraph functions, parameter validation, error handling test-igraph-compatibility.R: Version compatibility, function mapping, edge cases Run tests: devtools::test() testthat::test_dir(\"tests\") Coverage: Use covr::package_coverage() check test coverage","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"documentation-structure","dir":"","previous_headings":"Code Architecture","what":"Documentation Structure","title":"CLAUDE.md","text":"Vignette: vignettes/moneca-introduction.Rmd - Comprehensive tutorial Function docs: Roxygen2-generated documentation modern examples README.md: Updated modern workflow, installation, quick start CLAUDE.md: Development guidance (file)","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"package-dependencies","dir":"","previous_headings":"Code Architecture","what":"Package Dependencies","title":"CLAUDE.md","text":"Core Required: ggplot2 (>= 3.4.0), ggraph (>= 2.0.0), igraph (>= 1.3.0), tidygraph (>= 1.2.0), dplyr (>= 1.0.0) Additional: RColorBrewer, scales, toOrdinal, grid, stats, grDevices Development: knitr, rmarkdown, testthat (>= 3.0.0) Check deps: devtools::install_deps() installs required dependencies","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"development-best-practices","dir":"","previous_headings":"Code Architecture","what":"Development Best Practices","title":"CLAUDE.md","text":"S3 classes custom print methods MONECA objects Backward compatibility maintained existing functions Modern examples use synthetic data (external dependencies) Extensive parameter validation informative error messages Reproducible analysis seed parameters synthetic data Modular architecture clear separation concerns Enhanced visualization features like flexible segment naming improve usability","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"testing-new-features","dir":"","previous_headings":"Quick Start for Development","what":"Testing New Features","title":"CLAUDE.md","text":"","code":"# Load package for development devtools::load_all()  # Generate test data test_data <- generate_mobility_data(n_classes = 5, seed = 123)  # Run analysis seg <- moneca(test_data, segment.levels = 3)  # Test modern plotting plot_moneca_ggraph(seg, node_color = \"segment\")  # Test enhanced segment naming custom_names <- data.frame(   name = rownames(test_data)[1:3],   segment_label = c(\"Executive\", \"Professional\", \"Technical\"),   stringsAsFactors = FALSE ) plot_moneca_ggraph(seg, segment_naming = custom_names)  # Run specific tests testthat::test_file(\"tests/testthat/test-moneca-core.R\")"},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"common-development-tasks","dir":"","previous_headings":"Quick Start for Development","what":"Common Development Tasks","title":"CLAUDE.md","text":"","code":"# Update documentation after changes devtools::document()  # Check package thoroughly devtools::check()  # Install and test locally devtools::install()  # Build vignettes after updates devtools::build_vignettes()"},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"file-organization","dir":"","previous_headings":"Quick Start for Development","what":"File Organization","title":"CLAUDE.md","text":"R/moneca.R: Package-level documentation R/analytical_functions.R: Core algorithm (moneca(), find.segments(), internal functions) R/moneca_fast.R: Fast implementation optimized algorithms R/modern_plotting.R: Modern ggraph visualization functions R/synthetic_data.R: Data generation functions R/descriptive_functions.R: Analysis tools (segment.membership, segment.quality, etc.) R/ggplotting.R: Legacy ggplot2 functions (backward compatibility) R/auto_tuning.R: Auto-tuning functionality R/igraph_compatibility.R: Version compatibility layer R/optimized_algorithms.R: Performance-optimized internal algorithms tests/testthat/: Complete test suite vignettes/: Package tutorial documentation man/: Auto-generated function documentation","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"migration-notes-for-existing-users","dir":"","previous_headings":"Quick Start for Development","what":"Migration Notes for Existing Users","title":"CLAUDE.md","text":"Package name: Changed MONECA moneca (lowercase) Installation: Use install_github(\"gmontaletti/moneca\") instead original repository Loading: Use library(moneca) instead library(MONECA) Plotting: Recommend migrating gg.moneca() plot_moneca_ggraph() Data: Use generate_mobility_data() instead external datasets examples Performance: Use moneca_fast() large datasets (produces identical results) Testing: core functions continue work unchanged Dependencies: Package now requires ggraph tidygraph modern features","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"development-guidelines","dir":"","previous_headings":"Quick Start for Development","what":"Development Guidelines","title":"CLAUDE.md","text":"Never change original moneca() function - reference implementation Use moneca_fast() performance improvements maintaining identical results reference directory cleanup/move file operations ../reference/moneca/ bumping version, update citation README.md Maintain backward compatibility exported functions new visualization use ggraph-based modern_plotting.R functions","code":""},{"path":"https://gmontaletti.github.io/MONECA/CLAUDE.html","id":"recent-major-revision-v092","dir":"","previous_headings":"Quick Start for Development","what":"Recent Major Revision (v0.9.2)","title":"CLAUDE.md","text":"Removed experimental/archived features (parallel processing, temporal analysis, advanced tuning variants) Consolidated 21 well-tested exported functions Simplified vignette focus core workflow: moneca() â†’ moneca_fast() â†’ plot_*() Updated documentation reflect streamlined API Retained full backward compatibility existing code","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Log-Linear Models for Mobility Tables","text":"mobility table records individuals move categories (occupations, social classes, regions) time. MONECA identifies clusters categories high internal mobility using graph-theoretic algorithm. Log-linear models complement providing statistical framework test whether clusters â€” structural features â€” capture genuine patterns data. moneca package provides two functions purpose: fit_mobility_model() fits single log-linear model mobility table compare_mobility_models() compares multiple models side side, likelihood-ratio tests nested pairs vignette walks complete analysis using synthetic data, covering five model types, read output, compare , inspect residuals insight.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"setup-generate-data-and-run-moneca","dir":"Articles","previous_headings":"","what":"Setup: generate data and run MONECA","title":"Log-Linear Models for Mobility Tables","text":"resulting object seg contains segment assignments multiple hierarchical levels. log-linear models test whether assignments explain statistically meaningful structure table.","code":"library(moneca)  # Generate an 8-class mobility table mx <- generate_mobility_data(   n_classes = 8,   n_total = 10000,   immobility_strength = 0.6,   class_clustering = 0.3,   seed = 42 )  # Run MONECA seg <- moneca_fast(mx, segment.levels = 3) #>   |                                                                              |======================================================================| 100% #>   |                                                                              |                                                                      |   0% print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    41.3% #> Average Mobility Concentration (all levels):         88.8% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    58.7    82.9    90.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    82.0    82.9    90.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 8            3            2            1  #> Significant Edges:                      13            0            0            0  #> Network Density:                     0.232        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.23 2.43   5.68  5.1 6.59 10.5 #> Level 2 0.00 0.00   0.00  0.0 0.00  0.0 #> Level 3 0.00 0.00   0.00  0.0 0.00  0.0 #> Level 4 0.00 0.00   0.00  0.0 0.00  0.0 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 2.39   2.67 2.55 3.16 4.02 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.92    2.7 2.55 3.11 7.51 #> Level 2   0 0.00    0.0 0.00 0.00 0.00 #> Level 3   0 0.00    0.0 0.00 0.00 0.00 #> Level 4   0 0.00    0.0 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min  Q1 Median Mean   Q3  Max #> Level 1 1.21 1.3    1.4 1.57 1.78 2.56 #> Level 2   NA  NA     NA  NaN   NA   NA #> Level 3   NA  NA     NA  NaN   NA   NA #> Level 4   NA  NA     NA  NaN   NA   NA #>  #> ================================================================================"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"the-five-model-types","dir":"Articles","previous_headings":"","what":"The five model types","title":"Log-Linear Models for Mobility Tables","text":"model represents different hypothesis drives mobility patterns. ordered simplest complex.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"independence","dir":"Articles","previous_headings":"The five model types","what":"Independence","title":"Log-Linear Models for Mobility Tables","text":"independence model assumes origin destination unrelated: knowing someone starts tells nothing end . cell frequencies predicted row column marginal totals alone. model almost always fits poorly mobility tables, people tend stay current position move nearby ones. serves baseline models compared.","code":"m_ind <- fit_mobility_model(mx, type = \"independence\") print(m_ind) #> Log-Linear Model for Mobility Table #> ==================================== #> Type: independence #> Categories: 8 #>  #> Deviance (G2): 14676.049 #> Df: 49 #> P-value: 0 #> Dissimilarity index: 0.500 #> AIC: 15068.707 #> BIC: 15101.091"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"quasi-independence","dir":"Articles","previous_headings":"The five model types","what":"Quasi-independence","title":"Log-Linear Models for Mobility Tables","text":"quasi-independence model adds separate parameter diagonal cell, accounting fact people tend stay put (immobility). -diagonal flows still assumed follow marginal distributions. improvement independence typically large, immobility dominant feature mobility tables. However, low p-value high dissimilarity index means -diagonal structure â€” moves â€” random.","code":"m_qi <- fit_mobility_model(mx, type = \"quasi_independence\") print(m_qi) #> Log-Linear Model for Mobility Table #> ==================================== #> Type: quasi_independence #> Categories: 8 #>  #> Deviance (G2): 3843.491 #> Df: 41 #> P-value: 0 #> Dissimilarity index: 0.176 #> AIC: 4252.149 #> BIC: 4301.803"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"quasi-symmetry","dir":"Articles","previous_headings":"The five model types","what":"Quasi-symmetry","title":"Log-Linear Models for Mobility Tables","text":"quasi-symmetry model tests whether flow category B equals flow B , accounting differences marginal sizes. adds parameter unordered pair categories. model fits well, mobility approximately symmetric: transitions two categories balanced (relative sizes). fits poorly, flows directional â€” people move easily one direction . quasi-symmetry model fitted using Iterative Proportional Fitting (IPF) rather GLM, makes fast numerically stable even large matrices.","code":"m_qs <- fit_mobility_model(mx, type = \"quasi_symmetry\") print(m_qs) #> Log-Linear Model for Mobility Table #> ==================================== #> Type: quasi_symmetry #> Categories: 8 #>  #> Deviance (G2): 19.811 #> Df: 21 #> P-value: 0.533 #> Dissimilarity index: 0.008 #> AIC: 468.469 #> BIC: 561.301"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"uniform-association","dir":"Articles","previous_headings":"The five model types","what":"Uniform association","title":"Log-Linear Models for Mobility Tables","text":"uniform association model adds single parameter measuring overall strength ordinal association. treats categories ordered (position table) asks: adjacent categories exchange members often distant ones? model useful categories natural ordering (e.g., social classes lower upper). mobility structure multidimensional rather ordinal, single association parameter capture well.","code":"m_ua <- fit_mobility_model(mx, type = \"uniform_association\") print(m_ua) #> Log-Linear Model for Mobility Table #> ==================================== #> Type: uniform_association #> Categories: 8 #>  #> Deviance (G2): 3491.285 #> Df: 48 #> P-value: 0 #> Dissimilarity index: 0.220 #> AIC: 3885.943 #> BIC: 3920.485"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"moneca-topology","dir":"Articles","previous_headings":"The five model types","what":"MONECA topology","title":"Log-Linear Models for Mobility Tables","text":"MONECA topology model uses segment assignments MONECA analysis structural predictors. adds diagonal parameters (like quasi-independence) plus segment-pair factor distinguishes within-segment -segment flows. model fits substantially better quasi-independence, segments identified MONECA correspond genuine mobility barriers: people move within segments expected segments less expected.","code":"m_top <- fit_mobility_model(seg, type = \"moneca_topology\", level = 2) print(m_top) #> Log-Linear Model for Mobility Table #> ==================================== #> Type: moneca_topology #> Categories: 8 #> Segment level: 2 #>  #> Deviance (G2): 1290.816 #> Df: 38 #> P-value: 3.06e-246 #> Dissimilarity index: 0.087 #> AIC: 1705.474 #> BIC: 1761.605"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"reading-the-output","dir":"Articles","previous_headings":"","what":"Reading the output","title":"Log-Linear Models for Mobility Tables","text":"fit_mobility_model() call returns moneca_loglinear object several fields: Deviance (GÂ²): likelihood-ratio statistic measuring far model saturated model (fits data exactly). Lower values indicate better fit. Degrees freedom (df): number free data points minus number model parameters. complex models use parameters fewer degrees freedom. P-value: derived chi-squared test deviance. large p-value (> 0.05) means model fits adequately; small p-value means model misses structure present data. Dissimilarity index: proportion cases need reclassified model reproduce observed table exactly. Values 0.05 indicate good fit; 0.03, excellent fit. AIC / BIC: information criteria comparing non-nested models. Lower values preferred. BIC penalizes complexity heavily AIC. Fitted values ($fitted): modelâ€™s predicted cell counts, n x n matrix. Residuals ($residuals): Pearson residuals, n x n matrix. Large positive residuals indicate flows model -predicts.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"comparing-models","dir":"Articles","previous_headings":"","what":"Comparing models","title":"Log-Linear Models for Mobility Tables","text":"compare_mobility_models() function produces summary table likelihood-ratio tests single call. passed moneca object via mx, automatically fits five model types:","code":"comp <- compare_mobility_models(mx = seg, level = 2) print(comp) #> Log-Linear Model Comparison #> =========================== #>  #>                model  deviance df       aic       bic   p_value dissimilarity #>       quasi_symmetry    19.811 21   468.469   561.301  5.33e-01         0.008 #>      moneca_topology  1290.816 38  1705.474  1761.605 3.06e-246         0.087 #>  uniform_association  3491.285 48  3885.943  3920.485  0.00e+00         0.220 #>   quasi_independence  3843.491 41  4252.149  4301.803  0.00e+00         0.176 #>         independence 14676.049 49 15068.707 15101.091  0.00e+00         0.500 #>  #> Likelihood-Ratio Tests: #>             model_1             model_2 delta_deviance delta_df p_value #>        independence  quasi_independence      10832.559        8       0 #>        independence uniform_association      11184.765        1       0 #>  quasi_independence      quasi_symmetry       3823.680       20       0 #>  quasi_independence     moneca_topology       2552.674        3       0"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"reading-the-comparison-table","dir":"Articles","previous_headings":"Comparing models","what":"Reading the comparison table","title":"Log-Linear Models for Mobility Tables","text":"table sorted BIC (lowest first). Key columns examine: BIC: primary criterion model selection among non-nested models. model lowest BIC provides best trade-fit parsimony. Dissimilarity: intuitive measure practical fit. Compare values across models see ones capture data accurately. P-value: model large p-value, fits data adequately . p-values small, models miss structure, comparison focuses misses least.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"reading-the-likelihood-ratio-tests","dir":"Articles","previous_headings":"Comparing models","what":"Reading the likelihood-ratio tests","title":"Log-Linear Models for Mobility Tables","text":"lr_tests component tests whether moving simpler model complex one provides statistically significant improvement. row shows: model_1 (simpler) model_2 (complex): two nested models delta_deviance: reduction GÂ² moving simpler complex model delta_df: number additional parameters used p_value: small, complex model captures real structure simpler one misses example, significant test quasi-independence MONECA topology means MONECA segments explain mobility patterns beyond diagonal immobility alone can account . segments correspond genuine structural features table, artifacts clustering algorithm.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"working-with-larger-matrices","dir":"Articles","previous_headings":"","what":"Working with larger matrices","title":"Log-Linear Models for Mobility Tables","text":"log-linear functions scale large matrices. quasi-symmetry model uses IPF rather GLM, remains fast even GLM-based fitting becomes numerically expensive. matrices 50 categories, quasi-symmetry model fitted via IPF typically converges 20â€“50 iterations, GLM-based approach model require thousands symmetric-pair parameters.","code":"mx_large <- generate_mobility_data(   n_classes = 30,   n_total = 50000,   immobility_strength = 0.6,   class_clustering = 0.3,   seed = 99 )  seg_large <- moneca_fast(mx_large, segment.levels = 3) #>   |                                                                              |======================================================================| 100% #>   |                                                                              |======================================================================| 100% #>   |                                                                              |======================================================================| 100%  # Fit all models and compare comp_large <- compare_mobility_models(mx = seg_large, level = 2) print(comp_large) #> Log-Linear Model Comparison #> =========================== #>  #>                model  deviance  df        aic        bic p_value dissimilarity #>       quasi_symmetry    120.32 406   2269.943   4642.326       1         0.008 #>      moneca_topology  13993.01 746  15462.638  16202.207       0         0.113 #>  uniform_association  26763.13 840  28044.757  28332.900       0         0.246 #>   quasi_independence  74820.91 811  76160.538  76587.951       0         0.345 #>         independence 190407.61 841 191687.230 191970.571       0         0.813 #>  #> Likelihood-Ratio Tests: #>             model_1             model_2 delta_deviance delta_df p_value #>        independence  quasi_independence       115586.7       30       0 #>        independence uniform_association       163644.5        1       0 #>  quasi_independence      quasi_symmetry        74700.6      405       0 #>  quasi_independence     moneca_topology        60827.9       65       0"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"inspecting-residuals","dir":"Articles","previous_headings":"","what":"Inspecting residuals","title":"Log-Linear Models for Mobility Tables","text":"residuals best-fitting model identify specific flows model capture well. Large positive Pearson residuals point transitions occur often model predicts â€” unexpected mobility channels may warrant investigation. category pairs observed mobility exceeds modelâ€™s prediction. represent flows cross segment boundaries identified MONECA â€” transitions clusters topology model anticipate. cross-segment flows can reveal labor market connections, institutional pathways, structural changes cluster-based model misses.","code":"# Extract residuals from the MONECA topology model resid_mx <- m_top$residuals  # Convert to a sorted data frame resid_df <- data.frame(   Origin = rep(rownames(resid_mx), ncol(resid_mx)),   Destination = rep(colnames(resid_mx), each = nrow(resid_mx)),   Residual = as.vector(resid_mx),   stringsAsFactors = FALSE )  # Remove diagonal (immobility is accounted for by the model) resid_df <- resid_df[resid_df$Origin != resid_df$Destination, ]  # Show the largest under-predicted flows resid_df <- resid_df[order(-resid_df$Residual), ] head(resid_df, 10) #>     Origin Destination  Residual #> 45 Class 5     Class 6 15.425074 #> 39 Class 7     Class 5 11.555896 #> 17 Class 1     Class 3 10.465040 #> 38 Class 6     Class 5  9.117058 #> 11 Class 3     Class 2  7.256005 #> 30 Class 6     Class 4  5.509197 #> 18 Class 2     Class 3  5.506344 #> 3  Class 3     Class 1  5.153430 #> 29 Class 5     Class 4  5.145182 #> 56 Class 8     Class 7  4.498055"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-models.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Log-Linear Models for Mobility Tables","text":"typical workflow log-linear analysis mobility table : Run MONECA (moneca() moneca_fast()) identify segment structure Compare models compare_mobility_models() assess whether segments capture genuine patterns Inspect residuals best model identify unexpected mobility channels five model types test different hypotheses: MONECA topology model outperforms quasi-independence, confirms algorithmic segmentation identifies real structural boundaries mobility data. segments just convenient visualization â€” correspond statistically measurable discontinuities people move categories.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"document presents log-linear model analysis Italian professional mobility table. objective evaluate well different structural models account observed patterns occupational transitions, particular assess whether segmentation produced MONECA algorithm identifies statistically meaningful clusters professions. Log-linear models provide standard framework analyzing mobility tables. fitting sequence increasingly complex models â€” full independence structured topology models â€” possible quantify much association origin destination professions captured specification. analysis proceeds four steps: data preparation, MONECA segmentation, model fitting, model comparison.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"data-description","dir":"Articles","previous_headings":"","what":"Data Description","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"data consist Italian occupational mobility table derived administrative records Lombardy region. original matrix 129 rows 129 columns, corresponding detailed professional categories. removing three armed forces categories, working matrix 126 x 126 cells. Key characteristics data: Total observations: 1,591,811 recorded transitions Immobility rate: 50.4% individuals remain profession Zero cells: 5,601 15,876 cells (35.3%) contain observed transitions Margins: Added automatically moneca_fast() present input high proportion zero cells indicates many profession pairs observed transitions. sparsity consistent nature occupational mobility: professions directly connected labor market flows. high immobility rate â€” half individuals stay current profession â€” central feature data adequate model must account .","code":"# 1. Load and prepare data ----- library(moneca)  mx_raw <- readRDS(\"profession_matrix_8day.rds\")  # Remove armed forces (last 3 rows/columns) n <- nrow(mx_raw) mx <- mx_raw[1:(n - 3), 1:(n - 3)]  # Basic descriptives cat(\"Dimensions:\", nrow(mx), \"x\", ncol(mx), \"\\n\") cat(\"Total observations:\", sum(mx), \"\\n\") cat(\"Immobility rate:\", round(sum(diag(mx)) / sum(mx), 3), \"\\n\") cat(\"Zero cells:\", sum(mx == 0), \"out of\", prod(dim(mx)), \"\\n\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"moneca-segmentation","dir":"Articles","previous_headings":"","what":"MONECA Segmentation","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"fitting log-linear models, MONECA algorithm applied mobility table identify clusters professions high internal mobility. moneca_fast() function used NMF-based density reduction (default parameters), appropriate matrix size given density level. segmentation produces three hierarchical levels beyond base: Level 1 identity partition: 126 categories forms singleton segment. Level 2, 32 multi-member segments, provides first substantively meaningful grouping: 81 professions assigned segments, 45 remain unassigned. Level 3, aggregation produces 19 segments covering 99 professions. Level 4, 14 segments account 106 126 original categories, leaving 20 unassigned. segment assignments serve structural topology log-linear models .","code":"# 2. Run MONECA with NMF density reduction ----- seg <- moneca_fast(   mx,   segment.levels = 3,   reduce_density = TRUE,   density_params = list(method = \"nmf\", seed = 42) )  print(seg)"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"log-linear-models","dir":"Articles","previous_headings":"","what":"Log-Linear Models","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Five Poisson log-linear models fitted using glm(family = poisson). represents different hypothesis structure mobility table.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"model-specifications","dir":"Articles","previous_headings":"Log-Linear Models","what":"Model Specifications","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Independence model. Origin destination professions statistically independent. -diagonal flows predicted solely marginal distributions: logFij=Î¼+Î±i+Î²j\\log F_{ij} = \\mu + \\alpha_i + \\beta_j Quasi-independence model. Origin destination independent conditional -diagonal. separate parameter added diagonal cell, allowing model account immobility without constraining -diagonal structure: logFij=Î¼+Î±i+Î²j+Î´iâ‹…ðŸ(=j)\\log F_{ij} = \\mu + \\alpha_i + \\beta_j + \\delta_i \\cdot \\mathbf{1}(= j) Î´i\\delta_i captures immobility effect profession ii. Uniform association model. single parameter Ï•\\phi measures overall strength association, treating professions ordered integer scale: logFij=Î¼+Î±i+Î²j+Ï•â‹…uiâ‹…vj\\log F_{ij} = \\mu + \\alpha_i + \\beta_j + \\phi \\cdot u_i \\cdot v_j ui=iu_i = vj=jv_j = j integer scores. MONECA topology models. segment assignments MONECA define block structure. Within-segment -segment flows receive separate parameters: logFij=Î¼+Î±i+Î²j+Î´iâ‹…ðŸ(=j)+Î³S(),S(j)\\log F_{ij} = \\mu + \\alpha_i + \\beta_j + \\delta_i \\cdot \\mathbf{1}(= j) + \\gamma_{S(), S(j)} S()S() segment assignment profession ii Î³S(),S(j)\\gamma_{S(), S(j)} captures interaction segment pairs. Two versions fitted: one using Level 2 assignments (32 segments) one using Level 3 assignments (19 segments).","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"code","dir":"Articles","previous_headings":"Log-Linear Models","what":"Code","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"call returns moneca_loglinear object containing fitted glm, deviance, degrees freedom, AIC, BIC, p-value, dissimilarity index, fitted/residual matrices reshaped original dimensions.","code":"# 3. Fit log-linear models ----- m_ind  <- fit_mobility_model(mx, type = \"independence\") m_qi   <- fit_mobility_model(mx, type = \"quasi_independence\") m_ua   <- fit_mobility_model(mx, type = \"uniform_association\") m_top2 <- fit_mobility_model(seg, type = \"moneca_topology\", level = 2) m_top3 <- fit_mobility_model(seg, type = \"moneca_topology\", level = 3)"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"model-comparison","dir":"Articles","previous_headings":"Log-Linear Models","what":"Model Comparison","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"following table summarizes fit statistics five models. G2G^2 likelihood-ratio deviance (lower indicates better fit). dissimilarity index (DI) measures proportion cases need reclassified achieve perfect fit. Note quasi-symmetry. quasi-symmetry model fitted. 126 categories, require approximately 8,000 symmetric pair parameters (126Ã—125/2=7,875126 \\times 125 / 2 = 7{,}875), exceeds numerical stability limits GLM solver matrix size.","code":"# 4. Compare models ----- comp <- compare_mobility_models(m_ind, m_qi, m_ua, m_top2, m_top3) print(comp)"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"likelihood-ratio-tests","dir":"Articles","previous_headings":"Log-Linear Models","what":"Likelihood-Ratio Tests","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Nested models compared using likelihood-ratio test (Î”G2\\Delta G^2). test evaluates whether additional parameters complex model provide statistically significant improvement fit. Likelihood-ratio tests computed automatically compare_mobility_models() known nesting relationships. $lr_tests component comparison object contains results: comparisons statistically significant conventional levels.","code":"# 5. Likelihood-ratio tests ----- # Extracted from the comparison object comp$lr_tests"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"the-structure-of-the-data","dir":"Articles","previous_headings":"Interpretation","what":"The Structure of the Data","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Italian professional mobility table contains 126 occupational categories 1.6 million observed transitions. Half individuals remain profession observation period. third cell pairs (35.3%) observed transitions, reflecting fact professions connected direct mobility flows. combination â€” high diagonal concentration widespread zero cells â€” characteristic large, detailed occupational classifications.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"independence-model-a-baseline","dir":"Articles","previous_headings":"Interpretation","what":"Independence Model: A Baseline","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"independence model assumes origin destination professions unrelated. dissimilarity index 0.60 indicates 60% cases need reclassified match observed data. expected: people move randomly professions. Occupational transitions structured skills, credentials, industry, labor market segmentation. independence model serves lower bound models compared.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"diagonal-immobility-is-the-dominant-pattern","dir":"Articles","previous_headings":"Interpretation","what":"Diagonal Immobility Is the Dominant Pattern","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"transition independence quasi-independence provides single largest improvement fit across model comparisons. Adding 126 diagonal parameters reduces G2G^2 3,970,002, dissimilarity index drops 0.60 0.19. fact half population stays profession dominant feature table, diagonal parameters capture effect directly. However, dissimilarity index 0.19 means quasi-independence still misclassifies 19% transitions. substantial structure -diagonal flows â€” pattern moves â€” quasi-independence model capture. remaining analysis focuses -diagonal structure.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"ordinal-ranking-has-limited-explanatory-power","dir":"Articles","previous_headings":"Interpretation","what":"Ordinal Ranking Has Limited Explanatory Power","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"uniform association model adds single parameter measuring overall strength linear--linear association, treating professions ordered integer scale. model reduces G2G^2 approximately 990,000 independence, dissimilarity index remains 0.576 â€” marginally better independence. result indicates professional mobility Italy follow simple ordinal gradient. professions arranged along single hierarchy adjacent professions exchanged members frequently, uniform association model perform well. . mobility structure multidimensional: professions cluster sector, skill type, institutional boundaries rather along single ranking. single association parameter capture complexity.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"moneca-segments-capture-genuine-mobility-barriers","dir":"Articles","previous_headings":"Interpretation","what":"MONECA Segments Capture Genuine Mobility Barriers","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"central finding analysis concerns MONECA topology models. Starting quasi-independence (DI = 0.190), MONECA Level 2 topology model reduces dissimilarity index 0.062 adding 528 parameters representing segment-pair interactions. improvement G2G^2 802,015, statistically overwhelming (p<2.2Ã—10âˆ’16p < 2.2 \\times 10^{-16}). practical significance DI = 0.062 6.2% transitions misclassified model. 32 segments identified MONECA Level 2 â€” representing clusters professions elevated internal mobility â€” account large majority -diagonal structure table. Moving quasi-independence (DI = 0.190) MONECA topology (DI = 0.062) eliminates roughly two-thirds remaining misfit. segments correspond recognizable professional clusters: groups manual trades, administrative commercial occupations, education-related professions, agricultural specializations, similar groupings. segments arbitrary. derived observed mobility network , log-linear analysis confirms boundaries define correspond statistically meaningful discontinuities flow workers occupations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"coarser-segmentation-still-works-but-fits-worse","dir":"Articles","previous_headings":"Interpretation","what":"Coarser Segmentation Still Works but Fits Worse","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"MONECA Level 3 topology model, 19 segments, achieves DI = 0.092. substantially better quasi-independence (0.190) worse Level 2 model (0.062). additional granularity Level 2 captures real mobility boundaries, simply noise: 13 additional segment distinctions Level 3 Level 2 correspond genuine differences mobility patterns. likelihood-ratio test comparing quasi-independence Level 3 topology (Î”G2=686,455\\Delta G^2 = 686{,}455, Î”df=190\\Delta \\text{df} = 190) also highly significant. topology models represent large improvements baseline, Level 2 provides better fit.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"largest-model-residuals-reveal-cross-segment-flows","dir":"Articles","previous_headings":"Interpretation","what":"Largest Model Residuals Reveal Cross-Segment Flows","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Even best-fitting model (MONECA topology L2) capture mobility flows. Examination largest positive Pearson residuals identifies specific profession pairs observed flows substantially exceed model predictions. transitions occur across segment boundaries â€” â€œbridge flowsâ€ cluster structure predict: Agricultural machine operators specialized farmers (r=65.9r = 65.9) Cultural service technicians artistic specialists (r=54.7r = 54.7 47.047.0 directions) Travel assistants qualified commercial workers (r=53.5r = 53.5 51.451.4 directions) residuals identify specific mobility channels cross segment boundaries identified MONECA. represent career pathways â€” often involving related distinct occupational fields â€” connect otherwise separate clusters. cross-segment flows informative: point labor market connections purely cluster-based model capture may warrant investigation.","code":"# 6. Examine largest residuals ----- # The residuals matrix is stored in the moneca_loglinear object resid_mx <- m_top2$residuals  # Find largest positive residuals (flows exceeding prediction) resid_long <- data.frame(   Origin = rep(rownames(resid_mx), ncol(resid_mx)),   Destination = rep(colnames(resid_mx), each = nrow(resid_mx)),   Residual = as.vector(resid_mx),   stringsAsFactors = FALSE ) resid_long <- resid_long[order(-resid_long$Residual), ] head(resid_long, 20)"},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"summary","dir":"Articles","previous_headings":"Interpretation","what":"Summary","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"results demonstrate Italian professional mobility organized recognizable clusters occupations. Within clusters, workers move similar professions rates higher expected independence. clusters, mobility barriers limit flow workers. MONECA topology model provides substantially better fit standard log-linear baselines: independence model misclassifies 60% transitions. Quasi-independence (accounting immobility) reduces 19%. MONECA Level 2 topology reduces misclassification 6.2%. network-based segmentation identifies statistically meaningful professional boundaries. improvement quasi-independence merely statistically significant (, given 1.6 million observations, low bar) practically substantial: two-thirds -diagonal misfit eliminated segment structure. findings confirm utility MONECA preprocessing step mobility table analysis. segments identifies descriptively useful visualizing occupational clusters also correspond genuine structural features mobility table measured standard log-linear model criteria.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"Agresti, . (2002). Categorical Data Analysis. 2nd edition. Wiley. Goodman, L. . (1979). Simple models analysis association cross-classifications ordered categories. Journal American Statistical Association, 74(367), 537â€“552. Touboel, J. & Larsen, . G. (2017). MONECA: MObility NEtwork Clustering Analysis. R package.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/loglinear-profession-mobility.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session Information","title":"Log-Linear Models for Professional Mobility: An Application to Italian Occupational Data","text":"","code":"sessionInfo()"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"moneca (Mobility Network Clustering Analysis) R package analyzes social mobility patterns graph-theoretic approaches. package creates weighted networks mobility tables uses cliques identify discrete nested clusters positions high internal mobility.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"about-this-vignette","dir":"Articles","previous_headings":"Introduction","what":"About This Vignette","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"vignette written Giampaolo Montaletti part comprehensive modernization moneca package (2024). provides complete guide using modern features capabilities package, including new visualization system, synthetic data generation, enhanced analysis tools.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"package-background","dir":"Articles","previous_headings":"Introduction","what":"Package Background","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"moneca package (lowercase) complete rewrite modernization original MONECA package. implements clustering algorithm originally developed Touboel & Larsen (2017), current package features entirely new code visualization, testing, data generation, documentation authored Giampaolo Montaletti.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"key-features","dir":"Articles","previous_headings":"Introduction","what":"Key Features","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Network-based clustering mobility tables Hierarchical segmentation multiple levels Modern visualization ggplot2 ggraph Quality metrics assessing segmentation performance Synthetic data generation testing demonstrations","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"basic-concepts","dir":"Articles","previous_headings":"","what":"Basic Concepts","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Social mobility can represented network : Nodes represent social positions (occupations, classes, etc.) Edges represent mobility flows positions Edge weights represent strength mobility connections Clusters represent groups positions high internal mobility MONECA identifies clusters : Converting mobility tables relative risk matrices Finding cliques weighted network Iteratively aggregating positions segments Creating hierarchical segmentation levels","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"installation-and-setup","dir":"Articles","previous_headings":"","what":"Installation and Setup","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Install from GitHub devtools::install_github(\"gmontaletti/moneca\")  # Load the package library(moneca)  # Load additional packages for visualization library(ggplot2) library(ggraph)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"working-with-synthetic-data","dir":"Articles","previous_headings":"","what":"Working with Synthetic Data","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA includes functions generate synthetic mobility data demonstrations testing.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"creating-basic-synthetic-data","dir":"Articles","previous_headings":"Working with Synthetic Data","what":"Creating Basic Synthetic Data","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"mobility matrix shows: - Rows: Origin classes (people start) - Columns: Destination classes (people end ) - Last row/column: Marginal totals - Diagonal: Immobility (staying class)","code":"# Generate a large 30-class mobility table for better statistical analysis basic_data <- generate_mobility_data(   n_classes = 30,   n_total = 50000,  # Larger population for better statistical power   immobility_strength = 0.7,   class_clustering = 0.2,   class_names = paste(\"Class\", sprintf(\"%02d\", 1:30)),   seed = 42 )  # View a subset of the structure to show key portions cat(\"Mobility matrix dimensions:\", dim(basic_data), \"\\n\") #> Mobility matrix dimensions: 31 31 cat(\"Total population:\", basic_data[31, 31], \"\\n\\n\") #> Total population: 50000  # Show first 8x8 corner with totals to demonstrate structure cat(\"First 8x8 corner of mobility matrix with marginal totals:\\n\") #> First 8x8 corner of mobility matrix with marginal totals: subset_matrix <- basic_data[c(1:8, 31), c(1:8, 31)] print(subset_matrix) #>          Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Class 07 #> Class 01     2377      388      156       11       14        7       11 #> Class 02       78      500       78       41        8        3        7 #> Class 03       73      140      855      141       57        2        5 #> Class 04        3       20       26      266       39       16        1 #> Class 05        2        2       65      121      785       95       52 #> Class 06        1        1        6       22       72      465       60 #> Class 07       19       12        8        9      239      434     2793 #> Class 08        3        1        3        5        3       54      118 #> Total        2667     1189     1303      742     1313     1199     3178 #>          Class 08 Total #> Class 01        7  3231 #> Class 02        2   782 #> Class 03        4  1374 #> Class 04        2   398 #> Class 05        2  1210 #> Class 06       25   707 #> Class 07      395  4399 #> Class 08      809  1255 #> Total        1411 50000  # Show diagonal (immobility) for first 10 classes cat(\"\\nImmobility rates for first 10 classes:\\n\") #>  #> Immobility rates for first 10 classes: diagonal_values <- diag(basic_data[1:30, 1:30])[1:10] row_totals <- basic_data[1:10, 31] immobility_rates <- round(diagonal_values / row_totals * 100, 1) names(immobility_rates) <- paste(\"Class\", sprintf(\"%02d\", 1:10)) print(immobility_rates) #> Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Class 07 Class 08  #>     73.6     63.9     62.2     66.8     64.9     65.8     63.5     64.5  #> Class 09 Class 10  #>     60.1     60.7"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"creating-different-mobility-scenarios","dir":"Articles","previous_headings":"Working with Synthetic Data","what":"Creating Different Mobility Scenarios","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Create example datasets with different mobility patterns # Using generate_mobility_data() with different parameters  # For demonstration of larger networks, create custom 30x30 examples cat(\"Creating custom 30x30 examples for comparison:\\\\n\") #> Creating custom 30x30 examples for comparison:\\n  # Create 30x30 rigid system examples_30x30 <- list() examples_30x30$rigid <- generate_mobility_data(   n_classes = 30,   n_total = 45000,   immobility_strength = 0.85,  # Very rigid   class_clustering = 0.9,   class_names = paste(\"Class\", sprintf(\"%02d\", 1:30)),   seed = 100 )  # Create 30x30 fluid system examples_30x30$fluid <- generate_mobility_data(   n_classes = 30,   n_total = 45000,   immobility_strength = 0.4,  # Very fluid   class_clustering = 0.6,   class_names = paste(\"Class\", sprintf(\"%02d\", 1:30)),   seed = 200 )  # Examine the rigid class system - show key portions cat(\"Rigid class system (30x30 matrix):\\n\") #> Rigid class system (30x30 matrix): cat(\"Matrix dimensions:\", dim(examples_30x30$rigid), \"\\n\") #> Matrix dimensions: 31 31 cat(\"Total population:\", examples_30x30$rigid[31, 31], \"\\n\\n\") #> Total population: 45000  # Show first 6x6 corner with totals cat(\"First 6x6 corner with marginal totals:\\n\") #> First 6x6 corner with marginal totals: rigid_subset <- examples_30x30$rigid[c(1:6, 31), c(1:6, 31)] print(rigid_subset) #>          Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Total #> Class 01      435      239      122        1        2        0   848 #> Class 02       28       63       39       21        0        1   164 #> Class 03      238      479      926      480      234        1  2448 #> Class 04        4      144      287      543      279      142  1448 #> Class 05        2        3      153      339      632      328  1685 #> Class 06        3        0        5       84      149      292   767 #> Total         768      976     1603     1521     1520     1275 45000  # Show immobility rates for first 8 classes cat(\"\\nImmobility rates (%) for first 8 classes in rigid system:\\n\") #>  #> Immobility rates (%) for first 8 classes in rigid system: rigid_diag <- diag(examples_30x30$rigid[1:30, 1:30])[1:8] rigid_totals <- examples_30x30$rigid[1:8, 31] rigid_rates <- round(rigid_diag / rigid_totals * 100, 1) names(rigid_rates) <- paste(\"Class\", sprintf(\"%02d\", 1:8)) print(rigid_rates) #> Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Class 07 Class 08  #>     51.3     38.4     37.8     37.5     37.5     38.1     36.6     36.5  # Examine the fluid (highly mobile) system cat(\"\\nFluid mobility system (30x30 matrix):\\n\") #>  #> Fluid mobility system (30x30 matrix): cat(\"Matrix dimensions:\", dim(examples_30x30$fluid), \"\\n\") #> Matrix dimensions: 31 31 cat(\"Total population:\", examples_30x30$fluid[31, 31], \"\\n\\n\") #> Total population: 45000  # Show first 6x6 corner with totals cat(\"First 6x6 corner with marginal totals:\\n\") #> First 6x6 corner with marginal totals: fluid_subset <- examples_30x30$fluid[c(1:6, 31), c(1:6, 31)] print(fluid_subset) #>          Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Total #> Class 01      599      508      220        7        8        3  1448 #> Class 02      381      517      381      192        8        1  1597 #> Class 03      209      372      564      394      203        7  1853 #> Class 04        3      230      435      546      455      237  2017 #> Class 05        0        4      141      320      400      281  1404 #> Class 06        3        2        2      125      295      336  1216 #> Total        1285     1710     1821     1662     1632     1424 45000  # Show immobility rates for first 8 classes cat(\"\\nImmobility rates (%) for first 8 classes in fluid system:\\n\") #>  #> Immobility rates (%) for first 8 classes in fluid system: fluid_diag <- diag(examples_30x30$fluid[1:30, 1:30])[1:8] fluid_totals <- examples_30x30$fluid[1:8, 31] fluid_rates <- round(fluid_diag / fluid_totals * 100, 1) names(fluid_rates) <- paste(\"Class\", sprintf(\"%02d\", 1:8)) print(fluid_rates) #> Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Class 07 Class 08  #>     41.4     32.4     30.4     27.1     28.5     27.6     29.0     27.8"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"basic-analysis","dir":"Articles","previous_headings":"Running MONECA Analysis","what":"Basic Analysis","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA object contains: - segment.list: Hierarchical clusters level - mat.list: Aggregated mobility matrices level","code":"# Run MONECA on the basic dataset seg <- moneca(basic_data, segment.levels = 3) #>   |                                                                              |                                                                      |   0%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |====                                                                  |   5%  |                                                                              |=====                                                                 |   7%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |========                                                              |  12%  |                                                                              |==========                                                            |  14%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  17%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  21%  |                                                                              |================                                                      |  22%  |                                                                              |=================                                                     |  24% #> 25% ready! #>   |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  28%  |                                                                              |=====================                                                 |  29%  |                                                                              |======================                                                |  31%  |                                                                              |=======================                                               |  33%  |                                                                              |========================                                              |  34%  |                                                                              |=========================                                             |  36%  |                                                                              |===========================                                           |  38%  |                                                                              |============================                                          |  40%  |                                                                              |=============================                                         |  41%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  45%  |                                                                              |=================================                                     |  47%  |                                                                              |==================================                                    |  48%  |                                                                              |===================================                                   |  50% #> 51% ready! #>   |                                                                              |====================================                                  |  52%  |                                                                              |=====================================                                 |  53%  |                                                                              |=======================================                               |  55%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  60%  |                                                                              |===========================================                           |  62%  |                                                                              |=============================================                         |  64%  |                                                                              |==============================================                        |  66%  |                                                                              |===============================================                       |  67%  |                                                                              |================================================                      |  69%  |                                                                              |=================================================                     |  71%  |                                                                              |===================================================                   |  72%  |                                                                              |====================================================                  |  74% #> 75% ready! #>   |                                                                              |=====================================================                 |  76%  |                                                                              |======================================================                |  78%  |                                                                              |========================================================              |  79%  |                                                                              |=========================================================             |  81%  |                                                                              |==========================================================            |  83%  |                                                                              |===========================================================           |  84%  |                                                                              |============================================================          |  86%  |                                                                              |==============================================================        |  88%  |                                                                              |===============================================================       |  90%  |                                                                              |================================================================      |  91%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  95%  |                                                                              |====================================================================  |  97%  |                                                                              |===================================================================== |  98%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20% #> 27% ready! #>   |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50% #> 55% ready! #>   |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80% #> 82% ready! #>   |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100% #> 100% ready!  # View the results print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    35.4% #> Average Mobility Concentration (all levels):         90.9% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    64.6    76.8    85.3   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    91.0    87.4    85.3   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                30           12            6            1  #> Significant Edges:                     104           12            0            0  #> Network Density:                     0.120        0.091        0.000          NaN  #> Isolated Segments:                       0            0            6            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min    Q1 Median  Mean    Q3   Max #> Level 1 8.77 15.32  20.14 20.55 25.81 39.11 #> Level 2 1.07  2.03   2.57  2.75  3.25  5.56 #> Level 3 0.00  0.00   0.00  0.00  0.00  0.00 #> Level 4 0.00  0.00   0.00  0.00  0.00  0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>          Min   Q1 Median  Mean    Q3   Max #> Level 1 5.36 7.81  10.64 10.27 12.05 15.58 #> Level 2 0.00 0.00   1.14  1.37  2.67  3.31 #> Level 3 0.00 0.00   0.00  0.00  0.00  0.00 #> Level 4 0.00 0.00   0.00  0.00  0.00  0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>          Min   Q1 Median  Mean    Q3   Max #> Level 1 1.87 6.55   9.69 10.27 14.24 26.51 #> Level 2 0.00 0.78   1.12  1.37  1.71  4.39 #> Level 3 0.00 0.00   0.00  0.00  0.00  0.00 #> Level 4 0.00 0.00   0.00  0.00  0.00  0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.61   2.42 2.96 3.76 8.35 #> Level 2 1.04 1.07   1.16 1.37 1.51 2.23 #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"understanding-the-results","dir":"Articles","previous_headings":"Running MONECA Analysis","what":"Understanding the Results","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# View segment membership membership <- segment.membership(seg) cat(\"Segment membership summary:\\n\") #> Segment membership summary: cat(\"Number of levels:\", length(membership), \"\\n\") #> Number of levels: 2 for(i in 1:length(membership)) {   cat(\"Level\", i, \"- Number of segments:\", length(unique(membership[[i]])), \"\\n\") } #> Level 1 - Number of segments: 30  #> Level 2 - Number of segments: 1  # Show first 15 class memberships at each level cat(\"\\nSegment membership for first 15 classes:\\n\") #>  #> Segment membership for first 15 classes: membership_subset <- data.frame(   Class = paste(\"Class\", sprintf(\"%02d\", 1:15)),   Level_1 = membership[[1]][1:15],   Level_2 = membership[[2]][1:15] ) if(length(membership) >= 3) {   membership_subset$Level_3 <- membership[[3]][1:15] } print(membership_subset) #>       Class  Level_1 Level_2 #> 1  Class 01 Class 01     4.1 #> 2  Class 02 Class 02     4.1 #> 3  Class 03 Class 03     4.1 #> 4  Class 04 Class 04     4.1 #> 5  Class 05 Class 05     4.1 #> 6  Class 06 Class 06     4.1 #> 7  Class 07 Class 07     4.1 #> 8  Class 08 Class 08     4.1 #> 9  Class 09 Class 09     4.1 #> 10 Class 10 Class 10     4.1 #> 11 Class 11 Class 11     4.1 #> 12 Class 12 Class 12     4.1 #> 13 Class 13 Class 13     4.1 #> 14 Class 14 Class 14     4.1 #> 15 Class 15 Class 15     4.1  # View the aggregated matrix for level 2 cat(\"\\nLevel 2 aggregated matrix dimensions:\", dim(seg$mat.list[[2]]), \"\\n\") #>  #> Level 2 aggregated matrix dimensions: 13 13 print(\"Level 2 aggregated matrix:\") #> [1] \"Level 2 aggregated matrix:\" print(seg$mat.list[[2]]) #>       1    2    3    4    5    6    7    8    9   10   11   12    31 #> 1  1203   15   12   15   14    6    9  149   82   12    6    7  1530 #> 2    21 1688   22   16   16   15   20   19  177   22    5    7  2028 #> 3    21   10 1516   16   16    6  196   28   25   25   46    6  1911 #> 4    22   32   26 2355   28  240  171   30   39   20   15    4  2982 #> 5    42   45   32   47 3257   23   21   92   53  420   10  129  4171 #> 6    51   37   46  308   47 3343   28   42   37   43   12   19  4013 #> 7    41   49  680  356   36   33 3752   42   39   42   21   15  5106 #> 8   397   62   60   66  225   46   47 5715   78   75   30  442  7243 #> 9   452  523   64   64   58   40   54   52 5303   82   16   19  6727 #> 10   65   71  173   58  424   43   38   70   51 5567  342   26  6928 #> 11   32   30  431   23   22   25   15   21   20  456 2036   12  3123 #> 12   59   48   29   34  629   36   26  609   42   34   14 2678  4238 #> 31 2406 2610 3091 3358 4772 3856 4377 6869 5946 6798 2553 3364 50000"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"modern-visualization-with-ggraph","dir":"Articles","previous_headings":"","what":"Modern Visualization with ggraph","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA now includes modern visualization functions using ggplot2 ggraph, designed accessibility clarity primary concerns.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"visualization-design-principles","dir":"Articles","previous_headings":"Modern Visualization with ggraph","what":"Visualization Design Principles","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA plotting functions follow evidence-based design principles maximum accessibility clarity: Colorblind Accessibility: Uses viridis, plasma, ColorBrewer palettes perceptually uniform distinguishable types color vision High Contrast: Maintains WCAG AA contrast ratios text visual elements Redundant Encoding: Uses color visual properties (size, shape, position) encode information Clear Visual Hierarchy: Guides attention strategic use size, transparency, positioning Minimal Cognitive Load: Reduces visual clutter maintaining analytical depth","code":"# Example of accessibility-focused plotting plot_moneca_ggraph(   seg,   color_palette = \"Set2\",       # Colorblind-safe qualitative palette   node_alpha = 0.85,            # High contrast   edge_alpha = 0.6,             # Balanced visibility   show_segments = TRUE,         # Visual grouping   segment_alpha = 0.2,          # Subtle boundaries   label_size = 3.5              # Readable text )  # For continuous variables, use viridis family plot_moneca_ggraph(   seg,   node_color = \"mobility\",      # Color by mobility rates   color_palette = \"viridis\",    # Colorblind-safe continuous scale   node_alpha = 0.85,   edge_alpha = 0.6 )"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"basic-network-plot-with-colorblind-friendly-design","dir":"Articles","previous_headings":"Modern Visualization with ggraph","what":"Basic Network Plot with Colorblind-Friendly Design","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Create a basic network plot with improved accessibility # Using viridis color palette (colorblind-friendly) and optimized layout # Note: Node colors represent segment membership, sizes show total mobility p1 <- plot_moneca_ggraph(   seg,   title = \"Social Mobility Network: Hierarchical Segmentation\",   layout = \"stress\",  # Better layout for clear network structure   node_color = \"segment\",   node_size = \"total\",   color_palette = \"Set2\",  # Colorblind-friendly palette   node_alpha = 0.85,   edge_alpha = 0.7,   show_segments = TRUE,   segment_alpha = 0.2,   label_size = 3.5 )  print(p1)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"advanced-network-visualization-with-clear-segment-boundaries","dir":"Articles","previous_headings":"Modern Visualization with ggraph","what":"Advanced Network Visualization with Clear Segment Boundaries","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Create an advanced plot emphasizing segment structure for 30-node network # Note: For larger networks, reduce label clutter and focus on structure p2 <- plot_moneca_ggraph(   seg,   layout = \"fr\",  # Force-directed layout for balanced positioning   node_color = \"segment\",   node_size = \"mobility\",  # Size by mobility rate for analytical insight   edge_width = \"weight\",   color_palette = \"Dark2\",  # High-contrast ColorBrewer palette   edge_color = \"grey30\",  # Darker edges for better visibility   theme_style = \"minimal\",   title = \"Advanced MONECA Network Analysis (30 Classes)\",   show_labels = FALSE,  # Turn off labels for 30-node network to reduce clutter   show_segments = TRUE,   segment_alpha = 0.15,   node_alpha = 0.9,   edge_alpha = 0.6 )  print(p2) # Also create a subset visualization focusing on the largest segments cat(\"\\nLargest segments at Level 2:\\n\") #>  #> Largest segments at Level 2: level2_segments <- seg$segment.list[[2]] segment_sizes <- sapply(level2_segments, length) largest_segments <- order(segment_sizes, decreasing = TRUE)[1:3] cat(\"Segment sizes:\", segment_sizes[largest_segments], \"\\n\") #> Segment sizes: 3 3 3"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"ego-network-analysis-focus-on-individual-position-dynamics","dir":"Articles","previous_headings":"Modern Visualization with ggraph","what":"Ego Network Analysis: Focus on Individual Position Dynamics","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Ego networks reveal mobility patterns single focal position, showing incoming outgoing flows:","code":"# Create ego network for class 15 (middle of the range) with enhanced accessibility # Note: Red nodes show focal position and same-segment connections; Flow width indicates volume p3 <- plot_ego_ggraph(   seg,   basic_data,   ego_id = 15,  # Class 15 out of 30 classes   layout = \"stress\",  # Stress layout for cleaner ego networks   title = \"Ego Network Analysis: Class 15 Mobility Patterns (30-Class System)\",   highlight_color = \"#D55E00\",  # Colorblind-safe orange-red   flow_color = \"plasma\",  # Perceptually uniform color scale   node_size_range = c(3, 12),   edge_width_range = c(0.5, 4),   min_weight = 50  # Higher threshold for 30-class system to filter weak connections )  print(p3) # Show ego network statistics cat(\"\\nEgo network statistics for Class 15:\\n\") #>  #> Ego network statistics for Class 15: ego_connections <- which(basic_data[15, 1:30] > 50 | basic_data[1:30, 15] > 50) cat(\"Classes connected to Class 15 (flows > 50):\", length(ego_connections), \"\\n\") #> Classes connected to Class 15 (flows > 50): 5 cat(\"Connected classes:\", paste(ego_connections, collapse = \", \"), \"\\n\") #> Connected classes: 13, 14, 15, 16, 17"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"multi-level-segmentation-hierarchical-structure-visualization","dir":"Articles","previous_headings":"Modern Visualization with ggraph","what":"Multi-Level Segmentation: Hierarchical Structure Visualization","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Create stair plots showing progressive segmentation for 30-class system # Using consistent positioning to track segment evolution across levels stair_plots <- plot_stair_ggraph(   seg,    levels = 2:3,   layout = NULL,  # Use consistent layout.matrix for position stability   segment_naming = \"auto\",   color_palette = \"Set2\",  # Colorblind-friendly qualitative palette   node_size = \"total\",   edge_alpha = 0.6,   node_alpha = 0.85,   segment_alpha = 0.2,   label_size = 2.5  # Smaller labels for 30-node network )  # Display individual plots with improved spacing print(stair_plots$`Level 2`) print(stair_plots$`Level 3`) # Provide numerical summary of segmentation progression cat(\"\\nSegmentation progression summary:\\n\") #>  #> Segmentation progression summary: for(level in 2:3) {   n_segments <- length(seg$segment.list[[level]])   avg_size <- mean(sapply(seg$segment.list[[level]], length))   cat(\"Level\", level, \":\", n_segments, \"segments, average size\", round(avg_size, 1), \"classes\\n\") } #> Level 2 : 10 segments, average size 2.8 classes #> Level 3 : 6 segments, average size 5 classes"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"comparing-different-mobility-regimes","dir":"Articles","previous_headings":"Advanced Analysis Examples","what":"Comparing Different Mobility Regimes","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Analyze the rigid class system (30x30) rigid_seg <- moneca(examples_30x30$rigid, segment.levels = 3) #>   |                                                                              |                                                                      |   0%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   4%  |                                                                              |====                                                                  |   5%  |                                                                              |=====                                                                 |   7%  |                                                                              |======                                                                |   9%  |                                                                              |========                                                              |  11%  |                                                                              |=========                                                             |  12%  |                                                                              |==========                                                            |  14%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  18%  |                                                                              |==============                                                        |  20%  |                                                                              |===============                                                       |  21%  |                                                                              |================                                                      |  23% #> 25% ready! #>   |                                                                              |==================                                                    |  25%  |                                                                              |===================                                                   |  27%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================                                                |  32%  |                                                                              |========================                                              |  34%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  38%  |                                                                              |============================                                          |  39%  |                                                                              |=============================                                         |  41%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  45%  |                                                                              |================================                                      |  46%  |                                                                              |==================================                                    |  48%  |                                                                              |===================================                                   |  50% #> 51% ready! #>   |                                                                              |====================================                                  |  52%  |                                                                              |======================================                                |  54%  |                                                                              |=======================================                               |  55%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  61%  |                                                                              |============================================                          |  62%  |                                                                              |=============================================                         |  64%  |                                                                              |==============================================                        |  66%  |                                                                              |================================================                      |  68%  |                                                                              |=================================================                     |  70%  |                                                                              |==================================================                    |  71%  |                                                                              |===================================================                   |  73%  |                                                                              |====================================================                  |  75% #> 75% ready! #>   |                                                                              |======================================================                |  77%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  80%  |                                                                              |==========================================================            |  82%  |                                                                              |===========================================================           |  84%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |================================================================      |  91%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  95%  |                                                                              |====================================================================  |  96%  |                                                                              |===================================================================== |  98%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |=========                                                             |  12%  |                                                                              |==================                                                    |  25% #> 33% ready! #>   |                                                                              |==========================                                            |  38%  |                                                                              |===================================                                   |  50% #> 56% ready! #>   |                                                                              |============================================                          |  62%  |                                                                              |====================================================                  |  75% #> 78% ready! #>   |                                                                              |=============================================================         |  88%  |                                                                              |======================================================================| 100% #> 100% ready!  # Analyze the fluid mobility system (30x30) fluid_seg <- moneca(examples_30x30$fluid, segment.levels = 3) #>   |                                                                              |                                                                      |   0%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   4%  |                                                                              |====                                                                  |   5%  |                                                                              |=====                                                                 |   7%  |                                                                              |======                                                                |   9%  |                                                                              |========                                                              |  11%  |                                                                              |=========                                                             |  12%  |                                                                              |==========                                                            |  14%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  18%  |                                                                              |==============                                                        |  20%  |                                                                              |===============                                                       |  21%  |                                                                              |================                                                      |  23% #> 25% ready! #>   |                                                                              |==================                                                    |  25%  |                                                                              |===================                                                   |  27%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================                                                |  32%  |                                                                              |========================                                              |  34%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  38%  |                                                                              |============================                                          |  39%  |                                                                              |=============================                                         |  41%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  45%  |                                                                              |================================                                      |  46%  |                                                                              |==================================                                    |  48%  |                                                                              |===================================                                   |  50% #> 51% ready! #>   |                                                                              |====================================                                  |  52%  |                                                                              |======================================                                |  54%  |                                                                              |=======================================                               |  55%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  61%  |                                                                              |============================================                          |  62%  |                                                                              |=============================================                         |  64%  |                                                                              |==============================================                        |  66%  |                                                                              |================================================                      |  68%  |                                                                              |=================================================                     |  70%  |                                                                              |==================================================                    |  71%  |                                                                              |===================================================                   |  73%  |                                                                              |====================================================                  |  75% #> 75% ready! #>   |                                                                              |======================================================                |  77%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  80%  |                                                                              |==========================================================            |  82%  |                                                                              |===========================================================           |  84%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |================================================================      |  91%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  95%  |                                                                              |====================================================================  |  96%  |                                                                              |===================================================================== |  98%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20% #> 27% ready! #>   |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50% #> 55% ready! #>   |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80% #> 82% ready! #>   |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |==============                                                        |  20% #> 33% ready! #>   |                                                                              |============================                                          |  40% #> 50% ready! #>   |                                                                              |==========================================                            |  60%  |                                                                              |========================================================              |  80% #> 83% ready! #>   |                                                                              |======================================================================| 100% #> 100% ready!  # Compare segment memberships - show summary statistics rigid_membership <- segment.membership(rigid_seg) fluid_membership <- segment.membership(fluid_seg)  cat(\"Rigid system segmentation summary:\\n\") #> Rigid system segmentation summary: for(i in 1:length(rigid_membership)) {   n_segments <- length(unique(rigid_membership[[i]]))   segment_sizes <- table(rigid_membership[[i]])   avg_size <- mean(segment_sizes)   max_size <- max(segment_sizes)   cat(\"Level\", i, \":\", n_segments, \"segments, avg size\", round(avg_size, 1),        \", largest segment\", max_size, \"classes\\n\") } #> Level 1 : 30 segments, avg size 1 , largest segment 1 classes #> Level 2 : 1 segments, avg size 30 , largest segment 30 classes  cat(\"\\nFluid system segmentation summary:\\n\") #>  #> Fluid system segmentation summary: for(i in 1:length(fluid_membership)) {   n_segments <- length(unique(fluid_membership[[i]]))   segment_sizes <- table(fluid_membership[[i]])   avg_size <- mean(segment_sizes)   max_size <- max(segment_sizes)   cat(\"Level\", i, \":\", n_segments, \"segments, avg size\", round(avg_size, 1),        \", largest segment\", max_size, \"classes\\n\") } #> Level 1 : 30 segments, avg size 1 , largest segment 1 classes #> Level 2 : 4 segments, avg size 7.5 , largest segment 10 classes  # Show first 12 class memberships for comparison cat(\"\\nSegment membership comparison for first 12 classes:\\n\") #>  #> Segment membership comparison for first 12 classes: comparison_df <- data.frame(   Class = paste(\"Class\", sprintf(\"%02d\", 1:12)),   Rigid_L2 = rigid_membership[[2]][1:12],   Fluid_L2 = fluid_membership[[2]][1:12] ) if(length(rigid_membership) >= 3 && length(fluid_membership) >= 3) {   comparison_df$Rigid_L3 <- rigid_membership[[3]][1:12]   comparison_df$Fluid_L3 <- fluid_membership[[3]][1:12] } print(comparison_df) #>       Class Rigid_L2 Fluid_L2 #> 1  Class 01      4.1      4.1 #> 2  Class 02      4.1      4.1 #> 3  Class 03      4.1      4.1 #> 4  Class 04      4.1      4.1 #> 5  Class 05      4.1      4.1 #> 6  Class 06      4.1      4.1 #> 7  Class 07      4.1      4.1 #> 8  Class 08      4.1      4.2 #> 9  Class 09      4.1      4.2 #> 10 Class 10      4.1      4.2 #> 11 Class 11      4.1      4.2 #> 12 Class 12      4.1      4.2"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"comparing-mobility-regimes-accessibility-focused-visualizations","dir":"Articles","previous_headings":"Advanced Analysis Examples","what":"Comparing Mobility Regimes: Accessibility-Focused Visualizations","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Compare rigid vs fluid systems for 30-class networks # Using colorblind-safe palettes and clear differentiation  # Plot rigid system - emphasis on strong boundaries # Note: High immobility rates create distinct, well-separated segments p_rigid <- plot_moneca_ggraph(   rigid_seg,   title = \"Rigid Class System: Strong Internal Cohesion (30 Classes)\",   layout = \"stress\",   node_color = \"segment\",   node_size = \"total\",   color_palette = \"Oranges\",  # Sequential palette for rigid structure   edge_color = \"grey20\",   show_segments = TRUE,   segment_alpha = 0.25,   node_alpha = 0.9,   edge_alpha = 0.5,   show_labels = FALSE  # No labels for 30-node network )  # Plot fluid system - emphasis on connectivity # Note: Strong cross-segment mobility creates overlapping, less distinct boundaries p_fluid <- plot_moneca_ggraph(   fluid_seg,   title = \"Fluid Mobility System: High Inter-Segment Flow (30 Classes)\",   layout = \"stress\",   node_color = \"segment\",   node_size = \"mobility\",  # Size by mobility rate to show fluidity   color_palette = \"Purples\",  # Different sequential palette for contrast   edge_color = \"grey30\",   show_segments = TRUE,   segment_alpha = 0.15,  # Lower alpha for fluid boundaries   node_alpha = 0.85,   edge_alpha = 0.7,  # Higher edge alpha to show connectivity   show_labels = FALSE  # No labels for 30-node network )  print(p_rigid) print(p_fluid) # Add network density comparison cat(\"\\nNetwork characteristics comparison:\\n\") #>  #> Network characteristics comparison: cat(\"Rigid system - segments at Level 2:\", length(rigid_seg$segment.list[[2]]), \"\\n\") #> Rigid system - segments at Level 2: 10 cat(\"Fluid system - segments at Level 2:\", length(fluid_seg$segment.list[[2]]), \"\\n\") #> Fluid system - segments at Level 2: 10  # Calculate edge densities rigid_edges <- sum(!is.na(segment.edges(rigid_seg, level = 1)) & segment.edges(rigid_seg, level = 1) > 1) fluid_edges <- sum(!is.na(segment.edges(fluid_seg, level = 1)) & segment.edges(fluid_seg, level = 1) > 1) max_edges <- 30 * 29  # Directed graph  cat(\"Rigid system edge density:\", round(rigid_edges / max_edges * 100, 1), \"%\\n\") #> Rigid system edge density: 13.1 % cat(\"Fluid system edge density:\", round(fluid_edges / max_edges * 100, 1), \"%\\n\") #> Fluid system edge density: 13.1 %"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"dendrogram-visualization-for-hierarchical-structure","dir":"Articles","previous_headings":"Advanced Analysis Examples > Advanced Visualization Techniques","what":"Dendrogram Visualization for Hierarchical Structure","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Create a dendrogram showing the hierarchical clustering structure # This provides a clear view of how categories are progressively aggregated dendro_plot <- plot_moneca_dendrogram(   seg,   height_method = \"uniform\",          # Equal spacing between levels   color_segments = TRUE,              # Color branches by final segments   show_labels = TRUE,                 # Show category names   label_size = 3.5,   branch_width = 1.2,   title = \"MONECA Hierarchical Structure\",   subtitle = \"Shows progressive aggregation from individual categories to segments\",   color_palette = \"Set2\",             # Colorblind-friendly palette   theme_style = \"minimal\" )  print(dendro_plot)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"quality-assessment-visualization","dir":"Articles","previous_headings":"Advanced Analysis Examples > Advanced Visualization Techniques","what":"Quality Assessment Visualization","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Comprehensive segment quality analysis quality_overview <- plot_segment_quality(   seg,   plot_type = \"overview\",   level = 2,   color_palette = \"Set3\",   theme_style = \"minimal\",   show_labels = TRUE,   label_size = 3 ) print(quality_overview) #> TableGrob (3 x 2) \"arrange\": 5 grobs #>   z     cells    name                grob #> 1 1 (2-2,1-1) arrange      gtable[layout] #> 2 2 (2-2,2-2) arrange      gtable[layout] #> 3 3 (3-3,1-1) arrange      gtable[layout] #> 4 4 (3-3,2-2) arrange      gtable[layout] #> 5 5 (1-1,1-2) arrange text[GRID.text.397]  # Cohesion vs Size Analysis cohesion_plot <- plot_segment_quality(   seg,   plot_type = \"cohesion\",   level = 2,   title = \"Segment Quality Analysis: Cohesion vs Size\",   color_palette = \"Dark2\",   show_labels = TRUE,   label_size = 3.5 )  print(cohesion_plot)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"custom-segment-naming-for-enhanced-interpretation","dir":"Articles","previous_headings":"Advanced Analysis Examples","what":"Custom Segment Naming for Enhanced Interpretation","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA includes enhanced segment naming functionality allows provide meaningful, domain-specific labels mobility categories. feature dramatically improves interpretability visualizations replacing generic class names substantive descriptions.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"basic-naming-strategies","dir":"Articles","previous_headings":"Advanced Analysis Examples > Custom Segment Naming for Enhanced Interpretation","what":"Basic Naming Strategies","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"segment_naming parameter accepts several types input:","code":"# Generate example data with meaningful class names occupational_data <- generate_mobility_data(   n_classes = 8,   class_names = c(\"Executive\", \"Professional\", \"Manager\", \"Technical\",                    \"Skilled Worker\", \"Service Worker\", \"Clerical\", \"Manual Worker\"),   n_total = 8000,   seed = 100 )  # Run MONECA analysis occ_seg <- moneca(occupational_data, segment.levels = 3) #>   |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20% #> 27% ready! #>   |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50% #> 55% ready! #>   |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80% #> 82% ready! #>   |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0% #> 100% ready!  # Example 1: Auto strategy (default) - uses intelligent pattern recognition auto_plot <- plot_moneca_ggraph(   occ_seg,   segment_naming = \"auto\",   title = \"Auto Naming Strategy: Pattern Recognition\",   node_color = \"segment\",   show_segments = TRUE,   color_palette = \"Set2\" )  print(auto_plot) # Example 2: Concatenation strategy - joins names with separator concat_plot <- plot_moneca_ggraph(   occ_seg,   segment_naming = \"concat\",   title = \"Concatenation Strategy: Joined Names\",   node_color = \"segment\",   show_segments = TRUE,   color_palette = \"Dark2\" )  print(concat_plot)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"advanced-custom-naming-with-data-frames","dir":"Articles","previous_headings":"Advanced Analysis Examples > Custom Segment Naming for Enhanced Interpretation","what":"Advanced Custom Naming with Data Frames","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"powerful feature ability provide custom labels using data.frame:","code":"# Create custom segment labels that provide analytical insight custom_labels <- data.frame(   name = c(\"Executive\", \"Professional\", \"Manager\", \"Technical\",             \"Skilled Worker\", \"Service Worker\", \"Clerical\", \"Manual Worker\"),   segment_label = c(     \"Senior Leadership\",      # Executive     \"Knowledge Workers\",      # Professional       \"Middle Management\",      # Manager     \"Technical Specialists\",  # Technical     \"Craft Workers\",         # Skilled Worker     \"Service Industry\",      # Service Worker     \"Administrative Staff\",  # Clerical     \"Production Workers\"     # Manual Worker   ),   stringsAsFactors = FALSE )  print(\"Custom segment labels mapping:\") #> [1] \"Custom segment labels mapping:\" print(custom_labels) #>             name         segment_label #> 1      Executive     Senior Leadership #> 2   Professional     Knowledge Workers #> 3        Manager     Middle Management #> 4      Technical Technical Specialists #> 5 Skilled Worker         Craft Workers #> 6 Service Worker      Service Industry #> 7       Clerical  Administrative Staff #> 8  Manual Worker    Production Workers  # Use custom labels in main network plot custom_plot <- plot_moneca_ggraph(   occ_seg,   segment_naming = custom_labels,   title = \"Custom Segment Naming: Occupational Class Structure\",   node_color = \"segment\",   node_size = \"total\",   show_segments = TRUE,   segment_alpha = 0.2,   color_palette = \"Set3\",   show_labels = TRUE,   label_size = 3.5 )  print(custom_plot) # Show how this works across different plot types # Ego network with custom naming ego_custom <- plot_ego_ggraph(   occ_seg,   occupational_data,   ego_id = 4,  # Technical worker   segment_naming = custom_labels,   title = \"Technical Specialists: Mobility Patterns\",   highlight_color = \"#E31A1C\",   flow_color = \"viridis\",   min_weight = 20 )  print(ego_custom)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"partial-custom-naming","dir":"Articles","previous_headings":"Advanced Analysis Examples > Custom Segment Naming for Enhanced Interpretation","what":"Partial Custom Naming","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"can provide custom names categories, others using default strategies:","code":"# Partial custom naming - focus on key categories key_positions <- data.frame(   name = c(\"Executive\", \"Professional\", \"Manual Worker\"),   segment_label = c(\"Corporate Elite\", \"Professional Class\", \"Working Class\"),   stringsAsFactors = FALSE )  partial_plot <- plot_moneca_ggraph(   occ_seg,   segment_naming = key_positions,   title = \"Partial Custom Naming: Highlighting Key Social Classes\",   node_color = \"segment\",   node_size = \"mobility\",   color_palette = \"Spectral\",   show_segments = TRUE,   segment_alpha = 0.15 )  print(partial_plot) cat(\"\\\\nPartial custom naming allows focus on analytically important categories\\\\n\") #> \\nPartial custom naming allows focus on analytically important categories\\n cat(\"while maintaining readability for other positions.\\\\n\") #> while maintaining readability for other positions.\\n"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"multi-level-analysis-with-custom-naming","dir":"Articles","previous_headings":"Advanced Analysis Examples > Custom Segment Naming for Enhanced Interpretation","what":"Multi-Level Analysis with Custom Naming","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Custom naming works seamlessly across hierarchical levels:","code":"# Multi-level visualization with consistent custom naming multilevel_plots <- plot_stair_ggraph(   occ_seg,   levels = c(2, 3),   segment_naming = custom_labels,   color_palette = \"Set2\",   node_size = \"total\",   show_segments = TRUE,   segment_alpha = 0.2,   label_size = 3 )  print(multilevel_plots$`Level 2`) print(multilevel_plots$`Level 3`) # Show progression of segmentation with meaningful names cat(\"\\\\nMulti-level segmentation progression with custom names:\\\\n\") #> \\nMulti-level segmentation progression with custom names:\\n for(level in 2:3) {   n_segments <- length(occ_seg$segment.list[[level]])   avg_size <- mean(sapply(occ_seg$segment.list[[level]], length))   cat(\"Level\", level, \":\", n_segments, \"occupational segments,\",        \"average\", round(avg_size, 1), \"classes per segment\\\\n\") } #> Level 2 : 3 occupational segments, average 2.7 classes per segment\\nLevel 3 : 1 occupational segments, average 5 classes per segment\\n"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"practical-applications","dir":"Articles","previous_headings":"Advanced Analysis Examples > Custom Segment Naming for Enhanced Interpretation","what":"Practical Applications","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Custom segment naming particularly valuable : Occupational Mobility: Use job titles occupational categories Educational Analysis: Replace generic levels degree types Geographic Studies: Use meaningful place names instead codes Industry Analysis: Employ sector names industry classifications International Comparisons: Apply country-specific terminology","code":"# Example applications for different research contexts  # Educational mobility education_labels <- data.frame(   name = c(\"Level1\", \"Level2\", \"Level3\", \"Level4\"),   segment_label = c(\"No Degree\", \"High School\", \"Bachelor's\", \"Graduate\"),   stringsAsFactors = FALSE )  # Geographic mobility   geographic_labels <- data.frame(   name = c(\"Region_A\", \"Region_B\", \"Region_C\"),   segment_label = c(\"Metropolitan\", \"Suburban\", \"Rural\"),   stringsAsFactors = FALSE )  # Industry sectors industry_labels <- data.frame(   name = c(\"Sector1\", \"Sector2\", \"Sector3\", \"Sector4\"),   segment_label = c(\"Manufacturing\", \"Services\", \"Technology\", \"Healthcare\"),   stringsAsFactors = FALSE )  # Use in analysis plot_moneca_ggraph(seg, segment_naming = education_labels,                    title = \"Educational Mobility Networks\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"interpretation-guidelines-for-visualizations","dir":"Articles","previous_headings":"Advanced Analysis Examples","what":"Interpretation Guidelines for Visualizations","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"interpreting MONECA network visualizations, consider key elements:","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"network-layout-interpretation","dir":"Articles","previous_headings":"Advanced Analysis Examples > Interpretation Guidelines for Visualizations","what":"Network Layout Interpretation","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Node Position: Reflects mathematical similarity mobility patterns Edge Thickness: Proportional relative risk mobility positions Cluster Proximity: Positions similar mobility profiles appear closer together Segment Boundaries: Convex hulls show positions high internal mobility","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"color-and-size-encoding","dir":"Articles","previous_headings":"Advanced Analysis Examples > Interpretation Guidelines for Visualizations","what":"Color and Size Encoding","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Node Colors: Represent segment membership specified hierarchical level Node Sizes: Can represent total mobility volume, mobility rates, custom metrics Edge Colors: Often represent flow direction connection strength Transparency: Used manage visual complexity preserving information","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"custom-naming-benefits","dir":"Articles","previous_headings":"Advanced Analysis Examples > Interpretation Guidelines for Visualizations","what":"Custom Naming Benefits","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Enhanced Readability: Meaningful labels improve immediate comprehension Domain Relevance: Context-specific terminology aids interpretation Professional Presentation: Polished visualizations publications reports Analytical Focus: Highlight theoretically important distinctions","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"accessibility-features","dir":"Articles","previous_headings":"Advanced Analysis Examples > Interpretation Guidelines for Visualizations","what":"Accessibility Features","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"plots include several accessibility enhancements:","code":"# Example showing all accessibility features accessible_plot <- plot_moneca_ggraph(   seg,   # Colorblind-safe palettes   color_palette = \"Set2\",           # For categorical: \"Set2\", \"Dark2\", \"Paired\"                                     # For continuous: \"viridis\", \"plasma\", \"inferno\"      # High contrast settings   node_alpha = 0.85,               # Strong node visibility   edge_alpha = 0.6,                # Balanced edge visibility   edge_color = \"grey30\",           # Dark edges for contrast      # Redundant encoding (color + size + position)   node_color = \"segment\",          # Color by segment   node_size = \"total\",             # Size by mobility volume      # Clear labeling   show_labels = TRUE,              # Display node names   label_size = 3.5,                # Readable text size   show_segments = TRUE,            # Segment boundaries      # Informative titles   title = \"Descriptive Title\"      # Clear context )"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"segment-quality-assessment","dir":"Articles","previous_headings":"Analytical Functions","what":"Segment Quality Assessment","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Assess the quality of segmentation for 30-class system level2_matrix <- seg$mat.list[[2]] cat(\"Level 2 aggregated matrix dimensions:\", dim(level2_matrix), \"\\n\") #> Level 2 aggregated matrix dimensions: 13 13 print(\"Level 2 mobility matrix (aggregated):\") #> [1] \"Level 2 mobility matrix (aggregated):\" print(level2_matrix) #>       1    2    3    4    5    6    7    8    9   10   11   12    31 #> 1  1203   15   12   15   14    6    9  149   82   12    6    7  1530 #> 2    21 1688   22   16   16   15   20   19  177   22    5    7  2028 #> 3    21   10 1516   16   16    6  196   28   25   25   46    6  1911 #> 4    22   32   26 2355   28  240  171   30   39   20   15    4  2982 #> 5    42   45   32   47 3257   23   21   92   53  420   10  129  4171 #> 6    51   37   46  308   47 3343   28   42   37   43   12   19  4013 #> 7    41   49  680  356   36   33 3752   42   39   42   21   15  5106 #> 8   397   62   60   66  225   46   47 5715   78   75   30  442  7243 #> 9   452  523   64   64   58   40   54   52 5303   82   16   19  6727 #> 10   65   71  173   58  424   43   38   70   51 5567  342   26  6928 #> 11   32   30  431   23   22   25   15   21   20  456 2036   12  3123 #> 12   59   48   29   34  629   36   26  609   42   34   14 2678  4238 #> 31 2406 2610 3091 3358 4772 3856 4377 6869 5946 6798 2553 3364 50000  # Calculate internal mobility rates for each segment # Use actual number of segments from segment.list instead of matrix dimensions actual_n_segments <- length(seg$segment.list[[2]]) n_segments <- nrow(level2_matrix) - 1  # Ensure we use the correct number of segments (the smaller of the two) active_segments <- min(actual_n_segments, n_segments)  internal_mobility <- diag(level2_matrix[1:active_segments, 1:active_segments]) total_mobility <- level2_matrix[1:active_segments, ncol(level2_matrix)] immobility_rates <- internal_mobility / total_mobility  cat(\"\\nImmobility rates by segment at Level 2:\\n\") #>  #> Immobility rates by segment at Level 2: segment_summary <- data.frame(   Segment = paste(\"Segment\", 1:active_segments),   Size = sapply(seg$segment.list[[2]], length)[1:active_segments],   Total_Population = total_mobility,   Internal_Mobility = internal_mobility,   Immobility_Rate = round(immobility_rates * 100, 1) ) print(segment_summary) #>       Segment Size Total_Population Internal_Mobility Immobility_Rate #> 1   Segment 1    3             1530              1203            78.6 #> 2   Segment 2    3             2028              1688            83.2 #> 3   Segment 3    3             1911              1516            79.3 #> 4   Segment 4    3             2982              2355            79.0 #> 5   Segment 5    3             4171              3257            78.1 #> 6   Segment 6    2             4013              3343            83.3 #> 7   Segment 7    2             5106              3752            73.5 #> 8   Segment 8    3             7243              5715            78.9 #> 9   Segment 9    3             6727              5303            78.8 #> 10 Segment 10    3             6928              5567            80.4  # Calculate overall segmentation quality metrics overall_internal <- sum(internal_mobility) overall_total <- sum(level2_matrix[1:active_segments, 1:active_segments]) overall_immobility_rate <- overall_internal / overall_total  cat(\"\\nOverall Level 2 segmentation quality:\\n\") #>  #> Overall Level 2 segmentation quality: cat(\"Total segments:\", active_segments, \"\\n\") #> Total segments: 10 cat(\"Average segment size:\", round(mean(segment_summary$Size), 1), \"classes\\n\") #> Average segment size: 2.8 classes cat(\"Overall internal mobility rate:\", round(overall_immobility_rate * 100, 1), \"%\\n\") #> Overall internal mobility rate: 81.3 %  # Compare to Level 1 (original classes) level1_internal <- sum(diag(basic_data[1:30, 1:30])) level1_total <- sum(basic_data[1:30, 1:30]) level1_rate <- level1_internal / level1_total  cat(\"Level 1 internal mobility rate:\", round(level1_rate * 100, 1), \"%\\n\") #> Level 1 internal mobility rate: 64.6 % cat(\"Improvement in clustering:\", round((overall_immobility_rate - level1_rate) * 100, 1), \"percentage points\\n\") #> Improvement in clustering: 16.7 percentage points"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"edge-analysis","dir":"Articles","previous_headings":"Analytical Functions","what":"Edge Analysis","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Examine edge weights between classes (Level 1) for 30-class system edges <- segment.edges(seg, level = 1) cat(\"Edge weights matrix dimensions:\", dim(edges), \"\\n\") #> Edge weights matrix dimensions: 30 30 cat(\"Number of significant edges (RR > 1):\", sum(!is.na(edges) & edges > 1), \"\\n\") #> Number of significant edges (RR > 1): 104  # Show subset of edge weights matrix (first 10x10) cat(\"\\nEdge weights matrix (first 10x10 subset):\\n\") #>  #> Edge weights matrix (first 10x10 subset): edges_subset <- edges[1:10, 1:10] print(round(edges_subset, 2)) #>          Class 01 Class 02 Class 03 Class 04 Class 05 Class 06 Class 07 #> Class 01     0.00     5.05     1.85     0.00     0.00     0.00     0.00 #> Class 02     1.87     0.00     3.83     3.53     0.00     0.00     0.00 #> Class 03     0.00     4.28     0.00     6.92     1.58     0.00     0.00 #> Class 04     0.00     2.11     2.51     0.00     3.73     1.68     0.00 #> Class 05     0.00     0.00     2.06     6.74     0.00     3.27     0.00 #> Class 06     0.00     0.00     0.00     2.10     3.88     0.00     1.34 #> Class 07     0.00     0.00     0.00     0.00     2.07     4.11     0.00 #> Class 08     0.00     0.00     0.00     0.00     0.00     1.79     1.48 #> Class 09     0.00     0.00     0.00     0.00     0.00     0.00     0.00 #> Class 10     0.00     0.00     0.00     0.00     0.00     0.00     0.00 #>          Class 08 Class 09 Class 10 #> Class 01     0.00     0.00     0.00 #> Class 02     0.00     0.00     0.00 #> Class 03     0.00     0.00     0.00 #> Class 04     0.00     0.00     0.00 #> Class 05     0.00     0.00     0.00 #> Class 06     1.25     0.00     0.00 #> Class 07     3.18     3.00     0.00 #> Class 08     0.00     5.23     2.96 #> Class 09     3.55     0.00     7.36 #> Class 10     2.44     6.76     0.00  # Focus on strongest connections strong_edges <- edges strong_edges[strong_edges < 2] <- NA strong_connections <- sum(!is.na(strong_edges)) cat(\"\\nNumber of strong connections (relative risk > 2):\", strong_connections, \"\\n\") #>  #> Number of strong connections (relative risk > 2): 66  # Show distribution of edge weights all_edges <- as.vector(edges) valid_edges <- all_edges[!is.na(all_edges) & all_edges > 1] cat(\"\\nEdge weight distribution (RR > 1):\\n\") #>  #> Edge weight distribution (RR > 1): cat(\"Min:\", round(min(valid_edges), 2), \"\\n\") #> Min: 1.02 cat(\"Median:\", round(median(valid_edges), 2), \"\\n\") #> Median: 2.42 cat(\"Mean:\", round(mean(valid_edges), 2), \"\\n\") #> Mean: 2.96 cat(\"Max:\", round(max(valid_edges), 2), \"\\n\") #> Max: 8.35 cat(\"95th percentile:\", round(quantile(valid_edges, 0.95), 2), \"\\n\") #> 95th percentile: 6.75  # Show strongest connections in the network if(length(valid_edges) > 0) {   threshold_95 <- quantile(valid_edges, 0.95)   strongest_indices <- which(edges > threshold_95, arr.ind = TRUE)   if(nrow(strongest_indices) > 0) {     cat(\"\\nStrongest connections (top 5% of edge weights):\\n\")     for(i in 1:min(10, nrow(strongest_indices))) {       row <- strongest_indices[i, 1]       col <- strongest_indices[i, 2]       weight <- edges[row, col]       cat(\"Class\", sprintf(\"%02d\", row), \"-> Class\", sprintf(\"%02d\", col),            \": RR =\", round(weight, 2), \"\\n\")     }   } } #>  #> Strongest connections (top 5% of edge weights): #> Class 03 -> Class 04 : RR = 6.92  #> Class 10 -> Class 09 : RR = 6.76  #> Class 09 -> Class 10 : RR = 7.36  #> Class 22 -> Class 23 : RR = 8.35  #> Class 24 -> Class 23 : RR = 8.29  #> Class 29 -> Class 30 : RR = 7.48"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"working-with-real-data","dir":"Articles","previous_headings":"","what":"Working with Real Data","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"working mobility data, ensure follows MONECA format:","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"data-format-requirements","dir":"Articles","previous_headings":"Working with Real Data","what":"Data Format Requirements","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Your data should be a matrix with: # - Rows: origin positions # - Columns: destination positions   # - Last row: column totals # - Last column: row totals # - Bottom-right cell: grand total  # Example of properly formatted data structure (showing 5x5 for clarity): example_structure <- matrix(c(   180, 25, 15, 8, 2, 230,    # Origin 1: mostly immobile with some movement   20, 190, 30, 12, 3, 255,   # Origin 2: similar pattern   12, 28, 175, 25, 10, 250,  # Origin 3: high diagonal mobility   6, 15, 20, 160, 19, 220,   # Origin 4: concentrated mobility   3, 8, 12, 22, 145, 190,    # Origin 5: strong immobility   221, 266, 252, 227, 179, 1145  # Column totals and grand total ), nrow = 6, ncol = 6)  rownames(example_structure) <- c(\"Class_A\", \"Class_B\", \"Class_C\", \"Class_D\", \"Class_E\", \"Total\") colnames(example_structure) <- c(\"Class_A\", \"Class_B\", \"Class_C\", \"Class_D\", \"Class_E\", \"Total\")  print(\"Properly formatted mobility matrix (5x5 example):\") #> [1] \"Properly formatted mobility matrix (5x5 example):\" print(example_structure) #>         Class_A Class_B Class_C Class_D Class_E Total #> Class_A     180      20      12       6       3   221 #> Class_B      25     190      28      15       8   266 #> Class_C      15      30     175      20      12   252 #> Class_D       8      12      25     160      22   227 #> Class_E       2       3      10      19     145   179 #> Total       230     255     250     220     190  1145  cat(\"\\nKey features of mobility matrix format:\\n\") #>  #> Key features of mobility matrix format: cat(\"- Matrix size: (n+1) x (n+1) where n is number of classes\\n\") #> - Matrix size: (n+1) x (n+1) where n is number of classes cat(\"- Diagonal: immobility (people staying in same class)\\n\") #> - Diagonal: immobility (people staying in same class) cat(\"- Off-diagonal: mobility between classes\\n\") #> - Off-diagonal: mobility between classes cat(\"- Row totals: total outflow from each origin class\\n\") #> - Row totals: total outflow from each origin class cat(\"- Column totals: total inflow to each destination class\\n\") #> - Column totals: total inflow to each destination class cat(\"- Grand total: total population in the mobility table\\n\") #> - Grand total: total population in the mobility table"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"data-validation","dir":"Articles","previous_headings":"Working with Real Data","what":"Data Validation","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"","code":"# Check if your data is properly formatted validate_mobility_matrix <- function(mat) {   n <- nrow(mat) - 1      # Check row totals   calculated_row_totals <- rowSums(mat[1:n, 1:n])   actual_row_totals <- mat[1:n, n + 1]      # Check column totals     calculated_col_totals <- colSums(mat[1:n, 1:n])   actual_col_totals <- mat[n + 1, 1:n]      # Check grand total   calculated_grand_total <- sum(mat[1:n, 1:n])   actual_grand_total <- mat[n + 1, n + 1]      # Additional validation checks for larger matrices   validation_results <- list(     matrix_size = paste(dim(mat), collapse = \" x \"),     n_classes = n,     row_totals_match = all.equal(calculated_row_totals, actual_row_totals),     col_totals_match = all.equal(calculated_col_totals, actual_col_totals),     grand_total_matches = all.equal(calculated_grand_total, actual_grand_total),     has_negative_values = any(mat < 0),     total_population = actual_grand_total,     sparsity = round(sum(mat[1:n, 1:n] == 0) / (n^2) * 100, 1)   )      return(validation_results) }  # Validate our 5x5 example cat(\"Validation of 5x5 example matrix:\\n\") #> Validation of 5x5 example matrix: validation_small <- validate_mobility_matrix(example_structure) print(validation_small) #> $matrix_size #> [1] \"6 x 6\" #>  #> $n_classes #> [1] 5 #>  #> $row_totals_match #> [1] TRUE #>  #> $col_totals_match #> [1] TRUE #>  #> $grand_total_matches #> [1] TRUE #>  #> $has_negative_values #> [1] FALSE #>  #> $total_population #> [1] 1145 #>  #> $sparsity #> [1] 0  # Validate our large 30x30 synthetic data cat(\"\\nValidation of 30x30 synthetic mobility matrix:\\n\") #>  #> Validation of 30x30 synthetic mobility matrix: validation_large <- validate_mobility_matrix(basic_data) print(validation_large) #> $matrix_size #> [1] \"31 x 31\" #>  #> $n_classes #> [1] 30 #>  #> $row_totals_match #> [1] TRUE #>  #> $col_totals_match #> [1] TRUE #>  #> $grand_total_matches #> [1] TRUE #>  #> $has_negative_values #> [1] FALSE #>  #> $total_population #> [1] 50000 #>  #> $sparsity #> [1] 7.9  # Show validation function usage for user data cat(\"\\nTo validate your own data:\\n\") #>  #> To validate your own data: cat(\"validation_results <- validate_mobility_matrix(your_matrix)\\n\") #> validation_results <- validate_mobility_matrix(your_matrix) cat(\"print(validation_results)\\n\") #> print(validation_results)"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"choosing-parameters","dir":"Articles","previous_headings":"Best Practices and Tips","what":"Choosing Parameters","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Number levels: Start 3-4 levels, adjust based data size Cut-values: Default (1.0) works well relative risk; adjust sensitivity Small cell reduction: Use handle sparse data large matrices","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"color-palette-selection","dir":"Articles","previous_headings":"Best Practices and Tips > Visualization Best Practices","what":"Color Palette Selection","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Choose palettes based data type accessibility needs:","code":"# For categorical data (segments) plot_moneca_ggraph(seg, color_palette = \"Set2\")    # Colorblind-safe qualitative plot_moneca_ggraph(seg, color_palette = \"Dark2\")   # High contrast qualitative  # For continuous data (mobility rates) plot_moneca_ggraph(seg, node_color = \"mobility\", color_palette = \"viridis\")  # Perceptually uniform plot_moneca_ggraph(seg, node_color = \"mobility\", color_palette = \"plasma\")   # Alternative continuous  # For comparing different systems plot_moneca_ggraph(rigid_seg, color_palette = \"Oranges\")   # Sequential for one system plot_moneca_ggraph(fluid_seg, color_palette = \"Purples\")   # Different sequential for comparison"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"layout-algorithm-selection","dir":"Articles","previous_headings":"Best Practices and Tips > Visualization Best Practices","what":"Layout Algorithm Selection","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Different layouts work better different network characteristics:","code":"# Force-directed layouts plot_moneca_ggraph(seg, layout = \"fr\")      # Fruchterman-Reingold (balanced) plot_moneca_ggraph(seg, layout = \"kk\")      # Kamada-Kawai (minimize edge crossings)  # Optimization-based layouts plot_moneca_ggraph(seg, layout = \"stress\")  # Stress majorization (clean, clear) plot_moneca_ggraph(seg, layout = \"mds\")     # Multidimensional scaling  # For consistent comparisons consistent_layout <- layout.matrix(seg)     # MONECA's specialized layout plot_moneca_ggraph(seg, layout = consistent_layout)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"node-and-edge-styling","dir":"Articles","previous_headings":"Best Practices and Tips > Visualization Best Practices","what":"Node and Edge Styling","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Optimize visual elements clarity accessibility:","code":"# High contrast for presentations plot_moneca_ggraph(seg,   node_alpha = 0.9,        # Strong nodes   edge_alpha = 0.4,        # Subtle edges   edge_color = \"grey20\",   # Dark edges   label_size = 4           # Large labels )  # Detailed analysis version plot_moneca_ggraph(seg,   node_size = \"mobility\",  # Size by analytical variable   edge_width = \"weight\",   # Width by connection strength   show_segments = TRUE,    # Show cluster boundaries   segment_alpha = 0.15     # Subtle boundaries )"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"interpretation-guidelines","dir":"Articles","previous_headings":"Best Practices and Tips","what":"Interpretation Guidelines","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Segments represent groups high internal mobility Hierarchical structure shows nested clustering different scales Edge weights indicate relative risk compared independence Layout algorithms can emphasize different network properties","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"fast-implementation-with-moneca_fast","dir":"Articles","previous_headings":"Advanced Features","what":"Fast Implementation with moneca_fast()","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"large datasets computational speed important, moneca provides fast implementation produces identical results standard algorithm: moneca_fast() function uses optimized algorithms maintaining full compatibility visualization analysis functions.","code":"# Standard implementation seg_standard <- moneca(basic_data, segment.levels = 3)  # Fast implementation (identical results) seg_fast <- moneca_fast(basic_data, segment.levels = 3)  # Both produce the same clustering identical(seg_standard$segment.list, seg_fast$segment.list)"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"auto-tuning-automatic-parameter-optimization","dir":"Articles","previous_headings":"Advanced Features","what":"Auto-Tuning: Automatic Parameter Optimization","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"package includes auto-tuning capabilities automatically optimize small.cell.reduction parameter: applications, default auto-tuning settings work well. Advanced users can explore different tuning methods auto_tune_small_cell_reduction() function.","code":"# Auto-tune using stability method (recommended) seg_tuned <- moneca(   basic_data,   segment.levels = 3,   auto_tune = TRUE )  # View the selected parameter auto_result <- attr(seg_tuned, \"auto_tune_result\") cat(\"Optimal parameter:\", auto_result$best_parameter, \"\\n\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"performance-considerations","dir":"Articles","previous_headings":"Advanced Features","what":"Performance Considerations","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Large matrices (>50x50) may require increased computation time Use moneca_fast() improved performance large datasets Memory usage grows number levels matrix size Auto-tuning adds overhead: Consider using manual parameters speed critical","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"MONECA provides powerful framework analyzing social mobility network-based clustering. combination : Flexible clustering algorithms Modern visualization capabilities Hierarchical segmentation Quality assessment tools Makes suitable exploring mobility patterns diverse social contexts.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"further-reading","dir":"Articles","previous_headings":"Conclusion","what":"Further Reading","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Original MONECA methodology papers Network analysis social mobility research Graph-theoretic approaches social structure","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/moneca-introduction.html","id":"getting-help","dir":"Articles","previous_headings":"Conclusion","what":"Getting Help","title":"Introduction to moneca: Mobility Network Clustering Analysis","text":"Use ?function_name detailed function documentation Check package website updates examples Report issues GitHub repository","code":"# Session information for reproducibility sessionInfo() #> R version 4.5.2 (2025-10-31) #> Platform: x86_64-pc-linux-gnu #> Running under: Ubuntu 24.04.3 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] stats     graphics  grDevices datasets  utils     methods   base      #>  #> other attached packages: #> [1] moneca_1.0.5 #>  #> loaded via a namespace (and not attached): #>  [1] viridis_0.6.5      sass_0.4.10        generics_0.1.4     tidyr_1.3.2        #>  [5] renv_1.1.4         digest_0.6.39      magrittr_2.0.4     evaluate_1.0.5     #>  [9] grid_4.5.2         RColorBrewer_1.1-3 fastmap_1.2.0      jsonlite_2.0.0     #> [13] toOrdinal_1.4-0.0  ggrepel_0.9.6      gridExtra_2.3      purrr_1.2.1        #> [17] viridisLite_0.4.3  scales_1.4.0       tweenr_2.0.3       textshaping_1.0.4  #> [21] jquerylib_0.1.4    cli_3.6.5          crayon_1.5.3       rlang_1.1.7        #> [25] graphlayouts_1.2.2 polyclip_1.10-7    tidygraph_1.3.1    withr_3.0.2        #> [29] cachem_1.1.0       yaml_2.3.12        tools_4.5.2        memoise_2.0.1      #> [33] dplyr_1.2.0        ggplot2_4.0.2      vctrs_0.7.1        R6_2.6.1           #> [37] lifecycle_1.0.5    fs_1.6.6           MASS_7.3-65        ragg_1.5.0         #> [41] ggraph_2.2.2       pkgconfig_2.0.3    desc_1.4.3         pkgdown_2.2.0      #> [45] pillar_1.11.1      bslib_0.10.0       gtable_0.3.6       glue_1.8.0         #> [49] Rcpp_1.1.1         ggforce_0.5.0      systemfonts_1.3.1  xfun_0.56          #> [53] tibble_3.3.1       tidyselect_1.2.1   knitr_1.51         farver_2.1.2       #> [57] htmltools_0.5.9    igraph_2.2.2       labeling_0.4.3     rmarkdown_2.30     #> [61] compiler_4.5.2     S7_0.2.1"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"il-problema-densitÃ -elevata-e-complessitÃ -computazionale","dir":"Articles","previous_headings":"1. Introduzione","what":"1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Lâ€™algoritmo MONECA analizza tabelle di mobilitÃ  attraverso reti ponderate e cliques per identificare cluster di posizioni con elevata mobilitÃ  interna. Questo approccio funziona modo efficace per matrici con 10-50 categorie, dove pattern di mobilitÃ  sono sufficientemente chiari e il rumore nei dati non oscura le strutture sottostanti.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"cosÃ¨-la-densitÃ -di-una-matrice","dir":"Articles","previous_headings":"1. Introduzione > 1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","what":"1.1.1 Cosâ€™Ã¨ la densitÃ  di una matrice","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La densitÃ  di una matrice Ã¨ la proporzione di celle con valori diversi da zero rispetto al totale delle celle: DensitÃ =Numero di celle non-zeronÃ—n\\text{DensitÃ } = \\frac{\\text{Numero di celle non-zero}}{n \\times n} Ad esempio, una matrice 80Ã—80 ha 6.400 celle. Se 4.000 celle contengono valori positivi, la densitÃ  Ã¨ 62.5% (e la sparsitÃ  Ã¨ 37.5%).","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"come-moneca-costruisce-la-rete","dir":"Articles","previous_headings":"1. Introduzione > 1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","what":"1.1.2 Come MONECA costruisce la rete","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"MONECA costruisce una rete pesata dalla matrice di mobilitÃ  attraverso due passaggi: Calcolo dei rischi relativi: internamente, moneca() chiama weight.matrix() per calcolare il rischio relativo (RR) di ogni cella: RR=osservatoattesoRR = \\frac{osservato}{atteso} Filtraggio con cut.: per default, weight.matrix() usa cut.= 1, mantenendo solo le celle con RRâ‰¥1RR \\geq 1 (mobilitÃ  pari o superiore alle aspettative). Le altre celle vengono escluse dalla rete. La rete risultante ha: - Ogni categoria come nodo - Ogni cella con RR >= 1 come arco tra due nodi","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"due-concetti-di-densitÃ ","dir":"Articles","previous_headings":"1. Introduzione > 1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","what":"1.1.3 Due concetti di densitÃ ","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Ãˆ importante distinguere due concetti di densitÃ : DensitÃ  dei conteggi: proporzione di celle con conteggi > 0 nella matrice originale DensitÃ  della rete: proporzione di celle con RR >= 1 dopo il calcolo dei rischi relativi La densitÃ  della rete Ã¨ ciÃ² che determina il numero di archi nel grafo analizzato da MONECA. Il filtraggio interno con cut.= 1 Ã¨ giÃ  molto efficace nel ridurre questa densitÃ . Esempio tipico: - DensitÃ  conteggi: ~80% (molte celle con almeno unâ€™osservazione) - DensitÃ  rete: ~10-15% (poche celle con mobilitÃ  sopra le aspettative)","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"perchÃ©-la-densitÃ -della-rete-incide-sui-tempi-di-calcolo","dir":"Articles","previous_headings":"1. Introduzione > 1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","what":"1.1.4 PerchÃ© la densitÃ  della rete incide sui tempi di calcolo","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Lâ€™algoritmo cerca cliques (sottografi completi) nella rete. Il problema computazionale Ã¨ che il numero di cliques potenziali cresce modo combinatoriale con il numero di archi: PiÃ¹ celle con RR >= 1 â†’ piÃ¹ archi nella rete PiÃ¹ archi â†’ piÃ¹ cliques potenziali da esaminare Il tempo di calcolo puÃ² crescere esponenzialmente","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"problemi-delle-matrici-di-grandi-dimensioni","dir":"Articles","previous_headings":"1. Introduzione > 1.1 Il problema: densitÃ  elevata e complessitÃ  computazionale","what":"1.1.5 Problemi delle matrici di grandi dimensioni","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando si lavora con matrici di mobilitÃ  di grandi dimensioni (60+ categorie), emergono problemi specifici: Rumore statistico: con un numero elevato di categorie, molte celle contengono poche osservazioni, producendo stime instabili dei rischi relativi Falsi positivi nella rete: celle con pochi conteggi possono avere RR >= 1 per caso, creando archi â€œrumorosiâ€ nella rete Esplosione combinatoriale: piÃ¹ archi nella rete significa piÃ¹ cliques potenziali, con tempi di calcolo che possono diventare proibitivi DifficoltÃ  interpretativa: cluster basati su connessioni deboli (rumore) possono oscurare pattern di mobilitÃ  sostantivi","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"soluzione-preprocessing-con-reduce_density","dir":"Articles","previous_headings":"1. Introduzione","what":"1.2 Soluzione: preprocessing con reduce_density()","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La funzione reduce_density() opera sui conteggi della matrice prima che MONECA calcoli rischi relativi. Lâ€™obiettivo Ã¨ rimuovere il rumore statistico per ottenere rischi relativi piÃ¹ stabili. Workflow: Importante: reduce_density() non agisce direttamente sulla densitÃ  della rete (celle con RR >= 1), ma modifica conteggi. Lâ€™effetto sulla rete dipende da come questa modifica influenza il calcolo dei rischi relativi.","code":"matrice_grezza -> reduce_density() -> moneca()                                         â†“                               (internamente chiama weight.matrix)"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"effetto-dei-due-metodi-sulla-densitÃ -della-rete","dir":"Articles","previous_headings":"1. Introduzione > 1.2 Soluzione: preprocessing con reduce_density()","what":"1.2.1 Effetto dei due metodi sulla densitÃ  della rete","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Entrambi metodi (SVD e NMF) utilizzano un approccio basato su filtro: Approccio unificato (SVD e NMF): Calcolano una ricostruzione basso rango della matrice Usano valori di ricostruzione come criterio di filtro per identificare celle significative Preservano valori originali delle celle che superano la soglia (nessuna distorsione) Azzerano le celle considerate rumore (valori di ricostruzione sotto la soglia) Riducono efficacemente la densitÃ  della rete Differenze tra SVD e NMF: SVD: piÃ¹ veloce, usa varianza spiegata per selezionare k automaticamente NMF: componenti interpretabili come pattern latenti di mobilitÃ , richiede RcppML Entrambi usano il parametro filter_quantile per controllare la selezione delle celle","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"quando-usare-reduce_density","dir":"Articles","previous_headings":"1. Introduzione > 1.2 Soluzione: preprocessing con reduce_density()","what":"1.2.2 Quando usare reduce_density()","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Il filtraggio interno di MONECA (cut.= 1) Ã¨ giÃ  efficace nel ridurre la densitÃ  della rete. Lâ€™uso di reduce_density() Ã¨ utile quando: La matrice Ã¨ molto grande (100+ categorie) e il calcolo Ã¨ lento Si vuole rimuovere rumore statistico prima del calcolo dei rischi relativi Si vogliono preservare conteggi originali delle celle significative (entrambi metodi preservano valori originali) Si vuole ridurre la densitÃ  della rete modo controllato tramite il parametro filter_quantile","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"decomposizione-ai-valori-singolari-svd","dir":"Articles","previous_headings":"2. Fondamenti Matematici","what":"2.1 Decomposizione ai Valori Singolari (SVD)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La Singular Value Decomposition (SVD) Ã¨ una tecnica di fattorizzazione matriciale che decompone una matrice MM (dimensioni nÃ—nn \\times n) nel prodotto di tre matrici: M=UÎ£VTM = U \\Sigma V^T dove: UU: matrice ortogonale nÃ—nn \\times n (vettori singolari sinistri) Î£\\Sigma: matrice diagonale nÃ—nn \\times n con valori singolari Ïƒ1â‰¥Ïƒ2â‰¥â€¦â‰¥Ïƒnâ‰¥0\\sigma_1 \\geq \\sigma_2 \\geq \\ldots \\geq \\sigma_n \\geq 0 VTV^T: matrice ortogonale nÃ—nn \\times n trasposta (vettori singolari destri)","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"interpretazione-geometrica","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.1 Decomposizione ai Valori Singolari (SVD)","what":"2.1.1 Interpretazione geometrica","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"valori singolari Ïƒi\\sigma_i rappresentano lâ€™importanza delle diverse componenti nella struttura della matrice. primi valori singolari catturano la maggior parte della variabilitÃ , mentre gli ultimi corrispondono principalmente rumore.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"riduzione-dimensionale-tramite-svd-troncata","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.1 Decomposizione ai Valori Singolari (SVD)","what":"2.1.2 Riduzione dimensionale tramite SVD troncata","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La SVD troncata kk componenti (k<nk < n) ricostruisce la matrice mantenendo solo le prime kk componenti: Mk=UkÎ£kVkTM_k = U_k \\Sigma_k V_k^T dove UkU_k, Î£k\\Sigma_k, e VkV_k contengono solo le prime kk colonne/righe. ProprietÃ  della SVD troncata: Fornisce la migliore approssimazione basso rango di MM termini di norma di Frobenius La varianza spiegata dalla componente ii Ã¨ proporzionale Ïƒi2\\sigma_i^2 La varianza cumulativa spiegata dalle prime kk componenti Ã¨: âˆ‘=1kÏƒi2âˆ‘=1nÏƒi2\\frac{\\sum_{=1}^{k} \\sigma_i^2}{\\sum_{=1}^{n} \\sigma_i^2}","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"come-la-svd-riduce-la-densitÃ ","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.1 Decomposizione ai Valori Singolari (SVD)","what":"2.1.3 Come la SVD riduce la densitÃ ","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Nella funzione reduce_density(), la SVD utilizza un approccio di filtraggio simile NMF: Ricostruzione basso rango: usando solo kk componenti, si ottiene una matrice ricostruita che rappresenta pattern dominanti Clipping dei negativi: eventuali valori negativi prodotti dalla ricostruzione vengono impostati zero per il calcolo della soglia Selezione via quantile: le celle con valori di ricostruzione sotto una certa soglia (determinata dal parametro filter_quantile) vengono considerate rumore Preservazione dei valori originali: per le celle identificate come significative, vengono mantenuti valori originali della matrice, non valori ricostruiti Il risultato Ã¨ una matrice con meno celle non-zero: le connessioni deboli (rumore) vengono azzerate, mentre le connessioni forti (segnale) mantengono loro valori originali intatti.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"vantaggi-e-limitazioni-della-svd","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.1 Decomposizione ai Valori Singolari (SVD)","what":"2.1.4 Vantaggi e limitazioni della SVD","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Vantaggi: Computazionalmente efficiente (libreria irlba per SVD troncata) Soluzione ottimale per approssimazione basso rango Varianza spiegata facilmente interpretabile Preserva valori originali delle celle significative (approccio filtro) Parametro filter_quantile regolabile per controllare la selezione Limitazioni: Il processo di filtraggio si basa su valori di ricostruzione che possono includere negativi (corretti prima del calcolo della soglia) La selezione del quantile puÃ² richiedere calibrazione per casi specifici","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"fattorizzazione-a-matrici-non-negative-nmf","dir":"Articles","previous_headings":"2. Fondamenti Matematici","what":"2.2 Fattorizzazione a Matrici Non-Negative (NMF)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La Non-negative Matrix Factorization (NMF) decompone una matrice non-negativa MM nel prodotto di due matrici non-negative: Mâ‰ˆWHM \\approx W H dove: WW: matrice nÃ—kn \\times k (matrice delle basi) HH: matrice kÃ—nk \\times n (matrice dei coefficienti) Tutte le entrate di WW e HH sono â‰¥0\\geq 0","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"interpretazione-per-dati-di-mobilitÃ ","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.2 Fattorizzazione a Matrici Non-Negative (NMF)","what":"2.2.1 Interpretazione per dati di mobilitÃ ","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La NMF ha unâ€™interpretazione naturale per matrici di mobilitÃ : WW: rappresenta kk pattern di mobilitÃ  latenti (profili di origine) HH: rappresenta pesi di questi pattern per ciascuna destinazione Il vincolo di non-negativitÃ  preserva lâ€™interpretabilitÃ  dei conteggi","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"nmf-come-filtro-nella-funzione-reduce_density","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.2 Fattorizzazione a Matrici Non-Negative (NMF)","what":"2.2.2 NMF come filtro nella funzione reduce_density()","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"differenza della SVD, che sostituisce valori originali con una ricostruzione basso rango, nella funzione reduce_density() la NMF viene utilizzata come filtro per identificare celle significative: Calcolo della ricostruzione: La decomposizione WHWH produce una matrice ricostruita che rappresenta pattern dominanti di mobilitÃ  Identificazione delle celle significative: valori di ricostruzione indicano quanto una cella contribuisce ai pattern latenti identificati dalla NMF Selezione via quantile: Le celle con valori di ricostruzione sotto una certa soglia (determinata dal parametro filter_quantile) vengono considerate rumore Preservazione dei valori originali: Per le celle identificate come significative, vengono mantenuti valori originali della matrice, non valori ricostruiti Questo approccio offre un vantaggio rispetto alla ricostruzione diretta: conteggi nella matrice risultante sono esattamente quelli osservati nei dati originali, senza distorsioni introdotte dalla ricostruzione. Le celle considerate rumore vengono semplicemente azzerate.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"come-la-nmf-riduce-la-densitÃ ","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.2 Fattorizzazione a Matrici Non-Negative (NMF)","what":"2.2.3 Come la NMF riduce la densitÃ ","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La NMF riduce la densitÃ  attraverso un approccio di filtraggio selettivo: Analisi dei pattern latenti: la decomposizione WHWH identifica kk pattern dominanti di mobilitÃ  Valutazione delle celle: ogni cella riceve un â€œpunteggio di ricostruzioneâ€ che indica quanto contribuisce ai pattern identificati Separazione segnale/rumore: le celle con punteggi bassi contribuiscono poco ai pattern dominanti e sono considerate rumore Azzeramento del rumore: le celle sotto la soglia filter_quantile vengono impostate zero Il risultato Ã¨ una matrice piÃ¹ sparsa dove: - Le celle significative mantengono loro valori originali (nessuna distorsione) - Le celle rumorose sono azzerate (rimosse dalla rete) Questo riduce il numero di archi nella rete MONECA, accelerando il calcolo delle cliques.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"algoritmo-di-ottimizzazione","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.2 Fattorizzazione a Matrici Non-Negative (NMF)","what":"2.2.4 Algoritmo di ottimizzazione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La NMF non ha una soluzione analitica chiusa. Lâ€™algoritmo standard minimizza la distanza tra MM e WHWH attraverso aggiornamenti iterativi. La funzione reduce_density() utilizza il pacchetto RcppML, che implementa algoritmi efficienti di NMF.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"vantaggi-e-limitazioni-della-nmf-approccio-filtro","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.2 Fattorizzazione a Matrici Non-Negative (NMF)","what":"2.2.5 Vantaggi e limitazioni della NMF (approccio filtro)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Vantaggi: Preserva valori originali dei conteggi (nessuna distorsione) Utilizza NMF per rilevamento intelligente del rumore Componenti interpretabili per identificare pattern significativi Parametro filter_quantile regolabile per controllare la selezione Limitazioni: PiÃ¹ lenta della SVD (ottimizzazione iterativa) Richiede inizializzazione casuale (necessario specificare seed per riproducibilitÃ ) Non ha una metrica diretta di â€œvarianza spiegataâ€ La selezione del quantile puÃ² richiedere calibrazione per casi specifici","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"normalizzazioni-pre-processing","dir":"Articles","previous_headings":"2. Fondamenti Matematici","what":"2.3 Normalizzazioni pre-processing","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Prima di applicare SVD o NMF, Ã¨ possibile trasformare la matrice di mobilitÃ  per enfatizzare aspetti specifici.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"nessuna-normalizzazione-normalization-none","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.3 Normalizzazioni pre-processing","what":"2.3.1 Nessuna normalizzazione (normalization = \"none\")","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Utilizza conteggi grezzi. Adatta quando: Le dimensioni marginali non introducono distorsioni sistematiche Si vuole preservare lâ€™informazione sulle frequenze assolute La matrice Ã¨ giÃ  ragionevolmente bilanciata","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"residui-di-pearson-normalization-pearson","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.3 Normalizzazioni pre-processing","what":"2.3.2 Residui di Pearson (normalization = \"pearson\")","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Standardizza per gli effetti marginali calcolando residui di Pearson: rij=Oijâˆ’EijEijr_{ij} = \\frac{O_{ij} - E_{ij}}{\\sqrt{E_{ij}}} dove OijO_{ij} sono conteggi osservati e Eij=(totale_rigai)(totale_colonnaj)totale_complessivoE_{ij} = \\frac{(totale\\_riga_i)(totale\\_colonna_j)}{totale\\_complessivo} sono conteggi attesi sotto indipendenza. Utilizzo: enfatizza deviazioni dal modello di indipendenza, utile quando le distribuzioni marginali sono eterogenee.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"ppmi---positive-pointwise-mutual-information-normalization-ppmi","dir":"Articles","previous_headings":"2. Fondamenti Matematici > 2.3 Normalizzazioni pre-processing","what":"2.3.3 PPMI - Positive Pointwise Mutual Information (normalization = \"ppmi\")","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Calcola la mutua informazione puntuale positiva: PPMIij=max(0,log2P(,j)P()P(j))PPMI_{ij} = \\max\\left(0, \\log_2\\frac{P(,j)}{P()P(j)}\\right) dove: P(,j)=conteggioijtotaleP(,j) = \\frac{conteggio_{ij}}{totale} (probabilitÃ  congiunta) P()=totale_rigaitotaleP() = \\frac{totale\\_riga_i}{totale} (probabilitÃ  marginale origine) P(j)=totale_colonnajtotaleP(j) = \\frac{totale\\_colonna_j}{totale} (probabilitÃ  marginale destinazione) Interpretazione: valori positivi indicano mobilitÃ  superiore quanto atteso per caso; valori zero indicano mobilitÃ  sotto le aspettative o assente. Utilizzo: enfatizza connessioni di mobilitÃ  sorprendenti rispetto alla casualitÃ , utile per identificare cluster basati su affinitÃ  strutturali piuttosto che su frequenze assolute.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"sintassi-e-parametri","dir":"Articles","previous_headings":"3. La Funzione reduce_density()","what":"3.1 Sintassi e parametri","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"reduce_density(   mx,   method = c(\"svd\", \"nmf\"),   normalization = c(\"none\", \"pearson\", \"ppmi\"),   k = \"auto\",   variance_target = 0.75,   threshold = NULL,   threshold_type = c(\"sd\", \"percentile\"),   verbose = FALSE,   seed = NULL,   filter_quantile = \"auto\" )"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-obbligatori","dir":"Articles","previous_headings":"3. La Funzione reduce_density() > 3.1 Sintassi e parametri","what":"3.1.1 Parametri obbligatori","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"mx: matrice di mobilitÃ  formato standard moneca (con riga e colonna dei totali). Deve essere quadrata e contenere almeno 4 categorie (5 righe inclusi totali).","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-del-metodo-di-riduzione","dir":"Articles","previous_headings":"3. La Funzione reduce_density() > 3.1 Sintassi e parametri","what":"3.1.2 Parametri del metodo di riduzione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"method: metodo di riduzione dimensionale da utilizzare. \"svd\" (default): Singular Value Decomposition. Veloce, efficiente memoria, usa la varianza spiegata per selezionare k automaticamente. Consigliata come prima scelta. \"nmf\": Non-negative Matrix Factorization. Componenti interpretabili come pattern latenti di mobilitÃ . Richiede il pacchetto RcppML. filter_quantile: parametro che si applica entrambi metodi (SVD e NMF). Controlla la proporzione di celle da mantenere. \"auto\" (default): selezione automatica basata sul rilevamento del gomito (elbow) sui valori di ricostruzione ordinati numerico (0-1): proporzione di celle da mantenere. Es. 0.75 mantiene il 75% delle celle con valori di ricostruzione piÃ¹ alti Nota importante: Entrambi metodi (SVD e NMF) usano valori di ricostruzione solo per identificare quali celle sono significative (segnale vs rumore), ma restituiscono valori originali per quelle celle. Questo preserva lâ€™interpretabilitÃ  dei conteggi senza introdurre distorsioni. normalization: trasformazione pre-processing da applicare. \"none\" (default): nessuna normalizzazione, utilizza conteggi grezzi \"pearson\": residui di Pearson, standardizza per effetti marginali \"ppmi\": Positive Pointwise Mutual Information, enfatizza mobilitÃ  sopra il caso","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-per-la-selezione-delle-componenti","dir":"Articles","previous_headings":"3. La Funzione reduce_density() > 3.1 Sintassi e parametri","what":"3.1.3 Parametri per la selezione delle componenti","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"k: numero di componenti da mantenere. \"auto\" (default): selezione automatica basata su varianza spiegata e rilevamento del gomito (elbow) intero positivo: specifica manualmente il numero di componenti (tipicamente 15-25 per matrici 60+) variance_target: valore numerico (0-1) che specifica la varianza cumulativa target quando k = \"auto\". Default 0.75 (75%). Valori piÃ¹ alti mantengono piÃ¹ dettaglio ma anche piÃ¹ rumore.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-di-post-processing","dir":"Articles","previous_headings":"3. La Funzione reduce_density() > 3.1 Sintassi e parametri","what":"3.1.4 Parametri di post-processing","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"threshold: soglia opzionale per aumentare la sparsitÃ . NULL (default): nessuna soglia applicata \"auto\": soglia automatica (media + 1 deviazione standard) numerico: valori sotto questa soglia vengono impostati zero threshold_type: interpretazione della soglia numerica. \"sd\" (default): numero di deviazioni standard sopra la media \"percentile\": soglia percentile (0-100)","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-di-controllo","dir":"Articles","previous_headings":"3. La Funzione reduce_density() > 3.1 Sintassi e parametri","what":"3.1.5 Parametri di controllo","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"verbose: logico. Se TRUE, stampa informazioni sul progresso dellâ€™elaborazione. Default FALSE. seed: intero opzionale per garantire riproducibilitÃ . Particolarmente importante per NMF che usa inizializzazione casuale.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"valore-restituito","dir":"Articles","previous_headings":"3. La Funzione reduce_density()","what":"3.2 Valore restituito","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La funzione restituisce un oggetto di classe \"density_reduced\" (eredita da \"matrix\") con seguenti attributi: method: metodo di riduzione utilizzato (â€œsvdâ€ o â€œnmfâ€) normalization: metodo di normalizzazione applicato k: numero di componenti mantenute variance_explained: proporzione di varianza spiegata (solo per SVD) filter_quantile: quantile di filtro utilizzato (entrambi metodi) - indica la proporzione di celle mantenute basata sui valori di ricostruzione threshold_applied: valore di soglia applicato (se presente) original_dims: dimensioni della matrice originale (senza totali) original_total: totale delle osservazioni originali reduced_total: totale delle osservazioni dopo riduzione Lâ€™oggetto puÃ² essere stampato direttamente per visualizzare un riepilogo delle operazioni eseguite.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"pipeline-di-elaborazione","dir":"Articles","previous_headings":"3. La Funzione reduce_density()","what":"3.3 Pipeline di elaborazione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La funzione esegue seguenti passaggi: Validazione input: verifica formato matrice ed estrae la matrice core (escludendo riga/colonna totali) Normalizzazione: applica opzionalmente trasformazioni PPMI o residui di Pearson Selezione componenti: quando k = \"auto\", usa varianza spiegata con rilevamento del gomito Riduzione dimensionale: applica SVD o NMF per estrarre pattern dominanti Ricostruzione: ricostruisce la matrice dalle componenti ridotte Filtraggio: usa valori di ricostruzione come soglia per identificare celle significative. Le celle con valori di ricostruzione sotto la soglia (filter_quantile) vengono azzerate. valori originali vengono preservati per le celle che passano il filtro. Soglia opzionale: imposta valori bassi zero se richiesto (threshold aggiuntivo) Ricalcolo totali: aggiorna riga e colonna dei totali","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"preparazione-dei-dati-di-esempio","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.1 Preparazione dei dati di esempio","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Carica il pacchetto library(moneca) library(ggplot2) # Genera una matrice di mobilitÃ  di grandi dimensioni (80 classi) set.seed(123) large_data <- generate_mobility_data(   n_classes = 80,   n_total = 100000,   immobility_strength = 0.65,   class_clustering = 0.25,   noise_level = 0.15,   class_names = paste0(\"C\", sprintf(\"%02d\", 1:80)),   seed = 123 )  # Informazioni sulla matrice cat(\"Dimensioni matrice:\", dim(large_data), \"\\n\") #> Dimensioni matrice: 81 81 cat(\"Totale osservazioni:\", large_data[81, 81], \"\\n\") #> Totale osservazioni: 1e+05 cat(\"Celle non-zero:\", sum(large_data[1:80, 1:80] > 0), \"su\", 80*80, \"\\n\") #> Celle non-zero: 4885 su 6400 cat(\"SparsitÃ :\", round(100 * sum(large_data[1:80, 1:80] == 0) / (80*80), 1), \"%\\n\") #> SparsitÃ : 23.7 %"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"visualizzazione-dello-scree-plot","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.2 Visualizzazione dello scree plot","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Prima di applicare la riduzione, Ã¨ utile visualizzare la varianza spiegata per componente per capire quante componenti sono necessarie.  Interpretazione dello scree plot: Barre blu: varianza spiegata da ciascuna componente individuale Linea rossa: varianza cumulativa spiegata Linea tratteggiata orizzontale: target di varianza (75% questo caso) Linea verticale rossa: numero di componenti necessarie per raggiungere il target Linea verticale verde: punto di gomito rilevato automaticamente Lo scree plot mostra che le prime componenti catturano la maggior parte della varianza, mentre le componenti successive contribuiscono progressivamente meno. Il punto di gomito indica dove il beneficio marginale di aggiungere componenti diventa trascurabile.","code":"# Crea lo scree plot p_scree <- plot_scree(   large_data,   max_components = 40,   variance_target = 0.75,   show_elbow = TRUE,   title = \"Scree Plot: Varianza Spiegata per Componente\" )  print(p_scree)"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-1-riduzione-base-con-svd-e-selezione-automatica-di-k","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.3 Esempio 1: Riduzione base con SVD e selezione automatica di k","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Cosa Ã¨ successo: La funzione ha estratto la matrice core 80Ã—80 (escludendo totali) Ha calcolato la SVD per determinare automaticamente k Ha selezionato il numero di componenti che spiegano il 75% della varianza Ha ricostruito la matrice mantenendo solo queste componenti Ha arrotondato valori interi e ricalcolato totali Interpretazione del risultato: Il numero di componenti selezionate (k) bilancia la preservazione della struttura con la riduzione del rumore La percentuale di varianza spiegata indica quanto della variabilitÃ  originale Ã¨ stata mantenuta La percentuale di osservazioni mantenute mostra lâ€™effetto dellâ€™arrotondamento e della rimozione di rumore","code":"# Riduzione base con parametri di default reduced_basic <- reduce_density(   large_data,   method = \"svd\",   normalization = \"none\",   k = \"auto\",   variance_target = 0.75,   verbose = TRUE,   seed = 42 )  # Visualizza il risultato print(reduced_basic) #> Density-Reduced Mobility Matrix #> ================================ #> Dimensions: 80 x 80 categories #> Method: svd #> Normalization: none #> Components (k): 16 #> Variance explained: 75.3% #> Filter quantile: 25.0% (keeps top cells by reconstruction) #> Observations: 100000 -> 80086 (80.1% retained) #>  #> Core matrix preview (first 5x5): #>     C01  C02 C03 C04  C05 #> C01 465   99  49   1    0 #> C02 286 1467 286 172    0 #> C03   4   17  62  10    6 #> C04   3   73 149 683  140 #> C05   0    0 163 339 1866"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-2-riduzione-con-normalizzazione-ppmi","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.4 Esempio 2: Riduzione con normalizzazione PPMI","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La normalizzazione PPMI Ã¨ utile quando si vogliono enfatizzare le connessioni di mobilitÃ  che superano le aspettative casuali, indipendentemente dalla frequenza assoluta. Confronto con la riduzione base: Differenze attese: La normalizzazione PPMI trasforma dati prima della SVD, enfatizzando pattern di co-occorrenza Il numero di componenti necessarie potrebbe differire La matrice ricostruita enfatizza mobilitÃ  â€œsorprendenteâ€ rispetto al caso","code":"# Riduzione con PPMI reduced_ppmi <- reduce_density(   large_data,   method = \"svd\",   normalization = \"ppmi\",   k = \"auto\",   variance_target = 0.80,  # Target piÃ¹ alto per preservare piÃ¹ struttura   verbose = TRUE,   seed = 42 )  print(reduced_ppmi) #> Density-Reduced Mobility Matrix #> ================================ #> Dimensions: 80 x 80 categories #> Method: svd #> Normalization: ppmi #> Components (k): 18 #> Variance explained: 81.2% #> Filter quantile: 25.0% (keeps top cells by reconstruction) #> Observations: 100000 -> 88909 (88.9% retained) #>  #> Core matrix preview (first 5x5): #>     C01  C02 C03 C04  C05 #> C01 465   99  49   1    2 #> C02 286 1467 286 172    2 #> C03   4   17  62  10    6 #> C04   3   73 149 683  140 #> C05   1    6 163 339 1866 # Confronta le dimensioni ridotte cat(\"Riduzione base (none):\\n\") #> Riduzione base (none): cat(\"  k =\", attr(reduced_basic, \"k\"), \"\\n\") #>   k = 16 cat(\"  Varianza spiegata =\",     round(attr(reduced_basic, \"variance_explained\") * 100, 1), \"%\\n\\n\") #>   Varianza spiegata = 75.3 %  cat(\"Riduzione PPMI:\\n\") #> Riduzione PPMI: cat(\"  k =\", attr(reduced_ppmi, \"k\"), \"\\n\") #>   k = 18 cat(\"  Varianza spiegata =\",     round(attr(reduced_ppmi, \"variance_explained\") * 100, 1), \"%\\n\") #>   Varianza spiegata = 81.2 %"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-3-riduzione-con-nmf-approccio-filtro","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.5 Esempio 3: Riduzione con NMF (approccio filtro)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La NMF utilizza un approccio diverso dalla SVD: invece di sostituire valori con una ricostruzione, la NMF identifica le celle significative e preserva valori originali. Come funziona lâ€™approccio NMF filtro: Lâ€™output verbose mostra informazioni sul processo di filtraggio: â€œAuto quantile selection: keep top X% cellsâ€ indica la proporzione di celle selezionate automaticamente â€œNMF filter: keeping N/M cells (X%)â€ mostra quante celle sono state mantenute valori nella matrice risultante sono conteggi originali, non valori ricostruiti Specifica manuale del quantile: Note sulla NMF: Richiede il pacchetto RcppML (install.packages(\"RcppML\")) Preserva valori originali dei conteggi (nessuna distorsione) Il parametro filter_quantile controlla la selezione: valori piÃ¹ alti mantengono piÃ¹ celle Lâ€™argomento seed Ã¨ essenziale per la riproducibilitÃ  Specificare k manualmente Ã¨ spesso preferibile per NMF","code":"# Riduzione con NMF - selezione automatica del quantile reduced_nmf <- reduce_density(   large_data,   method = \"nmf\",   normalization = \"none\",   k = 20,  # Specifica k manualmente per NMF   filter_quantile = \"auto\",  # Selezione automatica via elbow detection   verbose = TRUE,   seed = 42 )  print(reduced_nmf) #> Density-Reduced Mobility Matrix #> ================================ #> Dimensions: 80 x 80 categories #> Method: nmf #> Normalization: none #> Components (k): 20 #> Filter quantile: 25.0% (keeps top cells by reconstruction) #> Observations: 100000 -> 84774 (84.8% retained) #>  #> Core matrix preview (first 5x5): #>     C01  C02 C03 C04  C05 #> C01 465   99  49   1    0 #> C02 286 1467 286 172    0 #> C03   4   17  62  10    6 #> C04   3   73 149 683  140 #> C05   0    0 163 339 1866 # Riduzione con quantile specificato manualmente reduced_nmf_75 <- reduce_density(   large_data,   method = \"nmf\",   k = 20,   filter_quantile = 0.75,  # Mantieni il 75% delle celle piÃ¹ significative   verbose = TRUE,   seed = 42 )  # Il filter_quantile viene salvato come attributo cat(\"Filter quantile utilizzato:\", attr(reduced_nmf_75, \"filter_quantile\"), \"\\n\") #> Filter quantile utilizzato: 0.75"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-4-riduzione-con-soglia-per-aumentare-la-sparsitÃ ","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.6 Esempio 4: Riduzione con soglia per aumentare la sparsitÃ ","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Lâ€™applicazione di una soglia puÃ² rimuovere ulteriormente valori bassi che potrebbero rappresentare rumore. Effetto della soglia: La soglia rimuove valori bassi che possono rappresentare rumore Aumenta la sparsitÃ  della matrice PuÃ² migliorare lâ€™identificazione di cluster nella successiva analisi MONECA","code":"# Riduzione con soglia automatica reduced_sparse <- reduce_density(   large_data,   method = \"svd\",   k = \"auto\",   variance_target = 0.75,   threshold = \"auto\",  # Soglia automatica: media + 1 SD   verbose = TRUE,   seed = 42 )  print(reduced_sparse) #> Density-Reduced Mobility Matrix #> ================================ #> Dimensions: 80 x 80 categories #> Method: svd #> Normalization: none #> Components (k): 16 #> Variance explained: 75.3% #> Filter quantile: 25.0% (keeps top cells by reconstruction) #> Threshold applied: 108.56 #> Observations: 100000 -> 66974 (67.0% retained) #>  #> Core matrix preview (first 5x5): #>     C01  C02 C03 C04  C05 #> C01 465    0   0   0    0 #> C02 286 1467 286 172    0 #> C03   0    0   0   0    0 #> C04   0    0 149 683  140 #> C05   0    0 163 339 1866  # Confronta la sparsitÃ  sparsity_original <- sum(large_data[1:80, 1:80] == 0) / (80*80) sparsity_basic <- sum(reduced_basic[1:80, 1:80] == 0) / (80*80) sparsity_sparse <- sum(reduced_sparse[1:80, 1:80] == 0) / (80*80)  cat(\"\\nConfronto sparsitÃ :\\n\") #>  #> Confronto sparsitÃ : cat(\"  Originale:\", round(sparsity_original * 100, 1), \"%\\n\") #>   Originale: 23.7 % cat(\"  Riduzione base:\", round(sparsity_basic * 100, 1), \"%\\n\") #>   Riduzione base: 77.2 % cat(\"  Con soglia:\", round(sparsity_sparse * 100, 1), \"%\\n\") #>   Con soglia: 97.6 %"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-5-riduzione-con-soglia-personalizzata","dir":"Articles","previous_headings":"4. Esempi Pratici","what":"4.7 Esempio 5: Riduzione con soglia personalizzata","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Soglia basata su deviazioni standard reduced_sd <- reduce_density(   large_data,   method = \"svd\",   k = \"auto\",   threshold = 1.5,  # 1.5 deviazioni standard sopra la media   threshold_type = \"sd\",   verbose = TRUE,   seed = 42 )  # Soglia basata su percentile reduced_percentile <- reduce_density(   large_data,   method = \"svd\",   k = \"auto\",   threshold = 25,  # Mantieni solo valori sopra il 25Â° percentile   threshold_type = \"percentile\",   verbose = TRUE,   seed = 42 )  cat(\"Soglia SD:\", attr(reduced_sd, \"threshold_applied\"), \"\\n\") #> Soglia SD: 156.576 cat(\"Soglia percentile:\", attr(reduced_percentile, \"threshold_applied\"), \"\\n\") #> Soglia percentile: 0"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"pipeline-completa-da-riduzione-ad-analisi","dir":"Articles","previous_headings":"5. Integrazione con il Workflow MONECA","what":"5.1 Pipeline completa: da riduzione ad analisi","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# 1. Riduzione della densitÃ  reduced <- reduce_density(   large_data,   method = \"svd\",   normalization = \"none\",   k = \"auto\",   variance_target = 0.75,   verbose = FALSE,   seed = 42 )  # 2. Analisi MONECA sulla matrice ridotta seg <- moneca(   reduced,   segment.levels = 3,   small.cell.reduction = 200 ) #>   |                                                                              |                                                                      |   0%  |                                                                              |==                                                                    |   3%  |                                                                              |=====                                                                 |   6%  |                                                                              |=======                                                               |  10%  |                                                                              |=========                                                             |  13%  |                                                                              |===========                                                           |  16%  |                                                                              |==============                                                        |  19%  |                                                                              |================                                                      |  23% #> 25% ready! #>   |                                                                              |==================                                                    |  26%  |                                                                              |====================                                                  |  29%  |                                                                              |=======================                                               |  32%  |                                                                              |=========================                                             |  35%  |                                                                              |===========================                                           |  39%  |                                                                              |=============================                                         |  42%  |                                                                              |================================                                      |  45%  |                                                                              |==================================                                    |  48% #> 50% ready! #>   |                                                                              |====================================                                  |  52%  |                                                                              |======================================                                |  55%  |                                                                              |=========================================                             |  58%  |                                                                              |===========================================                           |  61%  |                                                                              |=============================================                         |  65%  |                                                                              |===============================================                       |  68%  |                                                                              |==================================================                    |  71%  |                                                                              |====================================================                  |  74% #> 75% ready! #>   |                                                                              |======================================================                |  77%  |                                                                              |========================================================              |  81%  |                                                                              |===========================================================           |  84%  |                                                                              |=============================================================         |  87%  |                                                                              |===============================================================       |  90%  |                                                                              |=================================================================     |  94%  |                                                                              |====================================================================  |  97%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |===                                                                   |   4%  |                                                                              |======                                                                |   9%  |                                                                              |=========                                                             |  13%  |                                                                              |============                                                          |  17%  |                                                                              |===============                                                       |  22% #> 25% ready! #>   |                                                                              |==================                                                    |  26%  |                                                                              |=====================                                                 |  30%  |                                                                              |========================                                              |  35%  |                                                                              |===========================                                           |  39%  |                                                                              |==============================                                        |  43%  |                                                                              |=================================                                     |  48% #> 50% ready! #>   |                                                                              |=====================================                                 |  52%  |                                                                              |========================================                              |  57%  |                                                                              |===========================================                           |  61%  |                                                                              |==============================================                        |  65%  |                                                                              |=================================================                     |  70%  |                                                                              |====================================================                  |  74% #> 75% ready! #>   |                                                                              |=======================================================               |  78%  |                                                                              |==========================================================            |  83%  |                                                                              |=============================================================         |  87%  |                                                                              |================================================================      |  91%  |                                                                              |===================================================================   |  96%  |                                                                              |======================================================================| 100% #> 100% ready! #>  #>   |                                                                              |                                                                      |   0%  |                                                                              |====                                                                  |   6%  |                                                                              |========                                                              |  12%  |                                                                              |============                                                          |  18%  |                                                                              |================                                                      |  24% #> 28% ready! #>   |                                                                              |=====================                                                 |  29%  |                                                                              |=========================                                             |  35%  |                                                                              |=============================                                         |  41%  |                                                                              |=================================                                     |  47% #> 50% ready! #>   |                                                                              |=====================================                                 |  53%  |                                                                              |=========================================                             |  59%  |                                                                              |=============================================                         |  65%  |                                                                              |=================================================                     |  71%  |                                                                              |======================================================                |  76% #> 78% ready! #>   |                                                                              |==========================================================            |  82%  |                                                                              |==============================================================        |  88%  |                                                                              |==================================================================    |  94%  |                                                                              |======================================================================| 100% #> 100% ready!  # 3. Visualizza i risultati print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    40.0% #> Average Mobility Concentration (all levels):         94.2% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.0    67.5    76.0    82.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    95.3    94.8    94.6    92.2  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                80           65           51           41  #> Significant Edges:                      34           34           27           14  #> Network Density:                     0.005        0.008        0.011        0.009  #> Isolated Segments:                      38           31           24           24  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>         Min Q1 Median Mean    Q3   Max #> Level 1   0  0   4.73 6.37 11.19 25.77 #> Level 2   0  0   5.12 5.61 10.10 19.05 #> Level 3   0  0   3.16 3.82  7.16 13.54 #> Level 4   0  0   0.00 2.39  3.46 11.22 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min Q1 Median Mean   Q3   Max #> Level 1   0  0      0 3.19 0.00 25.00 #> Level 2   0  0      0 2.81 5.43 14.87 #> Level 3   0  0      0 1.91 3.30 10.77 #> Level 4   0  0      0 1.19 1.29 10.75 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min Q1 Median Mean   Q3   Max #> Level 1   0  0      0 3.19 6.38 16.74 #> Level 2   0  0      0 2.81 5.39 11.76 #> Level 3   0  0      0 1.91 4.01  9.75 #> Level 4   0  0      0 1.19 1.60 10.75 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3   Max #> Level 1 3.25 5.93   6.83 7.50 8.83 16.74 #> Level 2 2.35 3.71   5.07 5.37 6.51 11.76 #> Level 3 1.36 1.95   3.16 3.61 4.33  9.75 #> Level 4 1.09 1.70   2.84 3.50 3.81 10.75 #>  #> ================================================================================"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"confronto-con-e-senza-riduzione","dir":"Articles","previous_headings":"5. Integrazione con il Workflow MONECA","what":"5.2 Confronto: con e senza riduzione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Analisi senza riduzione (potrebbe essere computazionalmente onerosa) # NOTA: con 80 classi, questo puÃ² richiedere molto tempo # seg_original <- moneca(large_data, segment.levels = 3)  # Analisi con riduzione (giÃ  calcolata) seg_reduced <- seg  # Visualizza la qualitÃ  dei segmenti quality_reduced <- segment.quality(seg_reduced) print(quality_reduced) #>     Membership 1: Segment 1: within.mobility 1: share.of.mobility 1: Density #> C77       4.10         77              0.653                0.031        NaN #> C76       4.10         76              0.461                0.011        NaN #> C78       4.10         78              0.493                0.013        NaN #> C80       4.10         80              0.762                0.036        NaN #> C79       4.10         79              0.567                0.017        NaN #> C49        4.3         49              0.682                0.040        NaN #> C50        4.3         50              0.249                0.007        NaN #> C54        4.6         54              0.613                0.025        NaN #> C53        4.6         53              0.537                0.015        NaN #> C52        4.6         52              0.627                0.018        NaN #> C48        4.3         48              0.451                0.011        NaN #> C47        4.3         47              0.631                0.017        NaN #> C51        4.6         51              0.595                0.016        NaN #> C14        4.7         14              0.671                0.028        NaN #> C15        4.7         15              0.608                0.023        NaN #> C16        4.7         16              0.553                0.013        NaN #> C13        4.7         13              0.444                0.010        NaN #> C05        4.4          5              0.682                0.034        NaN #> C04        4.4          4              0.558                0.015        NaN #> C06        4.4          6              0.632                0.018        NaN #> C07        4.4          7              0.295                0.006        NaN #> C28        4.5         28              0.622                0.021        NaN #> C29        4.5         29              0.639                0.019        NaN #> C30        4.5         30              0.597                0.013        NaN #> C31        4.5         31              0.638                0.015        NaN #> C68        4.8         68              0.641                0.025        NaN #> C67        4.8         67              0.603                0.017        NaN #> C69        4.8         69              0.601                0.018        NaN #> C66        4.8         66              0.489                0.007        NaN #> C09        4.2          9              0.667                0.026        NaN #> C08        4.2          8              0.000                0.003        NaN #> C10        4.2         10              0.621                0.017        NaN #> C11        4.2         11              0.627                0.018        NaN #> C35        4.9         35              0.667                0.026        NaN #> C36        4.9         36              0.348                0.007        NaN #> C34        4.9         34              0.587                0.012        NaN #> C33        4.9         33              0.596                0.011        NaN #> C59        4.1         59              0.674                0.019        NaN #> C58        4.1         58              0.515                0.008        NaN #> C60        4.1         60              0.638                0.013        NaN #> C61        4.1         61              0.403                0.005        NaN #> C55       3.11         55              0.667                0.039        NaN #> C56       3.11         56              0.467                0.011        NaN #> C57       3.11         57              0.439                0.007        NaN #> C75        3.3         75              0.651                0.028        NaN #> C74        3.3         74              0.457                0.009        NaN #> C73        3.3         73              0.603                0.015        NaN #> C27       3.12         27              0.680                0.021        NaN #> C26       3.12         26              0.572                0.012        NaN #> C25       3.12         25              0.667                0.010        NaN #> C02        3.2          2              0.709                0.026        NaN #> C03        3.2          3              0.148                0.005        NaN #> C01        3.2          1              0.659                0.009        NaN #> C37       1.37         37              0.653                0.016        NaN #> C12       1.12         12              0.584                0.014        NaN #> C71       1.71         71              0.680                0.013        NaN #> C64       1.64         64              0.883                0.012        NaN #> C70       1.70         70              0.551                0.011        NaN #> C17       1.17         17              0.581                0.009        NaN #> C32       1.32         32              0.000                0.003        NaN #> C46       1.46         46              0.000                0.003        NaN #> C18       1.18         18              0.000                0.002        NaN #> C24       1.24         24              0.000                0.002        NaN #> C38       1.38         38              0.000                0.002        NaN #> C65       1.65         65              0.000                0.002        NaN #> C72       1.72         72              0.000                0.002        NaN #> C20       1.20         20              0.000                0.001        NaN #> C39       1.39         39              0.000                0.001        NaN #> C40       1.40         40              0.000                0.001        NaN #> C41       1.41         41              0.000                0.001        NaN #> C42       1.42         42              0.000                0.001        NaN #> C62       1.62         62              0.000                0.001        NaN #> C63       1.63         63              0.000                0.001        NaN #> C19       1.19         19              0.000                0.000        NaN #> C21       1.21         21              0.000                0.000        NaN #> C22       1.22         22              0.000                0.000        NaN #> C23       1.23         23              0.000                0.000        NaN #> C43       1.43         43              0.000                0.000        NaN #> C44       1.44         44              0.000                0.000        NaN #> C45       1.45         45              0.000                0.000        NaN #>     1: Nodes 1: Max.path 1: share.of.total 2: Segment 2: within.mobility #> C77        1           0             0.031         10              0.722 #> C76        1           0             0.011         10              0.722 #> C78        1           0             0.013         NA                 NA #> C80        1           0             0.036         11              0.843 #> C79        1           0             0.017         11              0.843 #> C49        1           0             0.040          7              0.728 #> C50        1           0             0.007          7              0.728 #> C54        1           0             0.025         15              0.692 #> C53        1           0             0.015         15              0.692 #> C52        1           0             0.018         NA                 NA #> C48        1           0             0.011         NA                 NA #> C47        1           0             0.017         NA                 NA #> C51        1           0             0.016         NA                 NA #> C14        1           0             0.028          6              0.771 #> C15        1           0             0.023          6              0.771 #> C16        1           0             0.013         NA                 NA #> C13        1           0             0.010         NA                 NA #> C05        1           0             0.034         13              0.765 #> C04        1           0             0.015         13              0.765 #> C06        1           0             0.018         NA                 NA #> C07        1           0             0.006         NA                 NA #> C28        1           0             0.021         14              0.751 #> C29        1           0             0.019         14              0.751 #> C30        1           0             0.013         NA                 NA #> C31        1           0             0.015         NA                 NA #> C68        1           0             0.025         12              0.754 #> C67        1           0             0.017         12              0.754 #> C69        1           0             0.018         NA                 NA #> C66        1           0             0.007         NA                 NA #> C09        1           0             0.026          1              0.709 #> C08        1           0             0.003          1              0.709 #> C10        1           0             0.017         NA                 NA #> C11        1           0             0.018         NA                 NA #> C35        1           0             0.026          4              0.721 #> C36        1           0             0.007          4              0.721 #> C34        1           0             0.012         NA                 NA #> C33        1           0             0.011         NA                 NA #> C59        1           0             0.019          2              0.752 #> C58        1           0             0.008          2              0.752 #> C60        1           0             0.013         NA                 NA #> C61        1           0             0.005         NA                 NA #> C55        1           0             0.039          8              0.748 #> C56        1           0             0.011          8              0.748 #> C57        1           0             0.007         NA                 NA #> C75        1           0             0.028          5              0.731 #> C74        1           0             0.009          5              0.731 #> C73        1           0             0.015         NA                 NA #> C27        1           0             0.021          9              0.761 #> C26        1           0             0.012          9              0.761 #> C25        1           0             0.010         NA                 NA #> C02        1           0             0.026          3              0.736 #> C03        1           0             0.005          3              0.736 #> C01        1           0             0.009         NA                 NA #> C37        1           0             0.016         NA                 NA #> C12        1           0             0.014         NA                 NA #> C71        1           0             0.013         NA                 NA #> C64        1           0             0.012         NA                 NA #> C70        1           0             0.011         NA                 NA #> C17        1           0             0.009         NA                 NA #> C32        1           0             0.003         NA                 NA #> C46        1           0             0.003         NA                 NA #> C18        1           0             0.002         NA                 NA #> C24        1           0             0.002         NA                 NA #> C38        1           0             0.002         NA                 NA #> C65        1           0             0.002         NA                 NA #> C72        1           0             0.002         NA                 NA #> C20        1           0             0.001         NA                 NA #> C39        1           0             0.001         NA                 NA #> C40        1           0             0.001         NA                 NA #> C41        1           0             0.001         NA                 NA #> C42        1           0             0.001         NA                 NA #> C62        1           0             0.001         NA                 NA #> C63        1           0             0.001         NA                 NA #> C19        1           0             0.000         NA                 NA #> C21        1           0             0.000         NA                 NA #> C22        1           0             0.000         NA                 NA #> C23        1           0             0.000         NA                 NA #> C43        1           0             0.000         NA                 NA #> C44        1           0             0.000         NA                 NA #> C45        1           0             0.000         NA                 NA #>     2: share.of.mobility 2: Density 2: Nodes 2: Max.path 2: share.of.total #> C77                0.042          1        2           1             0.042 #> C76                0.042          1        2           1             0.042 #> C78                   NA         NA       NA          NA                NA #> C80                0.053          1        2           1             0.053 #> C79                0.053          1        2           1             0.053 #> C49                0.047          1        2           1             0.047 #> C50                0.047          1        2           1             0.047 #> C54                0.040          1        2           1             0.040 #> C53                0.040          1        2           1             0.040 #> C52                   NA         NA       NA          NA                NA #> C48                   NA         NA       NA          NA                NA #> C47                   NA         NA       NA          NA                NA #> C51                   NA         NA       NA          NA                NA #> C14                0.051          1        2           1             0.051 #> C15                0.051          1        2           1             0.051 #> C16                   NA         NA       NA          NA                NA #> C13                   NA         NA       NA          NA                NA #> C05                0.049          1        2           1             0.049 #> C04                0.049          1        2           1             0.049 #> C06                   NA         NA       NA          NA                NA #> C07                   NA         NA       NA          NA                NA #> C28                0.040          1        2           1             0.040 #> C29                0.040          1        2           1             0.040 #> C30                   NA         NA       NA          NA                NA #> C31                   NA         NA       NA          NA                NA #> C68                0.042          1        2           1             0.042 #> C67                0.042          1        2           1             0.042 #> C69                   NA         NA       NA          NA                NA #> C66                   NA         NA       NA          NA                NA #> C09                0.030          1        2           1             0.030 #> C08                0.030          1        2           1             0.030 #> C10                   NA         NA       NA          NA                NA #> C11                   NA         NA       NA          NA                NA #> C35                0.033          1        2           1             0.033 #> C36                0.033          1        2           1             0.033 #> C34                   NA         NA       NA          NA                NA #> C33                   NA         NA       NA          NA                NA #> C59                0.027          1        2           1             0.027 #> C58                0.027          1        2           1             0.027 #> C60                   NA         NA       NA          NA                NA #> C61                   NA         NA       NA          NA                NA #> C55                0.050          1        2           1             0.050 #> C56                0.050          1        2           1             0.050 #> C57                   NA         NA       NA          NA                NA #> C75                0.037          1        2           1             0.037 #> C74                0.037          1        2           1             0.037 #> C73                   NA         NA       NA          NA                NA #> C27                0.034          1        2           1             0.034 #> C26                0.034          1        2           1             0.034 #> C25                   NA         NA       NA          NA                NA #> C02                0.031          1        2           1             0.031 #> C03                0.031          1        2           1             0.031 #> C01                   NA         NA       NA          NA                NA #> C37                   NA         NA       NA          NA                NA #> C12                   NA         NA       NA          NA                NA #> C71                   NA         NA       NA          NA                NA #> C64                   NA         NA       NA          NA                NA #> C70                   NA         NA       NA          NA                NA #> C17                   NA         NA       NA          NA                NA #> C32                   NA         NA       NA          NA                NA #> C46                   NA         NA       NA          NA                NA #> C18                   NA         NA       NA          NA                NA #> C24                   NA         NA       NA          NA                NA #> C38                   NA         NA       NA          NA                NA #> C65                   NA         NA       NA          NA                NA #> C72                   NA         NA       NA          NA                NA #> C20                   NA         NA       NA          NA                NA #> C39                   NA         NA       NA          NA                NA #> C40                   NA         NA       NA          NA                NA #> C41                   NA         NA       NA          NA                NA #> C42                   NA         NA       NA          NA                NA #> C62                   NA         NA       NA          NA                NA #> C63                   NA         NA       NA          NA                NA #> C19                   NA         NA       NA          NA                NA #> C21                   NA         NA       NA          NA                NA #> C22                   NA         NA       NA          NA                NA #> C23                   NA         NA       NA          NA                NA #> C43                   NA         NA       NA          NA                NA #> C44                   NA         NA       NA          NA                NA #> C45                   NA         NA       NA          NA                NA #>     3: Segment 3: within.mobility 3: share.of.mobility 3: Density 3: Nodes #> C77         13              0.785                0.055  1.0000000        3 #> C76         13              0.785                0.055  1.0000000        3 #> C78         13              0.785                0.055  1.0000000        3 #> C80         NA                 NA                   NA         NA       NA #> C79         NA                 NA                   NA         NA       NA #> C49         10              0.805                0.058  1.0000000        3 #> C50         10              0.805                0.058  1.0000000        3 #> C54          8              0.778                0.058  1.0000000        3 #> C53          8              0.778                0.058  1.0000000        3 #> C52          8              0.778                0.058  1.0000000        3 #> C48         10              0.805                0.058  1.0000000        3 #> C47         NA                 NA                   NA         NA       NA #> C51         NA                 NA                   NA         NA       NA #> C14          4              0.832                0.064  1.0000000        3 #> C15          4              0.832                0.064  1.0000000        3 #> C16          4              0.832                0.064  1.0000000        3 #> C13         NA                 NA                   NA         NA       NA #> C05          6              0.857                0.067  1.0000000        3 #> C04          6              0.857                0.067  1.0000000        3 #> C06          6              0.857                0.067  1.0000000        3 #> C07         NA                 NA                   NA         NA       NA #> C28         14              0.818                0.054  1.0000000        3 #> C29         14              0.818                0.054  1.0000000        3 #> C30         14              0.818                0.054  1.0000000        3 #> C31         NA                 NA                   NA         NA       NA #> C68          5              0.833                0.060  1.0000000        3 #> C67          5              0.833                0.060  1.0000000        3 #> C69          5              0.833                0.060  1.0000000        3 #> C66         NA                 NA                   NA         NA       NA #> C09          1              0.814                0.047  1.0000000        3 #> C08          1              0.814                0.047  1.0000000        3 #> C10          1              0.814                0.047  1.0000000        3 #> C11         NA                 NA                   NA         NA       NA #> C35          7              0.817                0.045  1.0000000        3 #> C36          7              0.817                0.045  1.0000000        3 #> C34          7              0.817                0.045  1.0000000        3 #> C33         NA                 NA                   NA         NA       NA #> C59          9              0.838                0.039  1.0000000        3 #> C58          9              0.838                0.039  1.0000000        3 #> C60          9              0.838                0.039  1.0000000        3 #> C61         NA                 NA                   NA         NA       NA #> C55         11              0.792                0.057  1.0000000        3 #> C56         11              0.792                0.057  1.0000000        3 #> C57         11              0.792                0.057  1.0000000        3 #> C75          3              0.803                0.053  1.0000000        3 #> C74          3              0.803                0.053  1.0000000        3 #> C73          3              0.803                0.053  1.0000000        3 #> C27         12              0.835                0.043  1.0000000        3 #> C26         12              0.835                0.043  1.0000000        3 #> C25         12              0.835                0.043  1.0000000        3 #> C02          2              0.856                0.040  0.8333333        3 #> C03          2              0.856                0.040  0.8333333        3 #> C01          2              0.856                0.040  0.8333333        3 #> C37         NA                 NA                   NA         NA       NA #> C12         NA                 NA                   NA         NA       NA #> C71         NA                 NA                   NA         NA       NA #> C64         NA                 NA                   NA         NA       NA #> C70         NA                 NA                   NA         NA       NA #> C17         NA                 NA                   NA         NA       NA #> C32         NA                 NA                   NA         NA       NA #> C46         NA                 NA                   NA         NA       NA #> C18         NA                 NA                   NA         NA       NA #> C24         NA                 NA                   NA         NA       NA #> C38         NA                 NA                   NA         NA       NA #> C65         NA                 NA                   NA         NA       NA #> C72         NA                 NA                   NA         NA       NA #> C20         NA                 NA                   NA         NA       NA #> C39         NA                 NA                   NA         NA       NA #> C40         NA                 NA                   NA         NA       NA #> C41         NA                 NA                   NA         NA       NA #> C42         NA                 NA                   NA         NA       NA #> C62         NA                 NA                   NA         NA       NA #> C63         NA                 NA                   NA         NA       NA #> C19         NA                 NA                   NA         NA       NA #> C21         NA                 NA                   NA         NA       NA #> C22         NA                 NA                   NA         NA       NA #> C23         NA                 NA                   NA         NA       NA #> C43         NA                 NA                   NA         NA       NA #> C44         NA                 NA                   NA         NA       NA #> C45         NA                 NA                   NA         NA       NA #>     3: Max.path 3: share.of.total 4: Segment 4: within.mobility #> C77           1             0.055         10              0.901 #> C76           1             0.055         10              0.901 #> C78           1             0.055         10              0.901 #> C80          NA                NA         10              0.901 #> C79          NA                NA         10              0.901 #> C49           1             0.058          3              0.862 #> C50           1             0.058          3              0.862 #> C54           1             0.058          6              0.818 #> C53           1             0.058          6              0.818 #> C52           1             0.058          6              0.818 #> C48           1             0.058          3              0.862 #> C47          NA                NA          3              0.862 #> C51          NA                NA          6              0.818 #> C14           1             0.064          7              0.867 #> C15           1             0.064          7              0.867 #> C16           1             0.064          7              0.867 #> C13          NA                NA          7              0.867 #> C05           1             0.067          4              0.879 #> C04           1             0.067          4              0.879 #> C06           1             0.067          4              0.879 #> C07          NA                NA          4              0.879 #> C28           1             0.054          5              0.857 #> C29           1             0.054          5              0.857 #> C30           1             0.054          5              0.857 #> C31          NA                NA          5              0.857 #> C68           1             0.060          8              0.865 #> C67           1             0.060          8              0.865 #> C69           1             0.060          8              0.865 #> C66          NA                NA          8              0.865 #> C09           1             0.047          2              0.864 #> C08           1             0.047          2              0.864 #> C10           1             0.047          2              0.864 #> C11          NA                NA          2              0.864 #> C35           1             0.045          9              0.859 #> C36           1             0.045          9              0.859 #> C34           1             0.045          9              0.859 #> C33          NA                NA          9              0.859 #> C59           1             0.039          1              0.869 #> C58           1             0.039          1              0.869 #> C60           1             0.039          1              0.869 #> C61          NA                NA          1              0.869 #> C55           1             0.057         NA                 NA #> C56           1             0.057         NA                 NA #> C57           1             0.057         NA                 NA #> C75           1             0.053         NA                 NA #> C74           1             0.053         NA                 NA #> C73           1             0.053         NA                 NA #> C27           1             0.043         NA                 NA #> C26           1             0.043         NA                 NA #> C25           1             0.043         NA                 NA #> C02           2             0.040         NA                 NA #> C03           2             0.040         NA                 NA #> C01           2             0.040         NA                 NA #> C37          NA                NA         NA                 NA #> C12          NA                NA         NA                 NA #> C71          NA                NA         NA                 NA #> C64          NA                NA         NA                 NA #> C70          NA                NA         NA                 NA #> C17          NA                NA         NA                 NA #> C32          NA                NA         NA                 NA #> C46          NA                NA         NA                 NA #> C18          NA                NA         NA                 NA #> C24          NA                NA         NA                 NA #> C38          NA                NA         NA                 NA #> C65          NA                NA         NA                 NA #> C72          NA                NA         NA                 NA #> C20          NA                NA         NA                 NA #> C39          NA                NA         NA                 NA #> C40          NA                NA         NA                 NA #> C41          NA                NA         NA                 NA #> C42          NA                NA         NA                 NA #> C62          NA                NA         NA                 NA #> C63          NA                NA         NA                 NA #> C19          NA                NA         NA                 NA #> C21          NA                NA         NA                 NA #> C22          NA                NA         NA                 NA #> C23          NA                NA         NA                 NA #> C43          NA                NA         NA                 NA #> C44          NA                NA         NA                 NA #> C45          NA                NA         NA                 NA #>     4: share.of.mobility 4: Density 4: Nodes 4: Max.path 4: share.of.total #> C77                0.109  0.7000000        5           2             0.109 #> C76                0.109  0.7000000        5           2             0.109 #> C78                0.109  0.7000000        5           2             0.109 #> C80                0.109  0.7000000        5           2             0.109 #> C79                0.109  0.7000000        5           2             0.109 #> C49                0.075  0.8333333        4           2             0.075 #> C50                0.075  0.8333333        4           2             0.075 #> C54                0.075  0.8333333        4           2             0.075 #> C53                0.075  0.8333333        4           2             0.075 #> C52                0.075  0.8333333        4           2             0.075 #> C48                0.075  0.8333333        4           2             0.075 #> C47                0.075  0.8333333        4           2             0.075 #> C51                0.075  0.8333333        4           2             0.075 #> C14                0.074  0.8333333        4           2             0.074 #> C15                0.074  0.8333333        4           2             0.074 #> C16                0.074  0.8333333        4           2             0.074 #> C13                0.074  0.8333333        4           2             0.074 #> C05                0.073  0.8333333        4           2             0.073 #> C04                0.073  0.8333333        4           2             0.073 #> C06                0.073  0.8333333        4           2             0.073 #> C07                0.073  0.8333333        4           2             0.073 #> C28                0.069  0.8333333        4           2             0.069 #> C29                0.069  0.8333333        4           2             0.069 #> C30                0.069  0.8333333        4           2             0.069 #> C31                0.069  0.8333333        4           2             0.069 #> C68                0.068  0.8333333        4           2             0.068 #> C67                0.068  0.8333333        4           2             0.068 #> C69                0.068  0.8333333        4           2             0.068 #> C66                0.068  0.8333333        4           2             0.068 #> C09                0.065  0.8333333        4           2             0.065 #> C08                0.065  0.8333333        4           2             0.065 #> C10                0.065  0.8333333        4           2             0.065 #> C11                0.065  0.8333333        4           2             0.065 #> C35                0.056  0.8333333        4           2             0.056 #> C36                0.056  0.8333333        4           2             0.056 #> C34                0.056  0.8333333        4           2             0.056 #> C33                0.056  0.8333333        4           2             0.056 #> C59                0.044  0.8333333        4           2             0.044 #> C58                0.044  0.8333333        4           2             0.044 #> C60                0.044  0.8333333        4           2             0.044 #> C61                0.044  0.8333333        4           2             0.044 #> C55                   NA         NA       NA          NA                NA #> C56                   NA         NA       NA          NA                NA #> C57                   NA         NA       NA          NA                NA #> C75                   NA         NA       NA          NA                NA #> C74                   NA         NA       NA          NA                NA #> C73                   NA         NA       NA          NA                NA #> C27                   NA         NA       NA          NA                NA #> C26                   NA         NA       NA          NA                NA #> C25                   NA         NA       NA          NA                NA #> C02                   NA         NA       NA          NA                NA #> C03                   NA         NA       NA          NA                NA #> C01                   NA         NA       NA          NA                NA #> C37                   NA         NA       NA          NA                NA #> C12                   NA         NA       NA          NA                NA #> C71                   NA         NA       NA          NA                NA #> C64                   NA         NA       NA          NA                NA #> C70                   NA         NA       NA          NA                NA #> C17                   NA         NA       NA          NA                NA #> C32                   NA         NA       NA          NA                NA #> C46                   NA         NA       NA          NA                NA #> C18                   NA         NA       NA          NA                NA #> C24                   NA         NA       NA          NA                NA #> C38                   NA         NA       NA          NA                NA #> C65                   NA         NA       NA          NA                NA #> C72                   NA         NA       NA          NA                NA #> C20                   NA         NA       NA          NA                NA #> C39                   NA         NA       NA          NA                NA #> C40                   NA         NA       NA          NA                NA #> C41                   NA         NA       NA          NA                NA #> C42                   NA         NA       NA          NA                NA #> C62                   NA         NA       NA          NA                NA #> C63                   NA         NA       NA          NA                NA #> C19                   NA         NA       NA          NA                NA #> C21                   NA         NA       NA          NA                NA #> C22                   NA         NA       NA          NA                NA #> C23                   NA         NA       NA          NA                NA #> C43                   NA         NA       NA          NA                NA #> C44                   NA         NA       NA          NA                NA #> C45                   NA         NA       NA          NA                NA"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"visualizzazione-della-rete-ridotta","dir":"Articles","previous_headings":"5. Integrazione con il Workflow MONECA","what":"5.3 Visualizzazione della rete ridotta","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Visualizza la rete al primo livello di segmentazione plot_moneca_ggraph(   seg_reduced,   level = 1,   layout = \"fr\",   node_color = \"segment\",   node_size = \"mobility\",   show_labels = FALSE,  # Troppe etichette con 80 nodi   title = \"Rete di MobilitÃ  dopo Riduzione della DensitÃ  (Livello 1)\" )"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"visualizzazione-dendrogramma","dir":"Articles","previous_headings":"5. Integrazione con il Workflow MONECA","what":"5.4 Visualizzazione dendrogramma","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Dendrogramma gerarchico plot_moneca_dendrogram(   seg_reduced,   label_size = 2.5,   title = \"Struttura Gerarchica dei Segmenti\" )"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"quando-usare-reduce_density-1","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri","what":"6.1 Quando usare reduce_density()","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Utilizzare reduce_density() quando: La matrice ha 60+ categorie La densitÃ  Ã¨ elevata (molte celle non-zero, sparsitÃ  < 60-70%) Molte celle hanno conteggi bassi (< 10) che rappresentano rumore statistico Lâ€™analisi MONECA diretta produce cluster instabili o troppo frammentati Lâ€™analisi MONECA Ã¨ computazionalmente troppo lenta causa del numero di connessioni Non utilizzare reduce_density() quando: La matrice ha meno di 30 categorie (lâ€™algoritmo standard funziona bene) La matrice Ã¨ giÃ  molto sparsa (poche celle non-zero, tutte con conteggi robusti) Si vuole preservare esattamente ogni singola osservazione","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"scelta-del-metodo-svd-vs-nmf","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri","what":"6.2 Scelta del metodo: SVD vs NMF","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Entrambi metodi ora utilizzano un approccio di filtraggio che preserva valori originali delle celle significative.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"quando-usare-svd","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.2 Scelta del metodo: SVD vs NMF","what":"6.2.1 Quando usare SVD","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Vantaggi: PiÃ¹ veloce (importante per matrici molto grandi) Selezione automatica di k basata su varianza spiegata Metriche chiare (varianza spiegata) Implementazione efficiente con irlba Preserva valori originali dei conteggi (approccio filtro) Svantaggi: La ricostruzione puÃ² produrre valori negativi (corretti pre-processing per il calcolo della soglia) Componenti possono essere meno interpretabili rispetto NMF Raccomandazione: utilizzare SVD come metodo di default per la maggior parte dei casi.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"quando-usare-nmf","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.2 Scelta del metodo: SVD vs NMF","what":"6.2.2 Quando usare NMF","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Vantaggi: Preserva valori originali dei conteggi (approccio filtro, come SVD) Componenti interpretabili come pattern latenti di mobilitÃ  Vincolo di non-negativitÃ  naturale per dati di conteggio Il parametro filter_quantile puÃ² essere regolato per controllare la selezione Svantaggi: PiÃ¹ lenta (ottimizzazione iterativa) Richiede seed per riproducibilitÃ  Nessuna metrica diretta di varianza spiegata Richiede il pacchetto RcppML Raccomandazione: utilizzare NMF quando lâ€™interpretabilitÃ  delle componenti latenti Ã¨ importante, o quando si lavora con dati dove il vincolo di non-negativitÃ  Ã¨ teoricamente rilevante.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"regolazione-del-filter_quantile-entrambi-i-metodi","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.2 Scelta del metodo: SVD vs NMF","what":"6.2.3 Regolazione del filter_quantile (entrambi i metodi)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Il parametro filter_quantile controlla quante celle vengono mantenute. Si applica sia SVD che NMF: Valori piÃ¹ alti (es. 0.80-0.90) mantengono piÃ¹ celle, riducono meno il rumore Valori piÃ¹ bassi (es. 0.50-0.70) mantengono meno celle, rimozione piÃ¹ aggressiva del rumore \"auto\" (default) seleziona il quantile basandosi sul punto di gomito dei valori di ricostruzione","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"normalization-none-default","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.3 Scelta della normalizzazione","what":"6.3.1 normalization = \"none\" (default)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando usare: La matrice Ã¨ ragionevolmente bilanciata Non ci sono grandi differenze nelle dimensioni marginali Si vogliono preservare le frequenze assolute Consigliata come prima scelta per la maggior parte delle applicazioni.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"normalization-pearson","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.3 Scelta della normalizzazione","what":"6.3.2 normalization = \"pearson\"","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando usare: Le distribuzioni marginali sono molto eterogenee (alcune classi molto piÃ¹ grandi di altre) Si vuole standardizzare per effetti di dimensione Si vogliono identificare deviazioni dal modello di indipendenza Attenzione: puÃ² amplificare il rumore celle con conteggi attesi bassi.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"normalization-ppmi","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.3 Scelta della normalizzazione","what":"6.3.3 normalization = \"ppmi\"","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando usare: Si vogliono enfatizzare connessioni â€œsorprendentiâ€ rispetto al caso La mobilitÃ  assoluta Ã¨ meno importante della mobilitÃ  relativa Si lavora con matrici molto sparse Attenzione: elimina informazioni sulle frequenze assolute; utile per enfatizzare pattern strutturali.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"selezione-automatica-k-auto","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.4 Scelta del numero di componenti (k)","what":"6.4.1 Selezione automatica (k = \"auto\")","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Vantaggi: Bilancia varianza spiegata e parsimonia Usa sia il criterio della varianza target che il rilevamento del gomito Adatta per esplorazioni iniziali Parametro chiave: variance_target 0.60-0.70: riduzione aggressiva, mantiene solo strutture molto dominanti 0.75 (default): buon compromesso per la maggior parte dei casi 0.80-0.90: riduzione conservativa, preserva piÃ¹ dettaglio Raccomandazione: iniziare con k = \"auto\" e variance_target = 0.75, poi esplorare visualizzando lo scree plot.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"selezione-manuale","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.4 Scelta del numero di componenti (k)","what":"6.4.2 Selezione manuale","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando specificare k manualmente: Dopo aver esaminato lo scree plot Per NMF (dove la varianza spiegata non Ã¨ disponibile) Quando si ha conoscenza priori del numero appropriato di dimensioni latenti Linee guida per k: Matrici 60-100 categorie: tipicamente k = 15-25 Matrici 100-200 categorie: tipicamente k = 20-35 Regola empirica: k â‰ˆ 20-30% del numero di categorie originali","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"nessuna-soglia-threshold-null","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.5 Uso della soglia (threshold)","what":"6.5.1 Nessuna soglia (threshold = NULL)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Default raccomandato: lasciare che la riduzione dimensionale faccia il suo lavoro senza post-processing aggiuntivo.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"soglia-automatica-threshold-auto","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.5 Uso della soglia (threshold)","what":"6.5.2 Soglia automatica (threshold = \"auto\")","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Quando usare: La matrice ricostruita contiene ancora molti valori molto bassi Si vuole aumentare ulteriormente la sparsitÃ  cluster MONECA risultano troppo densi Effetto: rimuove valori sotto media + 1 SD.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"soglia-personalizzata","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri > 6.5 Uso della soglia (threshold)","what":"6.5.3 Soglia personalizzata","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Tipo \"sd\": threshold = 0.5: rimozione conservativa threshold = 1.0: rimozione moderata threshold = 1.5-2.0: rimozione aggressiva Tipo \"percentile\": threshold = 10-20: mantiene valori sopra il 10-20Â° percentile threshold = 25: mantiene il 75% dei valori piÃ¹ alti threshold = 50: mantiene solo la metÃ  superiore Raccomandazione: esplorare prima senza soglia; applicare solo se necessario dopo ispezione dei risultati.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"workflow-esplorativo-consigliato","dir":"Articles","previous_headings":"6. Guida alla Scelta dei Parametri","what":"6.6 Workflow esplorativo consigliato","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# 1. Visualizza lo scree plot per capire la struttura della varianza plot_scree(large_data, max_components = 40, variance_target = 0.75)  # 2. Prova la riduzione base con parametri di default reduced_default <- reduce_density(   large_data,   method = \"svd\",   k = \"auto\",   verbose = TRUE,   seed = 42 )  # 3. Confronta con target di varianza diversi reduced_conservative <- reduce_density(   large_data,   variance_target = 0.85,   verbose = TRUE,   seed = 42 )  # 4. Prova normalizzazioni diverse se le distribuzioni marginali sono problematiche reduced_ppmi <- reduce_density(   large_data,   normalization = \"ppmi\",   verbose = TRUE,   seed = 42 )  # 5. Esegui MONECA su ciascuna versione e confronta la qualitÃ  seg_default <- moneca(reduced_default, segment.levels = 3) seg_conservative <- moneca(reduced_conservative, segment.levels = 3) seg_ppmi <- moneca(reduced_ppmi, segment.levels = 3)  # 6. Confronta le metriche di qualitÃ  quality_default <- segment.quality(seg_default) quality_conservative <- segment.quality(seg_conservative) quality_ppmi <- segment.quality(seg_ppmi)"},{"path":[]},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"package-rcppml-is-required-for-nmf","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.1 â€œPackage â€˜RcppMLâ€™ is required for NMFâ€","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: si Ã¨ scelto method = \"nmf\" ma il pacchetto RcppML non Ã¨ installato. Soluzione:","code":"install.packages(\"RcppML\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"risultati-non-riproducibili-con-nmf","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.2 Risultati non riproducibili con NMF","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: eseguendo due volte la stessa chiamata con NMF si ottengono risultati leggermente diversi. Causa: NMF usa inizializzazione casuale. Soluzione: specificare sempre lâ€™argomento seed:","code":"reduced <- reduce_density(large_data, method = \"nmf\", k = 20, seed = 42)"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"b-nmf-mantiene-troppe-o-troppo-poche-celle","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.2b NMF mantiene troppe o troppo poche celle","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: con il metodo NMF, la percentuale di celle mantenute Ã¨ troppo alta (poco filtraggio) o troppo bassa (perdita eccessiva di dati). Causa: il parametro filter_quantile automatico potrebbe non essere ottimale per dati specifici. Soluzioni:","code":"# Se troppo poche celle mantenute, aumenta filter_quantile reduced <- reduce_density(large_data, method = \"nmf\", k = 20,                           filter_quantile = 0.85,  # Mantieni piÃ¹ celle                           seed = 42)  # Se troppe celle mantenute (poco filtraggio), riduci filter_quantile reduced <- reduce_density(large_data, method = \"nmf\", k = 20,                           filter_quantile = 0.50,  # Filtraggio piÃ¹ aggressivo                           seed = 42)  # Verifica il quantile effettivamente utilizzato cat(\"Filter quantile:\", attr(reduced, \"filter_quantile\"), \"\\n\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"riduzione-troppo-aggressiva-troppe-osservazioni-perse","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.3 Riduzione troppo aggressiva (troppe osservazioni perse)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: la percentuale di osservazioni mantenute Ã¨ troppo bassa (< 80%). Possibili cause: k troppo basso (troppo poche componenti) variance_target troppo basso Normalizzazione inadeguata per dati Soluzioni:","code":"# Aumenta il target di varianza reduced <- reduce_density(large_data, variance_target = 0.85)  # Oppure specifica k manualmente piÃ¹ alto reduced <- reduce_density(large_data, k = 30)  # Oppure prova senza normalizzazione reduced <- reduce_density(large_data, normalization = \"none\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"riduzione-troppo-conservativa-poca-riduzione-del-rumore","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.4 Riduzione troppo conservativa (poca riduzione del rumore)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: la matrice ridotta Ã¨ ancora troppo simile â€™originale, con molto rumore residuo. Soluzioni:","code":"# Riduci il target di varianza reduced <- reduce_density(large_data, variance_target = 0.65)  # Oppure applica una soglia reduced <- reduce_density(large_data, threshold = \"auto\")  # Oppure usa PPMI per enfatizzare pattern strutturali reduced <- reduce_density(large_data, normalization = \"ppmi\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"cluster-moneca-instabili-dopo-riduzione","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.1 Problemi comuni","what":"7.1.5 Cluster MONECA instabili dopo riduzione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Problema: lâ€™analisi MONECA sulla matrice ridotta produce cluster inconsistenti o poco interpretabili. Possibili cause: Riduzione troppo aggressiva ha rimosso strutture importanti Parametri di riduzione non adatti ai dati small.cell.reduction moneca() troppo alto o troppo basso Soluzioni:","code":"# Prova riduzione piÃ¹ conservativa reduced <- reduce_density(large_data, variance_target = 0.85)  # Aggiusta small.cell.reduction in moneca() seg <- moneca(reduced, small.cell.reduction = 100)  # Valore piÃ¹ basso  # Prova normalizzazione diversa reduced <- reduce_density(large_data, normalization = \"pearson\")"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"confronta-distribuzioni-marginali","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.2 Validazione dei risultati","what":"7.2.1 Confronta distribuzioni marginali","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Confronta totali di riga prima e dopo original_row_totals <- large_data[1:80, 81] reduced_row_totals <- reduced[1:80, 81]  cor(original_row_totals, reduced_row_totals)  # Dovrebbe essere > 0.95  # Visualizza plot(original_row_totals, reduced_row_totals,      xlab = \"Totali originali\",      ylab = \"Totali ridotti\",      main = \"Confronto totali di riga\") abline(0, 1, col = \"red\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"confronta-struttura-di-correlazione","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.2 Validazione dei risultati","what":"7.2.2 Confronta struttura di correlazione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Calcola matrici di correlazione cor_original <- cor(large_data[1:80, 1:80]) cor_reduced <- cor(reduced[1:80, 1:80])  # Confronta cor(as.vector(cor_original), as.vector(cor_reduced))  # Dovrebbe essere alto"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"confronta-risultati-moneca","dir":"Articles","previous_headings":"7. Diagnosi e Risoluzione Problemi > 7.2 Validazione dei risultati","what":"7.2.3 Confronta risultati MONECA","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Analizza sia originale che ridotta seg_original <- moneca(large_data, segment.levels = 3) seg_reduced <- moneca(reduced, segment.levels = 3)  # Confronta qualitÃ  quality_original <- segment.quality(seg_original) quality_reduced <- segment.quality(seg_reduced)  # Confronta membership # (richiede analisi piÃ¹ dettagliata della concordanza tra segmentazioni)"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"assunzioni-sottostanti","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni","what":"8.1 Assunzioni sottostanti","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La riduzione della densitÃ  tramite SVD o NMF assume che: La matrice di mobilitÃ  ha una struttura basso rango: pattern di mobilitÃ  sono generati da un numero limitato di dimensioni latenti sottostanti. Il rumore Ã¨ additivo e relativamente omogeneo: le fluttuazioni casuali sono sovrapposte ai pattern sistematici. Le prime componenti catturano segnale, le ultime catturano rumore: questa assunzione Ã¨ generalmente valida ma non sempre garantita.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"perdita-di-informazione","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.2 Limitazioni","what":"8.2.1 Perdita di informazione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La riduzione dimensionale comporta sempre perdita di informazione. Anche con variance_target = 0.90, il 10% della variabilitÃ  originale viene scartato. Se questa variabilitÃ  contiene pattern sostantivi piuttosto che rumore, lâ€™analisi successiva puÃ² essere compromessa.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"arrotondamento","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.2 Limitazioni","what":"8.2.2 Arrotondamento","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La ricostruzione produce valori continui che vengono arrotondati interi per compatibilitÃ  con MONECA. Lâ€™arrotondamento introduce ulteriori approssimazioni e puÃ² alterare sottilmente la struttura della matrice.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"modificazione-delle-distribuzioni-marginali","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.2 Limitazioni","what":"8.2.3 Modificazione delle distribuzioni marginali","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Sebbene il processo cerchi di preservare totali marginali attraverso il rescaling, le distribuzioni marginali possono essere alterate, specialmente con riduzione aggressiva o normalizzazioni non-triviali.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"sensibilitÃ -ai-parametri","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.2 Limitazioni","what":"8.2.4 SensibilitÃ  ai parametri","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"risultati dipendono dalle scelte di: Metodo (SVD vs NMF) Normalizzazione Numero di componenti (k) Soglia Non esiste un insieme di parametri â€œottimaleâ€ universale; la scelta dipende dai dati specifici e dagli obiettivi analitici.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"validazione-raccomandata","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni","what":"8.3 Validazione raccomandata","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Prima di procedere con lâ€™analisi MONECA completa su dati ridotti: Confronta statistiche descrittive (totali, medie, varianze) tra matrice originale e ridotta Visualizza lo scree plot per valutare se k Ã¨ appropriato Esamina la percentuale di osservazioni mantenute (idealmente > 85%) Confronta risultati MONECA tra versioni con parametri di riduzione diversi Verifica la stabilitÃ  dei cluster identificati","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"aggregazione-a-priori","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.4 Alternative e complementi","what":"8.4.1 Aggregazione a priori","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Se le categorie hanno una struttura gerarchica nota (es. professioni ISCO diversi livelli di dettaglio), aggregare priori un livello piÃ¹ grossolano puÃ² essere preferibile alla riduzione dimensionale.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"selezione-di-sottoinsiemi","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.4 Alternative e complementi","what":"8.4.2 Selezione di sottoinsiemi","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Se solo un sottoinsieme di categorie Ã¨ di interesse sostantivo, escludere priori le categorie irrilevanti puÃ² ridurre la complessitÃ  senza le approssimazioni della riduzione dimensionale.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"uso-combinato","dir":"Articles","previous_headings":"8. Considerazioni Teoriche e Limitazioni > 8.4 Alternative e complementi","what":"8.4.3 Uso combinato","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"reduce_density() puÃ² essere usata insieme queste alternative: Aggregare prima un livello medio-grossolano (es. 100 â†’ 60 categorie) Applicare reduce_density() al risultato (60 â†’ riduzione basso rango) Procedere con MONECA","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"metodi-matematici","dir":"Articles","previous_headings":"9. Riferimenti e Approfondimenti","what":"9.1 Metodi matematici","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Singular Value Decomposition (SVD): Golub, G. H., & Van Loan, C. F. (2013). Matrix Computations (4th ed.). Johns Hopkins University Press. Halko, N., Martinsson, P. G., & Tropp, J. . (2011). Finding structure randomness: Probabilistic algorithms constructing approximate matrix decompositions. SIAM Review, 53(2), 217-288. Non-negative Matrix Factorization (NMF): Lee, D. D., & Seung, H. S. (1999). Learning parts objects non-negative matrix factorization. Nature, 401(6755), 788-791. DeBruine, Z. J., Melcher, K., & Triche, T. J. (2021). Fast robust non-negative matrix factorization single-cell experiments. arXiv preprint arXiv:2104.00166. Positive Pointwise Mutual Information (PPMI): Church, K. W., & Hanks, P. (1990). Word association norms, mutual information, lexicography. Computational Linguistics, 16(1), 22-29. Bullinaria, J. ., & Levy, J. P. (2007). Extracting semantic representations word co-occurrence statistics: computational study. Behavior Research Methods, 39(3), 510-526.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"applicazioni-alla-mobilitÃ -sociale","dir":"Articles","previous_headings":"9. Riferimenti e Approfondimenti","what":"9.2 Applicazioni alla mobilitÃ  sociale","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Analisi di matrici di mobilitÃ : Touboel, J., & Larsen, . G. (2017). Mobility Network Clustering Analysis. Research Social Stratification Mobility (Vol. 47). Dimensionality reduction mobility research: Breen, R. (Ed.). (2004). Social Mobility Europe. Oxford University Press. Erikson, R., & Goldthorpe, J. H. (1992). Constant Flux: Study Class Mobility Industrial Societies. Clarendon Press.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"pacchetti-r-utilizzati","dir":"Articles","previous_headings":"9. Riferimenti e Approfondimenti","what":"9.3 Pacchetti R utilizzati","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Core computational packages: irlba: Baglama, J., & Reichel, L. (2005). Augmented implicitly restarted Lanczos bidiagonalization methods. SIAM Journal Scientific Computing, 27(1), 19-42. RcppML: DeBruine, Z. J. (2021). RcppML: Rcpp Machine Learning Library. R package. Visualization: ggplot2: Wickham, H. (2016). ggplot2: Elegant Graphics Data Analysis. Springer-Verlag New York. ggraph: Pedersen, T. L. (2021). ggraph: Implementation Grammar Graphics Graphs Networks. R package.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"conclusioni","dir":"Articles","previous_headings":"","what":"10. Conclusioni","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La funzione reduce_density() rappresenta un utile strumento di preprocessing per lâ€™analisi MONECA di matrici di mobilitÃ  di grandi dimensioni. La riduzione dimensionale tramite SVD o NMF permette di: Filtrare il rumore statistico preservando pattern dominanti di mobilitÃ  Migliorare la scalabilitÃ  computazionale dellâ€™analisi Facilitare lâ€™identificazione di cluster stabili e interpretabili Raccomandazioni finali: Utilizzare reduce_density() per matrici con 60+ categorie caratterizzate da sparsitÃ  e rumore Iniziare con parametri di default (method = \"svd\", k = \"auto\", variance_target = 0.75) Esplorare lo scree plot prima di scegliere k manualmente Validare risultati confrontando con la matrice originale Documentare parametri utilizzati per garantire riproducibilitÃ  Lâ€™integrazione di reduce_density() nel workflow MONECA estende lâ€™applicabilitÃ  dellâ€™algoritmo contesti con granularitÃ  molto elevata, mantenendo lâ€™interpretabilitÃ  e lâ€™efficacia dellâ€™approccio basato su cliques.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"definizione-di-isolato","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA","what":"11.1 Definizione di isolato","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"MONECA, un isolato Ã¨ una categoria occupazionale che non appartiene nessun segmento multi-membro al livello finale della segmentazione. Sono le categorie â€œrimaste fuoriâ€ dal processo di clustering basato su cliques.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"definizione-matematica","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA > 11.1 Definizione di isolato","what":"11.1.1 Definizione matematica","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"MONECA costruisce una rete pesata dove: nodi sono le categorie occupazionali Gli archi collegano categorie con rischio relativo (RR) >= cut.(default 1) segmenti sono identificati come cliques (sottografi completi) questa rete. Una clique Ã¨ un insieme di nodi dove ogni nodo Ã¨ connesso tutti gli altri. Un nodo diventa isolato quando: âˆ€ clique C nel grafo:vâˆ‰C oppure |C|=1\\forall \\text{ clique } C \\text{ nel grafo}: v \\notin C \\text{ oppure } |C| = 1 altre parole, la categoria non fa parte di nessuna clique di dimensione maggiore di 1.","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"come-vengono-gestiti-gli-isolati-nellalgoritmo","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA > 11.1 Definizione di isolato","what":"11.1.2 Come vengono gestiti gli isolati nellâ€™algoritmo","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Durante la discesa gerarchica, lâ€™algoritmo rimuove segmenti di dimensione 1: Con il parametro isolates = TRUE moneca_fast(), Ã¨ possibile ottenere informazioni dettagliate sugli isolati:","code":"# Dal codice interno di moneca_fast level.down.fast <- function(level.current, level.below) {   # Remove isolates   lengths <- lengths(level.current)   level.current <- level.current[lengths > 1]   # ... } seg <- moneca_fast(mobility_matrix,                    segment.levels = 3,                    isolates = TRUE)  # Membership con isolati etichettati come \"altri\" print(seg$isolates_summary$membership)  # Matrice di mobilitÃ  aggregata tra segmenti e \"altri\" print(seg$isolates_summary$mobility_matrix)"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"cause-dellisolamento","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA","what":"11.2 Cause dellâ€™isolamento","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Una categoria puÃ² diventare isolata per tre ragioni principali:","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"pattern-disperso","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA > 11.2 Cause dellâ€™isolamento","what":"11.2.1 Pattern disperso","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La categoria ha mobilitÃ  distribuita uniformemente verso molte destinazioni, senza preferenze marcate.","code":"# Esempio: categoria con mobilitÃ  dispersa cat(\"Esempio di pattern DISPERSO:\\n\") #> Esempio di pattern DISPERSO: cat(\"   Freelance -> Manager:     18 (RR â‰ˆ 1.0)   Freelance -> Impiegato:   20 (RR â‰ˆ 1.0)   Freelance -> Tecnico:     22 (RR â‰ˆ 1.0)   Freelance -> Operaio:     15 (RR â‰ˆ 1.0)    Nessuna destinazione ha RR significativamente > 1   â†’ Nessun arco forte â†’ Nessuna clique â†’ ISOLATO \") #>  #>   Freelance -> Manager:     18 (RR â‰ˆ 1.0) #>   Freelance -> Impiegato:   20 (RR â‰ˆ 1.0) #>   Freelance -> Tecnico:     22 (RR â‰ˆ 1.0) #>   Freelance -> Operaio:     15 (RR â‰ˆ 1.0) #>  #>   Nessuna destinazione ha RR significativamente > 1 #>   â†’ Nessun arco forte â†’ Nessuna clique â†’ ISOLATO"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"pattern-atipico-non-reciproco","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA > 11.2 Cause dellâ€™isolamento","what":"11.2.2 Pattern atipico (non reciproco)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La categoria ha forte mobilitÃ  verso una destinazione, ma questa non ricambia.","code":"cat(\"Esempio di pattern ATIPICO:\\n\") #> Esempio di pattern ATIPICO: cat(\"   Artista -> Cameriere:  RR = 3.5 (mobilitÃ  alta)   Cameriere -> Artista:  RR = 0.4 (mobilitÃ  bassa)    Con symmetric = TRUE:   Arco finale = (3.5 + 0.4) / 2 = 1.95    Ma Cameriere forma clique con Cuoco, Barista (non con Artista)   â†’ Artista rimane ISOLATO \") #>  #>   Artista -> Cameriere:  RR = 3.5 (mobilitÃ  alta) #>   Cameriere -> Artista:  RR = 0.4 (mobilitÃ  bassa) #>  #>   Con symmetric = TRUE: #>   Arco finale = (3.5 + 0.4) / 2 = 1.95 #>  #>   Ma Cameriere forma clique con Cuoco, Barista (non con Artista) #>   â†’ Artista rimane ISOLATO"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"alta-immobilitÃ -pattern-periferico","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA > 11.2 Cause dellâ€™isolamento","what":"11.2.3 Alta immobilitÃ  (pattern periferico)","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La categoria ha altissima immobilitÃ  (diagonale grande), con poche transizioni esterne che si disperdono.","code":"cat(\"Esempio di pattern PERIFERICO:\\n\") #> Esempio di pattern PERIFERICO: cat(\"   Agricoltore: 93% immobilitÃ  (200 su 215 restano)    Solo 15 uscite totali:   Agricoltore -> A: 4 (osservato << atteso â†’ RR = 0.07)   Agricoltore -> B: 6 (osservato << atteso â†’ RR = 0.08)   Agricoltore -> C: 5 (osservato << atteso â†’ RR = 0.08)    Grado = 0 nel grafo â†’ completamente ISOLATO \") #>  #>   Agricoltore: 93% immobilitÃ  (200 su 215 restano) #>  #>   Solo 15 uscite totali: #>   Agricoltore -> A: 4 (osservato << atteso â†’ RR = 0.07) #>   Agricoltore -> B: 6 (osservato << atteso â†’ RR = 0.08) #>   Agricoltore -> C: 5 (osservato << atteso â†’ RR = 0.08) #>  #>   Grado = 0 nel grafo â†’ completamente ISOLATO"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"ruolo-indiretto-della-diagonale","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA","what":"11.3 Ruolo indiretto della diagonale","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La diagonale (immobilitÃ ) non crea direttamente archi nel grafo - viene sempre impostata NA nella matrice dei pesi: Tuttavia, la diagonale influisce indirettamente sui rischi relativi attraverso marginali: Atteso(,j)=marginale_rigaiÃ—marginale_colonnajtotale2Ã—mobilitÃ _totale\\text{Atteso}(,j) = \\frac{\\text{marginale\\_riga}_i \\times \\text{marginale\\_colonna}_j}{\\text{totale}^2} \\times \\text{mobilitÃ \\_totale} Con alta immobilitÃ : Marginale di riga alto (include la diagonale) Valori attesi -diagonale piÃ¹ alti RR = osservato/atteso piÃ¹ bassi Meno probabilitÃ  di archi nel grafo","code":"# Dal codice di weight.matrix() if (is.null(diagonal)) {   diag(mx.1i) <- NA }"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-pratico-con-dati-simulati","dir":"Articles","previous_headings":"11. Categorie Isolate in MONECA","what":"11.4 Esempio pratico con dati simulati","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"library(moneca)  # Creare matrice con struttura nota mob <- matrix(c(   # A      B      C      Z     Tot    300,   180,   120,     5,    605,  # A - clique con B,C    170,   350,   160,     8,    688,  # B - clique con A,C    115,   155,   280,     6,    556,  # C - clique con A,B      4,     6,     5,   200,    215,  # Z - alta immobilitÃ , disperso    589,   691,   565,   219,   2064   # Tot ), nrow = 5, byrow = TRUE)  rownames(mob) <- colnames(mob) <- c(\"A\", \"B\", \"C\", \"Z\", \"Tot\")  cat(\"Matrice di mobilitÃ :\\n\") #> Matrice di mobilitÃ : print(mob) #>       A   B   C   Z  Tot #> A   300 180 120   5  605 #> B   170 350 160   8  688 #> C   115 155 280   6  556 #> Z     4   6   5 200  215 #> Tot 589 691 565 219 2064  cat(\"\\nTassi di immobilitÃ :\\n\") #>  #> Tassi di immobilitÃ : for(i in 1:4) {   immob <- mob[i,i] / mob[i, 5] * 100   cat(sprintf(\"  %s: %.1f%%\\n\", rownames(mob)[i], immob)) } #>   A: 49.6% #>   B: 50.9% #>   C: 50.4% #>   Z: 93.0% # Calcolare la matrice dei rischi relativi wm <- weight.matrix(mob, cut.off = 1, symmetric = TRUE) cat(\"\\nMatrice dei rischi relativi (RR >= 1):\\n\") #>  #> Matrice dei rischi relativi (RR >= 1): print(round(wm, 2)) #>      A    B    C  Z #> A   NA 1.75 1.45 NA #> B 1.75   NA 1.68 NA #> C 1.45 1.68   NA NA #> Z   NA   NA   NA NA  cat(\"\\nInterpretazione:\\n\") #>  #> Interpretazione: cat(\"- A, B, C sono tutti connessi tra loro (clique)\\n\") #> - A, B, C sono tutti connessi tra loro (clique) cat(\"- Z non ha archi con nessuno (tutti NA) â†’ ISOLATO\\n\") #> - Z non ha archi con nessuno (tutti NA) â†’ ISOLATO # Eseguire MONECA con tracciamento isolati seg <- moneca_fast(mob, segment.levels = 2, progress = FALSE, isolates = TRUE)  cat(\"\\nSegmenti al livello 2:\\n\") #>  #> Segmenti al livello 2: names_vec <- c(\"A\", \"B\", \"C\", \"Z\") for(i in seq_along(seg$segment.list[[2]])) {   members <- names_vec[seg$segment.list[[2]][[i]]]   if(length(members) > 1) {     cat(sprintf(\"  Segmento %d: [%s]\\n\", i, paste(members, collapse = \", \")))   } } #>   Segmento 1: [A, B, C]  cat(\"\\nZ Ã¨ isolato perchÃ©:\\n\") #>  #> Z Ã¨ isolato perchÃ©: cat(\"  1. ImmobilitÃ  93% (200/215)\\n\") #>   1. ImmobilitÃ  93% (200/215) cat(\"  2. Solo 15 uscite, distribuite uniformemente\\n\") #>   2. Solo 15 uscite, distribuite uniformemente cat(\"  3. RR verso tutte le destinazioni << 1\\n\") #>   3. RR verso tutte le destinazioni << 1 cat(\"  4. Grado 0 nel grafo â†’ non puÃ² formare clique\\n\") #>   4. Grado 0 nel grafo â†’ non puÃ² formare clique"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"il-problema-rumore-e-archi-spuri","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione","what":"12.1 Il problema: rumore e archi spuri","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Nelle matrici di mobilitÃ  reali, specialmente quelle di grandi dimensioni, il rumore statistico puÃ² creare connessioni spurie nel grafo: Questo problema Ã¨ particolarmente grave quando: Molte celle hanno pochi conteggi (alta varianza) La matrice Ã¨ densa (molte celle non-zero) gruppi â€œveriâ€ sono collegati da transizioni casuali","code":"Rumore nei dati â†’ RR > 1 per caso â†’ Arco spurio â†’ Clique spuria â†’ Segmentazione errata"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"come-la-riduzione-di-densitÃ -migliora-la-segmentazione","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione","what":"12.2 Come la riduzione di densitÃ  migliora la segmentazione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La funzione reduce_density() interviene prima del calcolo dei rischi relativi, azzerando le celle considerate rumore:","code":"Matrice originale â†’ reduce_density() â†’ Matrice pulita â†’ weight.matrix() â†’ Grafo â†’ MONECA"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"meccanismo-matematico","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione > 12.2 Come la riduzione di densitÃ  migliora la segmentazione","what":"12.2.2 Meccanismo matematico","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Celle di rumore azzerate: transizioni rare/casuali â†’ 0 RR non calcolabile: se numeratore = 0, la cella non contribuisce Nessun arco spurio: connessioni casuali rimosse Cliques piÃ¹ pure: solo categorie con mobilitÃ  strutturale reciproca","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"esempio-comparativo","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione","what":"12.3 Esempio comparativo","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"set.seed(42)  # Creare matrice con 3 gruppi + rumore n <- 12 pattern_matrix <- matrix(0, n, n)  # Gruppo A (1-4): alta mobilitÃ  interna pattern_matrix[1:4, 1:4] <- matrix(c(   80, 35, 30, 25,   32, 75, 28, 22,   28, 30, 70, 20,   22, 20, 18, 65 ), 4, 4, byrow = TRUE)  # Gruppo B (5-8): alta mobilitÃ  interna pattern_matrix[5:8, 5:8] <- matrix(c(   70, 28, 25, 18,   25, 65, 30, 15,   22, 28, 60, 20,   15, 12, 18, 55 ), 4, 4, byrow = TRUE)  # Gruppo C (9-12): alta mobilitÃ  interna pattern_matrix[9:12, 9:12] <- matrix(c(   60, 22, 20, 15,   20, 55, 25, 12,   18, 22, 50, 18,   12, 10, 15, 45 ), 4, 4, byrow = TRUE)  # Aggiungere RUMORE tra i gruppi noise <- matrix(rpois(n*n, lambda = 3), n, n) noise[1:4, 1:4] <- 0 noise[5:8, 5:8] <- 0 noise[9:12, 9:12] <- 0  noisy_matrix <- pattern_matrix + noise diag(noisy_matrix) <- diag(noisy_matrix) + sample(40:80, n)  # Costruire matrice completa row_tots <- rowSums(noisy_matrix) col_tots <- colSums(noisy_matrix) full_matrix <- rbind(   cbind(noisy_matrix, row_tots),   c(col_tots, sum(noisy_matrix)) )  group_names <- c(paste0(\"A\", 1:4), paste0(\"B\", 1:4), paste0(\"C\", 1:4)) rownames(full_matrix) <- colnames(full_matrix) <- c(group_names, \"Tot\")  cat(\"Struttura attesa:\\n\") #> Struttura attesa: cat(\"  Gruppo A: A1, A2, A3, A4\\n\") #>   Gruppo A: A1, A2, A3, A4 cat(\"  Gruppo B: B1, B2, B3, B4\\n\") #>   Gruppo B: B1, B2, B3, B4 cat(\"  Gruppo C: C1, C2, C3, C4\\n\") #>   Gruppo C: C1, C2, C3, C4 # Analisi SENZA riduzione wm_original <- weight.matrix(full_matrix, cut.off = 1, symmetric = TRUE) n_edges_original <- sum(!is.na(wm_original)) / 2  seg_original <- moneca_fast(full_matrix, segment.levels = 3, progress = FALSE)  # Analisi CON riduzione reduced_matrix <- reduce_density(full_matrix,                                   method = \"svd\",                                   k = 3,                                   filter_quantile = 0.6,                                   verbose = FALSE,                                   seed = 42)  wm_reduced <- weight.matrix(reduced_matrix, cut.off = 1, symmetric = TRUE) n_edges_reduced <- sum(!is.na(wm_reduced)) / 2  seg_reduced <- moneca_fast(reduced_matrix, segment.levels = 3, progress = FALSE)  cat(sprintf(\"Archi nel grafo (originale): %d\\n\", n_edges_original)) #> Archi nel grafo (originale): 18 cat(sprintf(\"Archi nel grafo (ridotto):   %d\\n\", n_edges_reduced)) #> Archi nel grafo (ridotto):   18 cat(sprintf(\"Riduzione: %.1f%%\\n\", 100 * (1 - n_edges_reduced / n_edges_original))) #> Riduzione: 0.0% # Funzione per valutare purezza dei segmenti evaluate_purity <- function(seg, names_vec) {   level2 <- seg$segment.list[[2]]   results <- list()    for(i in seq_along(level2)) {     members <- names_vec[level2[[i]]]     if(length(members) > 1) {       groups <- unique(substr(members, 1, 1))       purity <- if(length(groups) == 1) \"puro\" else \"misto\"       results[[length(results) + 1]] <- list(         members = members,         groups = groups,         purity = purity       )     }   }   return(results) }  cat(\"\\nSegmenti al livello 2 - ORIGINALE:\\n\") #>  #> Segmenti al livello 2 - ORIGINALE: orig_segs <- evaluate_purity(seg_original, group_names) for(s in orig_segs) {   status <- if(s$purity == \"puro\") \"[OK]\" else \"[MIX]\"   cat(sprintf(\"  %s [%s] (gruppi: %s)\\n\",               status,               paste(s$members, collapse = \", \"),               paste(s$groups, collapse = \", \"))) } #>   [OK] [C1, C2, C3, C4] (gruppi: C) #>   [OK] [B1, B2, B3, B4] (gruppi: B) #>   [OK] [A1, A2, A3, A4] (gruppi: A)  cat(\"\\nSegmenti al livello 2 - RIDOTTO:\\n\") #>  #> Segmenti al livello 2 - RIDOTTO: red_segs <- evaluate_purity(seg_reduced, group_names) for(s in red_segs) {   status <- if(s$purity == \"puro\") \"[OK]\" else \"[MIX]\"   cat(sprintf(\"  %s [%s] (gruppi: %s)\\n\",               status,               paste(s$members, collapse = \", \"),               paste(s$groups, collapse = \", \"))) } #>   [OK] [C1, C2, C3, C4] (gruppi: C) #>   [OK] [B1, B2, B3, B4] (gruppi: B) #>   [OK] [A1, A2, A3, A4] (gruppi: A)  # Calcolare purezza complessiva purity_orig <- sum(sapply(orig_segs, function(x) x$purity == \"puro\")) / length(orig_segs) purity_red <- sum(sapply(red_segs, function(x) x$purity == \"puro\")) / length(red_segs)  cat(sprintf(\"\\nPurezza segmenti (originale): %.0f%%\\n\", 100 * purity_orig)) #>  #> Purezza segmenti (originale): 100% cat(sprintf(\"Purezza segmenti (ridotto):   %.0f%%\\n\", 100 * purity_red)) #> Purezza segmenti (ridotto):   100%"},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"quando-applicare-la-riduzione","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione > 12.4 Raccomandazioni pratiche","what":"12.4.1 Quando applicare la riduzione","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"La riduzione di densitÃ  Ã¨ particolarmente utile quando: Matrici grandi (60+ categorie) con molte celle rumorose Segmenti â€œmistiâ€ nellâ€™analisi iniziale (categorie di gruppi diversi insieme) Troppi archi nel grafo dei rischi relativi Pochi isolati quando ci si aspetterebbe di piÃ¹","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"parametri-consigliati","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione > 12.4 Raccomandazioni pratiche","what":"12.4.2 Parametri consigliati","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Configurazione conservativa (preserva piÃ¹ struttura) reduced <- reduce_density(mx,                           method = \"svd\",                           variance_target = 0.85,                           filter_quantile = 0.75)  # Configurazione aggressiva (rimuove piÃ¹ rumore) reduced <- reduce_density(mx,                           method = \"svd\",                           variance_target = 0.70,                           filter_quantile = 0.50)  # Per matrici molto dense reduced <- reduce_density(mx,                           method = \"svd\",                           variance_target = 0.75,                           filter_quantile = 0.60,                           threshold = \"auto\")"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"validazione-dei-risultati-1","dir":"Articles","previous_headings":"12. Impatto della Riduzione di DensitÃ  sulla Segmentazione > 12.4 Raccomandazioni pratiche","what":"12.4.3 Validazione dei risultati","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Confrontare sempre: Numero di segmenti prima e dopo la riduzione Purezza dei segmenti (se si conosce la struttura attesa) Numero di isolati (dovrebbe aumentare se il rumore collegava gruppi) StabilitÃ  (risultati simili con parametri leggermente diversi)","code":""},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"appendice-a-codice-completo-per-analisi-esempio","dir":"Articles","previous_headings":"","what":"Appendice A: Codice Completo per Analisi Esempio","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"","code":"# Carica librerie library(moneca) library(ggplot2)  # 1. Genera dati di grandi dimensioni large_data <- generate_mobility_data(   n_classes = 80,   n_total = 100000,   immobility_strength = 0.65,   class_clustering = 0.25,   seed = 123 )  # 2. Visualizza scree plot plot_scree(large_data, max_components = 40, variance_target = 0.75)  # 3. Applica riduzione della densitÃ  reduced <- reduce_density(   large_data,   method = \"svd\",   normalization = \"none\",   k = \"auto\",   variance_target = 0.75,   threshold = NULL,   verbose = TRUE,   seed = 42 )  # 4. Analisi MONECA seg <- moneca(   reduced,   segment.levels = 3,   small.cell.reduction = 200 )  # 5. Valuta qualitÃ  quality <- segment.quality(seg) print(quality)  # 6. Visualizza rete plot_moneca_ggraph(   seg,   level = 1,   layout = \"fr\",   node_color = \"segment\",   node_size = \"mobility\",   show_labels = FALSE,   title = \"Rete di MobilitÃ  Ridotta - Livello 1\" )  # 7. Visualizza dendrogramma plot_moneca_dendrogram(   seg,   label_size = 2.5,   title = \"Struttura Gerarchica\" )  # 8. Estrai membership membership <- segment.membership.dataframe(seg) head(membership)"},{"path":"https://gmontaletti.github.io/MONECA/articles/reduce_density_guida_it.html","id":"appendice-b-glossario","dir":"Articles","previous_headings":"","what":"Appendice B: Glossario","title":"Riduzione della DensitÃ  per Matrici di MobilitÃ  di Grandi Dimensioni","text":"Clique: sottografo completo cui ogni coppia di nodi Ã¨ connessa da un arco. MONECA identifica cliques come cluster di posizioni con elevata mobilitÃ  interna. Componente: direzione di variazione nella decomposizione matriciale. Le prime componenti catturano pattern dominanti. DensitÃ : proporzione di celle non-zero una matrice. Matrici sparse hanno bassa densitÃ . Elbow point (punto di gomito): punto un grafico varianza-componenti dove il beneficio marginale di aggiungere componenti diminuisce bruscamente. Fattorizzazione: decomposizione di una matrice nel prodotto di matrici piÃ¹ semplici. Filter quantile: parametro di entrambi metodi (SVD e NMF) che controlla la proporzione di celle da mantenere basandosi sui valori di ricostruzione. Valori piÃ¹ alti mantengono piÃ¹ celle; la selezione automatica usa il rilevamento del gomito (elbow detection). ImmobilitÃ : permanenza nella stessa categoria tra due osservazioni. Rappresentata dalla diagonale della matrice di mobilitÃ . Alta immobilitÃ  puÃ² contribuire â€™isolamento di una categoria. Isolato: categoria che non appartiene nessun segmento multi-membro nella segmentazione MONECA. PuÃ² derivare da pattern disperso (mobilitÃ  uniforme), atipico (non reciproco), o periferico (alta immobilitÃ  con poche uscite). Matrice core: matrice di mobilitÃ  escludendo riga e colonna dei totali marginali. Normalizzazione: trasformazione dei dati per rimuovere effetti sistematici o rendere confrontabili scale diverse. Rango: dimensione dello spazio generato dalle righe (o colonne) di una matrice. Approssimazione basso rango mantiene solo le direzioni piÃ¹ importanti. Residui: differenza tra valori osservati e valori attesi sotto un modello di riferimento (es. indipendenza). Scree plot: grafico della varianza spiegata per componente, utilizzato per scegliere il numero di componenti. SparsitÃ : proporzione di celle zero una matrice. Complementare della densitÃ . SVD troncata: SVD mantenendo solo le prime k componenti, producendo unâ€™approssimazione basso rango. Valori singolari: elementi della matrice diagonale Î£ nella SVD, rappresentano lâ€™importanza delle componenti. Varianza spiegata: proporzione della variabilitÃ  totale catturata da un insieme di componenti. Arco spurio: connessione nel grafo dei rischi relativi creata dal rumore statistico piuttosto che da una vera relazione di mobilitÃ  strutturale. La riduzione di densitÃ  mira eliminare gli archi spuri. Purezza del segmento: misura di quanto un segmento identificato da MONECA corrisponda un gruppo â€œveroâ€ atteso. Un segmento puro contiene solo categorie dello stesso gruppo logico; un segmento misto contiene categorie di gruppi diversi. Rischio relativo (RR): rapporto tra mobilitÃ  osservata e mobilitÃ  attesa sotto indipendenza. RR > 1 indica mobilitÃ  sopra le aspettative; RR < 1 indica mobilitÃ  sotto le aspettative. Solo celle con RR >= cut.formano archi nel grafo MONECA.","code":""},{"path":"https://gmontaletti.github.io/MONECA/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Giampaolo Montaletti. Author, maintainer. Jonas Touboel. Author.           Original algorithm methodology Anton Grau Larsen. Contributor.           Original package development","code":""},{"path":"https://gmontaletti.github.io/MONECA/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Montaletti G, Touboel J (2026). moneca: Mobility Network Clustering Analysis. R package version 1.0.5, https://gmontaletti.github.io/MONECA/.","code":"@Manual{,   title = {moneca: Mobility Network Clustering Analysis},   author = {Giampaolo Montaletti and Jonas Touboel},   year = {2026},   note = {R package version 1.0.5},   url = {https://gmontaletti.github.io/MONECA/}, }"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"moneca-mobility-network-clustering-analysis","dir":"","previous_headings":"","what":"Mobility Network Clustering Analysis","title":"Mobility Network Clustering Analysis","text":"Author: Giampaolo Montaletti ORCID: https://orcid.org/0009-0002-5327-1122 Email: giampaolo.montaletti@gmail.com GitHub: https://github.com/gmontaletti moneca (Mobility Network Clustering Analysis) comprehensive R package analyzing social mobility patterns graph-theoretic approaches. package represents complete rewrite modernization original MONECA package, featuring entirely new visualization systems, synthetic data generation capabilities, comprehensive testing, modern R programming practices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"package-history","dir":"","previous_headings":"","what":"Package History","title":"Mobility Network Clustering Analysis","text":"moneca (lowercase, 2024-present) current package developed maintained Giampaolo Montaletti. implements core clustering algorithm originally proposed Touboel & Larsen, package features: Entirely new codebase visualization using ggraph tidygraph Original synthetic data generation system reproducible research Comprehensive test suite written scratch Modern documentation vignettes authored Giampaolo Montaletti Complete package infrastructure redesign modernization New analysis functions including enhanced membership analysis quality metrics Original MONECA (uppercase, 2017) Jonas Touboel Anton Grau Larsen provided: - core clustering algorithm mathematical methodology - Basic implementation segmentation approach - Original research theoretical foundation (Touboel & Larsen, 2017)","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"author-and-maintainer","dir":"","previous_headings":"","what":"Author and Maintainer","title":"Mobility Network Clustering Analysis","text":"Giampaolo Montaletti - Package author, developer, maintainer - Complete package modernization rewrite (2024) - Development modern visualization system - Creation synthetic data generation framework - Implementation comprehensive testing suite - Authorship current documentation vignettes","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"features","dir":"","previous_headings":"","what":"Features","title":"Mobility Network Clustering Analysis","text":"Network-based clustering mobility tables using graph theory Hierarchical segmentation multiple analytical levels Fast implementation moneca_fast() large datasets Auto-tuning capabilities automatic parameter optimization Modern visualization ggplot2 ggraph Synthetic data generation testing demonstrations Comprehensive testing suite documentation igraph compatibility layer supporting versions 1.3.0+","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Mobility Network Clustering Analysis","text":"","code":"# Install development version from GitHub install.packages(\"devtools\") library(devtools) install_github(\"gmontaletti/moneca\")  # Install dependencies install.packages(c(\"ggplot2\", \"ggraph\", \"igraph\", \"dplyr\", \"tidygraph\",                     \"RColorBrewer\", \"scales\", \"toOrdinal\"))"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"Mobility Network Clustering Analysis","text":"","code":"library(moneca)  # Generate synthetic mobility data mobility_data <- generate_mobility_data(   n_classes = 6,   n_total = 5000,   immobility_strength = 0.7,   class_clustering = 0.3,   seed = 123 )  # Run MONECA analysis seg <- moneca(mobility_data, segment.levels = 3) print(seg)  # Modern network visualization plot_moneca_ggraph(seg,                   node_color = \"segment\",                   title = \"Social Mobility Network\")  # Ego network analysis plot_ego_ggraph(seg, mobility_data, ego_id = 3)  # Analyze segment membership membership <- segment.membership(seg) print(membership)"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"core-functions","dir":"","previous_headings":"","what":"Core Functions","title":"Mobility Network Clustering Analysis","text":"streamlined moneca API includes 21 key functions organized functional groups:","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"core-analysis-functions","dir":"","previous_headings":"Core Functions","what":"Core Analysis Functions","title":"Mobility Network Clustering Analysis","text":"moneca() - Main clustering algorithm hierarchical segmentation moneca_fast() - Fast implementation large datasets (identical results) weight.matrix() - Convert mobility tables relative risk matrices","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"data-generation","dir":"","previous_headings":"Core Functions","what":"Data Generation","title":"Mobility Network Clustering Analysis","text":"generate_mobility_data() - Create synthetic mobility matrices testing","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"modern-visualization-ggraph-based","dir":"","previous_headings":"Core Functions","what":"Modern Visualization (ggraph-based)","title":"Mobility Network Clustering Analysis","text":"plot_moneca_ggraph() - Network visualization segment highlighting plot_ego_ggraph() - Ego network analysis visualization plot_stair_ggraph() - Multi-level hierarchical segmentation plots plot_moneca_dendrogram() - Dendrogram visualization hierarchical structure plot_segment_quality() - Quality assessment visualization","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"analysis-tools","dir":"","previous_headings":"Core Functions","what":"Analysis Tools","title":"Mobility Network Clustering Analysis","text":"segment.membership() - Extract segment membership level segment.membership.dataframe() - Membership data frame segment.quality() - Assess segmentation quality metrics segment.edges() - Extract edge weights segments segment.colors() - Get color assignments segments vertex.mobility() - Calculate vertex-level mobility metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"auto-tuning","dir":"","previous_headings":"Core Functions","what":"Auto-Tuning","title":"Mobility Network Clustering Analysis","text":"auto_tune_small_cell_reduction() - Automatic parameter optimization","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"legacy-visualization-backward-compatibility","dir":"","previous_headings":"Core Functions","what":"Legacy Visualization (backward compatibility)","title":"Mobility Network Clustering Analysis","text":"moneca.plot() - Base R network plotting gg.moneca() - Original ggplot2 visualization ego.plot() - Legacy ego network plot stair.plot() - Legacy stair plot layout.matrix() - Custom layout algorithm network positioning","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"fast-implementation","dir":"","previous_headings":"Advanced Usage","what":"Fast Implementation","title":"Mobility Network Clustering Analysis","text":"large datasets, use optimized implementation:","code":"# Fast implementation (identical results to standard moneca) seg_fast <- moneca_fast(mobility_data, segment.levels = 3)  # Works with all visualization and analysis functions plot_moneca_ggraph(seg_fast, node_color = \"segment\")"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"auto-tuning-1","dir":"","previous_headings":"Advanced Usage","what":"Auto-Tuning","title":"Mobility Network Clustering Analysis","text":"Automatically optimize small.cell.reduction parameter:","code":"# Use auto-tuning for parameter optimization seg_tuned <- moneca(mobility_data, segment.levels = 3, auto_tune = TRUE)  # Advanced: use auto_tune_small_cell_reduction() for more control tuning_result <- auto_tune_small_cell_reduction(mobility_data, segment.levels = 3) seg <- moneca(mobility_data,               segment.levels = 3,               small.cell.reduction = tuning_result$best_parameter)"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"enhanced-segment-naming","dir":"","previous_headings":"Advanced Usage","what":"Enhanced Segment Naming","title":"Mobility Network Clustering Analysis","text":"Improve visualization interpretability custom labels:","code":"# Create custom meaningful labels custom_labels <- data.frame(   name = c(\"Class 1\", \"Class 2\", \"Class 3\"),   segment_label = c(\"Executive\", \"Professional\", \"Technical\"),   stringsAsFactors = FALSE )  # Use in plotting functions plot_moneca_ggraph(seg,                   segment_naming = custom_labels,                   title = \"Occupational Mobility Network\")"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Mobility Network Clustering Analysis","text":"Vignette: See vignette(\"moneca-introduction\") comprehensive examples Function help: Use ?function_name detailed documentation Package overview: ?moneca general information","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"development-and-testing","dir":"","previous_headings":"","what":"Development and Testing","title":"Mobility Network Clustering Analysis","text":"package includes comprehensive test suite modern development practices:","code":"# Run tests devtools::test()  # Check package devtools::check()  # Build vignettes devtools::build_vignettes()"},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"methodology","dir":"","previous_headings":"","what":"Methodology","title":"Mobility Network Clustering Analysis","text":"MONECA implements sophisticated algorithm detecting mobility patterns: Mobility Matrix Processing: Converts raw mobility data relative risk matrices Network Construction: Creates weighted networks edges represent mobility flows Clique Detection: Identifies groups high internal connectivity using igraph Hierarchical Clustering: Iteratively aggregates positions nested segments Quality Assessment: Provides metrics evaluating segmentation quality","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Mobility Network Clustering Analysis","text":"use moneca research, please cite:","code":"# Current package: Montaletti, G. (2026). moneca: Mobility Network Clustering Analysis. R package version 1.0.5. https://github.com/gmontaletti/moneca  # Original algorithm and methodology: Touboel, J., & Larsen, A. G. (2017). Mapping the Social Class Structure: From Occupational Mobility to Social Class Categories Using Network Analysis. Sociology, 51(6), 1257-1276."},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Mobility Network Clustering Analysis","text":"GPL-3","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"credits","dir":"","previous_headings":"","what":"Credits","title":"Mobility Network Clustering Analysis","text":"Current Package (moneca): - Giampaolo Montaletti - Package author, developer, maintainer - Complete package rewrite modernization - current documentation vignettes - Modern visualization system (ggraph/tidygraph) - Synthetic data generation framework - Comprehensive testing suite Original Algorithm (MONECA): - Jonas Touboel - Original clustering algorithm mathematical methodology - Anton Grau Larsen - Original MONECA package implementation","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Mobility Network Clustering Analysis","text":"welcome contributions! Please see contributing guidelines : Fork repository Create feature branch Make changes tests Submit pull request","code":""},{"path":"https://gmontaletti.github.io/MONECA/index.html","id":"issues","dir":"","previous_headings":"","what":"Issues","title":"Mobility Network Clustering Analysis","text":"Report bugs feature requests : https://github.com/gmontaletti/moneca/issues","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/MONECA-package.html","id":null,"dir":"Reference","previous_headings":"","what":"moneca: Mobility Network Clustering Analysis â€” moneca-package","title":"moneca: Mobility Network Clustering Analysis â€” moneca-package","text":"moneca creates weighted networks mobility tables uses cliques identify discrete nested clusters social positions high internal mobility. package provides comprehensive tools analyzing social mobility patterns graph-theoretic approaches modern visualization capabilities.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/MONECA-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"moneca: Mobility Network Clustering Analysis â€” moneca-package","text":"moneca package implements sophisticated hierarchical clustering algorithm detects mobility patterns social networks. identifies segments high internal mobility finding cliques weighted network representations mobility data, creating nested hierarchical structures reveal underlying organization social mobility. Key Features: Network-based clustering using relative risk matrices Hierarchical segmentation multiple nested levels Modern visualization ggraph ggplot2 Synthetic data generation testing demonstrations Quality metrics assessing segmentation performance Multiple visualization types (network, ego, stair plots) Flexible input formats automatic data validation Core Functions: moneca: Main clustering algorithm find.segments: Core segmentation identification weight.matrix: Relative risk matrix calculation segment.membership: Extract cluster memberships Modern Visualization (Recommended): plot_moneca_ggraph: Network visualization ggraph plot_ego_ggraph: Ego network analysis plot_stair_ggraph: Multi-level segmentation plots Legacy Visualization (Backward Compatibility): gg.moneca: Original ggplot2-based visualization moneca.plot: Base R network plotting ego.plot: Legacy ego network plots stair.plot: Legacy stair plots Data Generation: generate_mobility_data: Create synthetic mobility tables","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/MONECA-package.html","id":"package-dependencies","dir":"Reference","previous_headings":"","what":"Package Dependencies","title":"moneca: Mobility Network Clustering Analysis â€” moneca-package","text":"Required packages: igraph (>= 1.3.0): Network analysis compatibility layer ggplot2 (>= 3.4.0): Graphics plotting RColorBrewer: Color palettes visualizations scales: Scale transformations formatting Modern visualization packages: ggraph (>= 2.0.0): Advanced network visualization tidygraph (>= 1.2.0): Tidy graph manipulation dplyr (>= 1.0.0): Data manipulation Additional packages: grid: Low-level graphics toOrdinal: Ordinal number formatting","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/MONECA-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"moneca: Mobility Network Clustering Analysis â€” moneca-package","text":"Maintainer: Giampaolo Montaletti giampaolo.montaletti@gmail.com (ORCID) Authors: Jonas Touboel jt@soc.ku.dk (Original algorithm methodology) contributors: Anton Grau Larsen agl.ioa@cbs.dk (Original package development) [contributor]","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_enhanced_pattern_rules.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Enhanced Pattern Rules for Segment Naming â€” apply_enhanced_pattern_rules","title":"Apply Enhanced Pattern Rules for Segment Naming â€” apply_enhanced_pattern_rules","text":"Advanced pattern recognition system uses weighted scoring, semantic analysis, intelligent fallbacks generate meaningful segment names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_enhanced_pattern_rules.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Enhanced Pattern Rules for Segment Naming â€” apply_enhanced_pattern_rules","text":"","code":"apply_enhanced_pattern_rules(node_names, pattern_rules, membership_id)"},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_enhanced_pattern_rules.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Enhanced Pattern Rules for Segment Naming â€” apply_enhanced_pattern_rules","text":"node_names Character vector node names segment pattern_rules Enhanced pattern rules create_enhanced_pattern_rules() membership_id Character string membership ID fallback naming","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_enhanced_pattern_rules.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Enhanced Pattern Rules for Segment Naming â€” apply_enhanced_pattern_rules","text":"Character string intelligently generated name, NULL pattern found","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Threshold to Matrix â€” apply_threshold","title":"Apply Threshold to Matrix â€” apply_threshold","text":"Sets values threshold zero.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Threshold to Matrix â€” apply_threshold","text":"","code":"apply_threshold(mx, threshold, threshold_type, verbose = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Threshold to Matrix â€” apply_threshold","text":"mx Matrix threshold threshold Threshold specification threshold_type Type threshold verbose Print progress","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/apply_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Threshold to Matrix â€” apply_threshold","text":"List matrix threshold_value","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"Evaluates stability MONECA clustering results given small.cell.reduction parameter using bootstrap resampling. stable parameters produce consistent clustering across data subsamples.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"","code":"assess_clustering_stability(   mx,   small.cell.reduction,   cut.off = 1,   n_bootstrap = 50,   sample_fraction = 0.8,   segment.levels = 3 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"mx Mobility matrix analysis. small.cell.reduction Small cell reduction parameter test. cut.Edge weight threshold network construction. Default 1. n_bootstrap Number bootstrap samples generate. Default 50. sample_fraction Fraction data use bootstrap sample. Default 0.8. segment.levels Number hierarchical levels clustering. Default 3.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"Numeric stability score 0 1, higher values   indicate stable clustering results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"function performs bootstrap resampling : 1. Creating multiple subsamples mobility matrix 2. Running MONECA clustering subsample 3. Extracting clustering signatures (segment memberships) 4. Computing stability metrics based clustering consistency stability score combines multiple measures including: - Consistency segment assignments across bootstrap samples - Stability hierarchical structure - Robustness clique detection","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assess Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability","text":"","code":"if (FALSE) { # \\dontrun{ # Generate sample data mobility_data <- generate_mobility_data(n_classes = 6, seed = 123)  # Assess stability for different parameters (uses default n_bootstrap = 50) stability_0 <- assess_clustering_stability(mobility_data,                                           small.cell.reduction = 0) stability_5 <- assess_clustering_stability(mobility_data,                                           small.cell.reduction = 5)  cat(\"Stability with parameter 0:\", stability_0, \"\\n\") cat(\"Stability with parameter 5:\", stability_5, \"\\n\")  # For more thorough assessment, increase n_bootstrap stability_thorough <- assess_clustering_stability(mobility_data,                                                   small.cell.reduction = 2,                                                   n_bootstrap = 100) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":null,"dir":"Reference","previous_headings":"","what":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"Parallel version assess_clustering_stability processes bootstrap samples concurrently significant performance improvements. Uses foreach/doParallel cross-platform compatibility.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"","code":"assess_clustering_stability_parallel(   mx,   small.cell.reduction,   cut.off = 1,   n_bootstrap = 50,   sample_fraction = 0.8,   segment.levels = 3,   n_cores = NULL,   parallel = TRUE,   seed = NULL,   verbose = FALSE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"mx Mobility matrix analysis. small.cell.reduction Small cell reduction parameter test. cut.Edge weight threshold network construction. Default 1. n_bootstrap Number bootstrap samples generate. Default 50. sample_fraction Fraction data use bootstrap sample. Default 0.8. segment.levels Number hierarchical levels clustering. Default 3. n_cores Number CPU cores use. NULL (default) uses available cores - 1. parallel Logical indicating whether use parallel processing. Default TRUE. seed Random seed reproducibility. Default NULL. verbose Logical indicating whether show progress messages. Default FALSE.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"Numeric stability score 0 1, higher values   indicate stable clustering results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"function parallelizes bootstrap sampling process: - Distributes bootstrap samples across available cores - core independently runs moneca_fast assigned samples - Results combined compute overall stability - Falls back sequential processing parallel packages unavailable Performance improvements: - 4 cores: ~3.5x faster sequential - 8 cores: ~6-7x faster sequential - Scales linearly number cores n_bootstrap","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/assess_clustering_stability_parallel.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parallel Assessment of Clustering Stability Using Bootstrap Resampling â€” assess_clustering_stability_parallel","text":"","code":"if (FALSE) { # \\dontrun{ # Generate sample data mobility_data <- generate_mobility_data(n_classes = 6, seed = 123)  # Parallel stability assessment (auto-detect cores, default n_bootstrap = 50) stability_parallel <- assess_clustering_stability_parallel(   mobility_data,   small.cell.reduction = 5,   parallel = TRUE )  # Sequential for comparison stability_seq <- assess_clustering_stability_parallel(   mobility_data,   small.cell.reduction = 5,   parallel = FALSE )  # For more thorough assessment, increase n_bootstrap stability_thorough <- assess_clustering_stability_parallel(   mobility_data,   small.cell.reduction = 5,   n_bootstrap = 100,   parallel = TRUE ) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"Automatically selects optimal small.cell.reduction parameter MONECA clustering using advanced optimization methods including Pareto frontier analysis, cross-validation, Bayesian optimization, performance-aware tuning. enhanced version provides significant speed improvements maintaining improving tuning quality.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"","code":"auto_tune_small_cell_reduction(   mx,   cut.off = 1,   method = \"quality\",   n_trials = 5,   candidate_values = NULL,   performance_weight = 0.3,   min_density = 0.01,   max_candidates = 20,   seed = NULL,   verbose = FALSE,   use_cache = TRUE,   parallel = \"auto\",   early_stopping = TRUE,   pareto_objectives = c(\"quality\", \"performance\"),   cv_folds = 5,   bayesian_iterations = 20 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"mx Mobility matrix analyze. Must square numeric matrix representing mobility flows categories. cut.Numeric threshold edge weights network construction. Default 1. method Character string specifying tuning strategy. Options : \"quality\" (default, RECOMMENDED): Fast clustering quality optimization (10x faster stability) \"stability\": Bootstrap-based stability assessment (thorough slower) \"performance\": Balance quality computational efficiency \"pareto\": Multi-objective optimization Pareto frontier analysis \"cross_validation\": Cross-validation based parameter selection \"bayesian\": Bayesian optimization (requires GPfit package) n_trials Integer number trials stability assessment CV folds. Default 5. Increase 10-20 thorough assessment cost speed. candidate_values Numeric vector candidate values test. NULL, values generated automatically using data-driven methods. performance_weight Numeric weight (0-1) performance vs quality trade-. Higher values prioritize speed quality. Default 0.3. min_density Minimum acceptable network density threshold. Default 0.01. max_candidates Maximum number candidate values evaluate computational efficiency. Default 20. seed Integer seed reproducible results bootstrap sampling. Default NULL. verbose Logical indicating whether show progress messages. Default FALSE. use_cache Logical indicating whether use caching repeated computations. Default TRUE. parallel Character logical indicating parallel processing preference. Can \"auto\" (default, intelligent switching), TRUE/FALSE (force parallel/sequential), \"parallel\"/\"sequential\" explicit control. early_stopping Logical indicating whether use early stopping candidate screening. Default TRUE. pareto_objectives Character vector objectives Pareto optimization. Default c(\"quality\", \"performance\"). cv_folds Integer number cross-validation folds. Default 5. bayesian_iterations Integer number Bayesian optimization iterations. Default 20.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"list containing: optimal_value Recommended small.cell.reduction parameter value stability_scores Stability assessment results candidate quality_metrics Clustering quality metrics candidate performance_metrics Computational performance metrics candidates_tested Vector candidate values evaluated tuning_method Method used parameter selection selection_rationale Text explanation parameter selection network_properties Network density connectivity metrics computation_time Total time spent parameter tuning","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"function implements three tuning strategies: Stability Method: Uses bootstrap resampling assess clustering consistency across data subsamples. Parameters produce stable clustering structures preferred. Quality Method: Optimizes clustering quality using multiple metrics including silhouette coefficients, network modularity, information-theoretic measures. Performance Method: Balances clustering quality computational efficiency, considering analysis time memory requirements. Candidate values automatically generated using percentile-based thresholds, matrix sparsity analysis, network density targets unless explicitly provided.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tune_small_cell_reduction.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enhanced Automatic Small Cell Reduction Parameter Tuning with Multi-Objective Optimization â€” auto_tune_small_cell_reduction","text":"","code":"if (FALSE) { # \\dontrun{ # Generate sample mobility data mobility_data <- generate_mobility_data(n_classes = 6, seed = 123)  # Quality-based tuning (default, fast and recommended) tuning_result <- auto_tune_small_cell_reduction(   mx = mobility_data,   verbose = TRUE )  # Use optimal parameter in moneca analysis segments <- moneca(mobility_data,                   small.cell.reduction = tuning_result$optimal_value)  # Stability-based tuning (slower but more thorough) stability_result <- auto_tune_small_cell_reduction(   mx = mobility_data,   method = \"stability\",   n_trials = 10,   verbose = TRUE )  # Quality-based tuning with custom candidates custom_result <- auto_tune_small_cell_reduction(   mx = mobility_data,   candidate_values = c(0, 1, 2, 5, 10, 20),   verbose = TRUE )  # Performance-aware tuning performance_result <- auto_tune_small_cell_reduction(   mx = mobility_data,   method = \"performance\",   performance_weight = 0.5,  # Equal weight to speed and quality   verbose = TRUE ) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/auto_tuning.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced Auto-Tuning Framework for MONECA Small Cell Reduction Parameter â€” auto_tuning","title":"Enhanced Auto-Tuning Framework for MONECA Small Cell Reduction Parameter â€” auto_tuning","text":"module provides comprehensive automatic parameter tuning small.cell.reduction parameter MONECA algorithms. implements stability-based, quality-based, performance-aware tuning methods advanced optimization features including Pareto frontier analysis, cross-validation, Bayesian optimization, performance optimization using data.table enhanced speed.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/benchmark_implementations.html","id":null,"dir":"Reference","previous_headings":"","what":"Benchmark Utility for Performance Testing â€” benchmark_implementations","title":"Benchmark Utility for Performance Testing â€” benchmark_implementations","text":"Compares performance original optimized implementations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/benchmark_implementations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Benchmark Utility for Performance Testing â€” benchmark_implementations","text":"","code":"benchmark_implementations(mx, n_runs = 3, segment.levels = 3)"},{"path":"https://gmontaletti.github.io/MONECA/reference/benchmark_implementations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Benchmark Utility for Performance Testing â€” benchmark_implementations","text":"mx Mobility matrix testing n_runs Number benchmark runs segment.levels Number segmentation levels","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/benchmark_implementations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Benchmark Utility for Performance Testing â€” benchmark_implementations","text":"Data frame timing results","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/calculate_ppmi.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Positive Pointwise Mutual Information (PPMI) â€” calculate_ppmi","title":"Calculate Positive Pointwise Mutual Information (PPMI) â€” calculate_ppmi","text":"Transforms mobility matrix using PPMI emphasize mobility chance levels.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/calculate_ppmi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Positive Pointwise Mutual Information (PPMI) â€” calculate_ppmi","text":"","code":"calculate_ppmi(mx)"},{"path":"https://gmontaletti.github.io/MONECA/reference/calculate_ppmi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Positive Pointwise Mutual Information (PPMI) â€” calculate_ppmi","text":"mx mobility matrix (core, without totals)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/calculate_ppmi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Positive Pointwise Mutual Information (PPMI) â€” calculate_ppmi","text":"PPMI-transformed matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/cleanup_parallel_processing.html","id":null,"dir":"Reference","previous_headings":"","what":"Cleanup Parallel Processing Resources â€” cleanup_parallel_processing","title":"Cleanup Parallel Processing Resources â€” cleanup_parallel_processing","text":"Properly shuts parallel processing cluster.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/cleanup_parallel_processing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cleanup Parallel Processing Resources â€” cleanup_parallel_processing","text":"","code":"cleanup_parallel_processing(parallel_setup)"},{"path":"https://gmontaletti.github.io/MONECA/reference/cleanup_parallel_processing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cleanup Parallel Processing Resources â€” cleanup_parallel_processing","text":"parallel_setup Parallel setup object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"Compares multiple log-linear model fits mobility table, producing summary table fit statistics likelihood-ratio tests nested models.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"","code":"compare_mobility_models(..., mx = NULL, level = NULL, include_topology = TRUE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"... One moneca_loglinear objects compare. mx Optional. mobility matrix margins moneca object. provided, fits standard models automatically comparison. level Integer specifying hierarchical level MONECA topology model. Used mx moneca object. include_topology Logical. Whether include MONECA topology model fitting models via mx. Default TRUE. Set FALSE mx plain matrix without segment information.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"object class \"moneca_model_comparison\" containing: table Data frame columns: model, deviance, df, aic, bic,       p_value, dissimilarity lr_tests Data frame pairwise likelihood-ratio tests       nested models, columns: model_1, model_2, delta_deviance,       delta_df, p_value models Named list fitted model objects","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"mx provided, function fits independence, quasi-independence, quasi-symmetry, uniform association models automatically. mx moneca object include_topology = TRUE, MONECA topology model also fit. Likelihood-ratio tests computed known nesting relationships: Independence nested quasi-independence Independence nested uniform association Quasi-independence nested quasi-symmetry Quasi-independence nested MONECA topology Models passed via ... combined automatically fitted models. Duplicate model types resolved keeping explicitly passed version.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/compare_mobility_models.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare Log-Linear Models for Mobility Tables â€” compare_mobility_models","text":"","code":"mx <- generate_mobility_data(n_classes = 5, seed = 42) seg <- moneca_fast(mx, segment.levels = 3) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100%  # Compare all standard models comp <- compare_mobility_models(mx = seg, level = 2) print(comp) #> Log-Linear Model Comparison #> =========================== #>  #>                model deviance df      aic      bic   p_value dissimilarity #>       quasi_symmetry   12.256  6  225.218  248.377  5.65e-02         0.006 #>      moneca_topology  364.959  9  571.921  591.423  4.05e-73         0.046 #>   quasi_independence 1244.431 11 1447.393 1464.457 4.29e-260         0.077 #>  uniform_association 1432.361 15 1627.323 1639.511 1.80e-296         0.133 #>         independence 9126.035 16 9318.997 9329.967  0.00e+00         0.392 #>  #> Likelihood-Ratio Tests: #>             model_1             model_2 delta_deviance delta_df   p_value #>        independence  quasi_independence       7881.604        5  0.00e+00 #>        independence uniform_association       7693.675        1  0.00e+00 #>  quasi_independence      quasi_symmetry       1232.174        5 3.15e-264 #>  quasi_independence     moneca_topology        879.472        2 1.06e-191  # Compare specific models m1 <- fit_mobility_model(mx, type = \"independence\") m2 <- fit_mobility_model(mx, type = \"quasi_independence\") compare_mobility_models(m1, m2) #> Log-Linear Model Comparison #> =========================== #>  #>               model deviance df      aic      bic   p_value dissimilarity #>  quasi_independence 1244.431 11 1447.393 1464.457 4.29e-260         0.077 #>        independence 9126.035 16 9318.997 9329.967  0.00e+00         0.392 #>  #> Likelihood-Ratio Tests: #>       model_1            model_2 delta_deviance delta_df p_value #>  independence quasi_independence       7881.604        5       0"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_adjusted_rand_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Adjusted Rand Index â€” compute_adjusted_rand_index","title":"Compute Adjusted Rand Index â€” compute_adjusted_rand_index","text":"Computes adjusted rand index comparing clustering solutions.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_adjusted_rand_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Adjusted Rand Index â€” compute_adjusted_rand_index","text":"","code":"compute_adjusted_rand_index(clustering1, clustering2)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_adjusted_rand_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Adjusted Rand Index â€” compute_adjusted_rand_index","text":"clustering1 First clustering solution. clustering2 Second clustering solution.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_adjusted_rand_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Adjusted Rand Index â€” compute_adjusted_rand_index","text":"Numeric adjusted rand index.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_centrality_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Centrality Metrics â€” compute_centrality_metrics","title":"Compute Centrality Metrics â€” compute_centrality_metrics","text":"Compute Centrality Metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_centrality_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Centrality Metrics â€” compute_centrality_metrics","text":"","code":"compute_centrality_metrics(segments, level, enhanced_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_clustering_quality_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Clustering Quality Metrics â€” compute_clustering_quality_metrics","title":"Compute Clustering Quality Metrics â€” compute_clustering_quality_metrics","text":"Convenience wrapper compute_tuning_metrics focused clustering quality.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_clustering_quality_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Clustering Quality Metrics â€” compute_clustering_quality_metrics","text":"","code":"compute_clustering_quality_metrics(weight_matrix, segments = NULL)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_clustering_quality_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Clustering Quality Metrics â€” compute_clustering_quality_metrics","text":"weight_matrix Weight matrix mobility data. segments Optional MONECA segmentation results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_clustering_quality_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Clustering Quality Metrics â€” compute_clustering_quality_metrics","text":"List clustering quality metrics.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_metrics_comparison.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Graph Metrics Comparison â€” compute_metrics_comparison","title":"Compute Graph Metrics Comparison â€” compute_metrics_comparison","text":"Compute Graph Metrics Comparison","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_metrics_comparison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Graph Metrics Comparison â€” compute_metrics_comparison","text":"","code":"compute_metrics_comparison(segments, max_level)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_mobility_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Mobility Metrics â€” compute_mobility_metrics","title":"Compute Mobility Metrics â€” compute_mobility_metrics","text":"Compute Mobility Metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_mobility_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Mobility Metrics â€” compute_mobility_metrics","text":"","code":"compute_mobility_metrics(segments, level, enhanced_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_connectivity.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Network Connectivity Metrics â€” compute_network_connectivity","title":"Compute Network Connectivity Metrics â€” compute_network_connectivity","text":"Computes various connectivity metrics network analysis.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_connectivity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Network Connectivity Metrics â€” compute_network_connectivity","text":"","code":"compute_network_connectivity(weight_matrix)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_connectivity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Network Connectivity Metrics â€” compute_network_connectivity","text":"weight_matrix Weight matrix representing network.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_connectivity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Network Connectivity Metrics â€” compute_network_connectivity","text":"List containing connectivity metrics.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_modularity.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Network Modularity â€” compute_network_modularity","title":"Compute Network Modularity â€” compute_network_modularity","text":"Computes modularity score network community structure.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_modularity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Network Modularity â€” compute_network_modularity","text":"","code":"compute_network_modularity(weight_matrix)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_modularity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Network Modularity â€” compute_network_modularity","text":"weight_matrix Weight matrix representing network.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_modularity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Network Modularity â€” compute_network_modularity","text":"Numeric modularity score.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_properties.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Network Properties â€” compute_network_properties","title":"Compute Network Properties â€” compute_network_properties","text":"Computes comprehensive network structure properties weight matrix.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_properties.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Network Properties â€” compute_network_properties","text":"","code":"compute_network_properties(weight_matrix)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_properties.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Network Properties â€” compute_network_properties","text":"weight_matrix Weight matrix representing network connections.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_network_properties.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Network Properties â€” compute_network_properties","text":"List containing network properties.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_segment_centrality_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Segment Centrality Metrics â€” compute_segment_centrality_metrics","title":"Compute Segment Centrality Metrics â€” compute_segment_centrality_metrics","text":"Compute Segment Centrality Metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_segment_centrality_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Segment Centrality Metrics â€” compute_segment_centrality_metrics","text":"","code":"compute_segment_centrality_metrics(segment_matrix, enhanced_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_segment_mobility_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Segment Mobility Metrics â€” compute_segment_mobility_metrics","title":"Compute Segment Mobility Metrics â€” compute_segment_mobility_metrics","text":"Compute Segment Mobility Metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_segment_mobility_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Segment Mobility Metrics â€” compute_segment_mobility_metrics","text":"","code":"compute_segment_mobility_metrics(segment_matrix, enhanced_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_silhouette_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Silhouette Score â€” compute_silhouette_score","title":"Compute Silhouette Score â€” compute_silhouette_score","text":"Computes silhouette coefficient clustering quality assessment.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_silhouette_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Silhouette Score â€” compute_silhouette_score","text":"","code":"compute_silhouette_score(weight_matrix, segments)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_silhouette_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Silhouette Score â€” compute_silhouette_score","text":"weight_matrix Weight matrix used clustering. segments MONECA segmentation results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_silhouette_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Silhouette Score â€” compute_silhouette_score","text":"Numeric silhouette score.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_stability_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Stability Metrics â€” compute_stability_metrics","title":"Compute Stability Metrics â€” compute_stability_metrics","text":"Computes stability scores clustering signatures across bootstrap samples.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_stability_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Stability Metrics â€” compute_stability_metrics","text":"","code":"compute_stability_metrics(signatures)"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_stability_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Stability Metrics â€” compute_stability_metrics","text":"signatures List clustering signatures bootstrap samples.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_stability_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Stability Metrics â€” compute_stability_metrics","text":"Numeric stability score 0 1.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"Computes comprehensive metrics evaluating clustering quality, including silhouette analysis, network modularity, information-theoretic measures.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"","code":"compute_tuning_metrics(   segments = NULL,   weight_matrix = NULL,   include_silhouette = TRUE,   include_modularity = TRUE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"segments MONECA segmentation results (optional, full analysis). weight_matrix Weight matrix mobility data (required). include_silhouette Logical indicating whether compute silhouette coefficients. Default TRUE. include_modularity Logical indicating whether compute network modularity. Default TRUE.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"List containing: silhouette Average silhouette coefficient modularity Network modularity score network_density Network density measure connectivity Network connectivity metrics overall Overall quality score combining metrics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"function evaluates clustering quality using multiple complementary metrics: Silhouette Analysis: Measures well-separated clusters comparing within-cluster -cluster distances. Network Modularity: Assesses community structure quality mobility network. Connectivity Metrics: Evaluates network structure properties including density, component structure, edge distribution.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/compute_tuning_metrics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Multi-Objective Optimization Metrics â€” compute_tuning_metrics","text":"","code":"if (FALSE) { # \\dontrun{ # Generate sample data and create weight matrix mobility_data <- generate_mobility_data(n_classes = 5, seed = 123) weight_matrix <- weight.matrix(mobility_data, small.cell.reduction = 2)  # Compute quality metrics quality <- compute_tuning_metrics(weight_matrix = weight_matrix) print(quality) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/create_enhanced_pattern_rules.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Enhanced Pattern Rules for Segment Naming â€” create_enhanced_pattern_rules","title":"Create Enhanced Pattern Rules for Segment Naming â€” create_enhanced_pattern_rules","text":"Creates comprehensive pattern library intelligent segment naming, focusing occupational levels, industries, employment types avoiding generic social class terms.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/create_enhanced_pattern_rules.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Enhanced Pattern Rules for Segment Naming â€” create_enhanced_pattern_rules","text":"","code":"create_enhanced_pattern_rules()"},{"path":"https://gmontaletti.github.io/MONECA/reference/create_enhanced_pattern_rules.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Enhanced Pattern Rules for Segment Naming â€” create_enhanced_pattern_rules","text":"List enhanced pattern rules priorities semantic categories","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/create_union_find.html","id":null,"dir":"Reference","previous_headings":"","what":"Union-Find Data Structure for Efficient Group Merging â€” create_union_find","title":"Union-Find Data Structure for Efficient Group Merging â€” create_union_find","text":"Implements disjoint-set union (DSU) path compression union rank O(alpha(n)) amortized operations alpha inverse Ackermann function.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/create_union_find.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Union-Find Data Structure for Efficient Group Merging â€” create_union_find","text":"","code":"create_union_find(n)"},{"path":"https://gmontaletti.github.io/MONECA/reference/detect_elbow.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect Elbow Point in Scree Data â€” detect_elbow","title":"Detect Elbow Point in Scree Data â€” detect_elbow","text":"Uses maximum distance method find elbow point.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/detect_elbow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect Elbow Point in Scree Data â€” detect_elbow","text":"","code":"detect_elbow(variance_per_component)"},{"path":"https://gmontaletti.github.io/MONECA/reference/detect_elbow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect Elbow Point in Scree Data â€” detect_elbow","text":"variance_per_component Variance explained per component","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/detect_elbow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect Elbow Point in Scree Data â€” detect_elbow","text":"Integer index elbow point","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/determine_analysis_level.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine Optimal Analysis Level â€” determine_analysis_level","title":"Determine Optimal Analysis Level â€” determine_analysis_level","text":"Determine Optimal Analysis Level","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/determine_analysis_level.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine Optimal Analysis Level â€” determine_analysis_level","text":"","code":"determine_analysis_level(moneca_results, enhanced_membership, level_selection)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_independence.html","id":null,"dir":"Reference","previous_headings":"","what":"Build design for independence model â€” .build_design_independence","title":"Build design for independence model â€” .build_design_independence","text":"Returns data frame Origin Destination factors. R handles dummy coding Poisson GLM.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_independence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build design for independence model â€” .build_design_independence","text":"","code":".build_design_independence(df, categories)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_independence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build design for independence model â€” .build_design_independence","text":"df Long-format data frame .matrix_to_long. categories Character vector category names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_independence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build design for independence model â€” .build_design_independence","text":"input data frame factors set.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_moneca_topology.html","id":null,"dir":"Reference","previous_headings":"","what":"Build design for MONECA topology model â€” .build_design_moneca_topology","title":"Build design for MONECA topology model â€” .build_design_moneca_topology","text":"Adds diagonal indicators segment-pair factor encoding within-segment -segment relationships based MONECA segment membership. Uses single factor variable numerical stability large matrices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_moneca_topology.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build design for MONECA topology model â€” .build_design_moneca_topology","text":"","code":".build_design_moneca_topology(df, categories, segment_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_moneca_topology.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build design for MONECA topology model â€” .build_design_moneca_topology","text":"df Long-format data frame .matrix_to_long. categories Character vector category names. segment_membership Named character vector mapping category name segment label (e.g., \"seg_1\", \"seg_2\").","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_moneca_topology.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build design for MONECA topology model â€” .build_design_moneca_topology","text":"Data frame diagonal indicators seg_pair factor column.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_independence.html","id":null,"dir":"Reference","previous_headings":"","what":"Build design for quasi-independence model â€” .build_design_quasi_independence","title":"Build design for quasi-independence model â€” .build_design_quasi_independence","text":"Adds n binary indicator columns diagonal cells (one per category).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_independence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build design for quasi-independence model â€” .build_design_quasi_independence","text":"","code":".build_design_quasi_independence(df, categories)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_independence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build design for quasi-independence model â€” .build_design_quasi_independence","text":"df Long-format data frame .matrix_to_long. categories Character vector category names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_independence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build design for quasi-independence model â€” .build_design_quasi_independence","text":"Data frame added diagonal indicator columns.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_symmetry.html","id":null,"dir":"Reference","previous_headings":"","what":"Build design for quasi-symmetry model â€” .build_design_quasi_symmetry","title":"Build design for quasi-symmetry model â€” .build_design_quasi_symmetry","text":"Starts quasi-independence columns, adds symmetric pair indicators. unordered pair {, j} < j, adds column symm_i_j = 1 (Origin == & Dest == j) (Origin == j & Dest == ). gives n + n*(n-1)/2 extra columns beyond Origin + Destination.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_symmetry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build design for quasi-symmetry model â€” .build_design_quasi_symmetry","text":"","code":".build_design_quasi_symmetry(df, categories)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_symmetry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build design for quasi-symmetry model â€” .build_design_quasi_symmetry","text":"df Long-format data frame .matrix_to_long. categories Character vector category names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_quasi_symmetry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build design for quasi-symmetry model â€” .build_design_quasi_symmetry","text":"Data frame diagonal symmetry indicator columns.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_uniform_association.html","id":null,"dir":"Reference","previous_headings":"","what":"Build design for uniform association model â€” .build_design_uniform_association","title":"Build design for uniform association model â€” .build_design_uniform_association","text":"Adds single numeric column score_interaction = row_score * col_score. Scores assigned based scores parameter.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_uniform_association.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build design for uniform association model â€” .build_design_uniform_association","text":"","code":".build_design_uniform_association(df, categories, scores = \"integer\")"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_uniform_association.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build design for uniform association model â€” .build_design_uniform_association","text":"df Long-format data frame .matrix_to_long. categories Character vector category names. scores Character string: \"integer\" 1, 2, ..., n \"midrank\" midrank values based marginal distribution.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-build_design_uniform_association.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build design for uniform association model â€” .build_design_uniform_association","text":"Data frame added score_interaction column.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-dissimilarity_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute dissimilarity index between observed and fitted values â€” .dissimilarity_index","title":"Compute dissimilarity index between observed and fitted values â€” .dissimilarity_index","text":"dissimilarity index measures proportion cases need reclassified model fit exactly.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-dissimilarity_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute dissimilarity index between observed and fitted values â€” .dissimilarity_index","text":"","code":".dissimilarity_index(observed, fitted)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-dissimilarity_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute dissimilarity index between observed and fitted values â€” .dissimilarity_index","text":"observed Numeric vector observed counts. fitted Numeric vector fitted (expected) counts.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-dissimilarity_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute dissimilarity index between observed and fitted values â€” .dissimilarity_index","text":"single numeric value 0 1.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-fit_quasi_symmetry_ipf.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit quasi-symmetry model via Iterative Proportional Fitting â€” .fit_quasi_symmetry_ipf","title":"Fit quasi-symmetry model via Iterative Proportional Fitting â€” .fit_quasi_symmetry_ipf","text":"Computes MLE quasi-symmetry log-linear model using IPF instead GLM. operations vectorized (R-level loops cells). Convergence guaranteed typically reached 20-50 iterations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-fit_quasi_symmetry_ipf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit quasi-symmetry model via Iterative Proportional Fitting â€” .fit_quasi_symmetry_ipf","text":"","code":".fit_quasi_symmetry_ipf(core, max_iter = 500L, tol = 1e-08)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-fit_quasi_symmetry_ipf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit quasi-symmetry model via Iterative Proportional Fitting â€” .fit_quasi_symmetry_ipf","text":"core N x N numeric matrix (margins) observed counts. max_iter Maximum number IPF iterations. Default 500. tol Convergence tolerance maximum absolute deviation fitted observed marginal totals. Default 1e-8.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-fit_quasi_symmetry_ipf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit quasi-symmetry model via Iterative Proportional Fitting â€” .fit_quasi_symmetry_ipf","text":"list components: fitted, deviance, df, p_value, aic,   bic, dissimilarity_index, residuals, n_iter, converged.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-get_segment_membership.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract segment membership from a moneca object â€” .get_segment_membership","title":"Extract segment membership from a moneca object â€” .get_segment_membership","text":"Returns named character vector mapping category names segment labels given hierarchical level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-get_segment_membership.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract segment membership from a moneca object â€” .get_segment_membership","text":"","code":".get_segment_membership(moneca_obj, level)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-get_segment_membership.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract segment membership from a moneca object â€” .get_segment_membership","text":"moneca_obj moneca object. level Integer specifying hierarchical level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-get_segment_membership.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract segment membership from a moneca object â€” .get_segment_membership","text":"named character vector names category names values   segment labels (e.g., \"seg_1\").","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-matrix_to_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a square matrix to long format â€” .matrix_to_long","title":"Convert a square matrix to long format â€” .matrix_to_long","text":"Takes square core matrix (margins) returns data frame Origin, Destination, Freq columns suitable log-linear modelling.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-matrix_to_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a square matrix to long format â€” .matrix_to_long","text":"","code":".matrix_to_long(mx)"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-matrix_to_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a square matrix to long format â€” .matrix_to_long","text":"mx square numeric matrix row column names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-matrix_to_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a square matrix to long format â€” .matrix_to_long","text":"data frame columns Origin (factor), Destination (factor),   Freq (numeric).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-moneca_env.html","id":null,"dir":"Reference","previous_headings":"","what":"igraph Compatibility Layer â€” .moneca_env","title":"igraph Compatibility Layer â€” .moneca_env","text":"file provides compatibility functions handle old new igraph API ensuring MONECA works igraph versions 1.3.0 onwards","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-moneca_env.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"igraph Compatibility Layer â€” .moneca_env","text":"","code":".moneca_env"},{"path":"https://gmontaletti.github.io/MONECA/reference/dot-moneca_env.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"igraph Compatibility Layer â€” .moneca_env","text":"object class environment length 9.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Legacy Ego Network Visualization â€” ego.plot","title":"Legacy Ego Network Visualization â€” ego.plot","text":"Creates ego network plots showing mobility patterns single focal position using legacy ggplot2 plotting system. modern ego network analysis, use plot_ego_ggraph.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Legacy Ego Network Visualization â€” ego.plot","text":"","code":"ego.plot(   segments,   mxa.b,   id = 1,   lay = NULL,   edge.size = 0.8,   border.padding = 1,   title.line = TRUE,   vertex.size = \"totals\",   small.cell.reduction = 5,   edge.weight = \"discrete\",   color.scheme = \"RdPu\",   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Legacy Ego Network Visualization â€” ego.plot","text":"segments moneca object returned moneca. mxa.b original mobility matrix used moneca analysis. id Integer character specifying focal node (ego) analysis. lay Layout matrix node positioning, typically layout.matrix. edge.size Numeric value edge thickness. Default 0.8. border.padding Numeric value segment boundary padding. Default 1. title.line Logical indicating whether add title line. Default TRUE. vertex.size Specification vertex sizes. \"totals\", sizes derived row/column totals mobility matrix. Otherwise, uses specified values. small.cell.reduction Numeric threshold vertices receive different shapes indicate low mobility volumes. Default 5. edge.weight Character string specifying edge weight display. \"discrete\" creates categorical edge weights, otherwise uses continuous weights. color.scheme Character string specifying RColorBrewer color scheme visualization. Default \"RdPu\". ... Additional arguments passed gg.moneca.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Legacy Ego Network Visualization â€” ego.plot","text":"ggplot2 object showing ego network.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Legacy Ego Network Visualization â€” ego.plot","text":"function creates focused view mobility patterns single position social structure. highlights incoming outgoing mobility flows uses different visual elements represent: Edge colors/weights relative risk levels Node sizes total mobility volumes Node shapes positions low mobility Node colors mobility share proportions Note: function maintained backward compatibility. new analyses, consider using plot_ego_ggraph offers better performance modern styling options.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/ego.plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Legacy Ego Network Visualization â€” ego.plot","text":"","code":"if (FALSE) { # \\dontrun{ # Using synthetic data mobility_data <- generate_mobility_data(n_classes = 6, seed = 123) seg <- moneca(mobility_data, segment.levels = 2) ego.plot(seg, mobility_data, id = 2)  # Customized ego plot ego.plot(seg, mobility_data,           id = 3,          edge.size = 1.2,          color.scheme = \"Blues\",          small.cell.reduction = 10) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/estimate_components.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Number of Connected Components â€” estimate_components","title":"Estimate Number of Connected Components â€” estimate_components","text":"Simple approximation connected components network.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/estimate_components.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Number of Connected Components â€” estimate_components","text":"","code":"estimate_components(adj_matrix)"},{"path":"https://gmontaletti.github.io/MONECA/reference/estimate_components.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Number of Connected Components â€” estimate_components","text":"adj_matrix Binary adjacency matrix.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/estimate_components.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Number of Connected Components â€” estimate_components","text":"Estimated number connected components.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"Balances clustering quality computational performance identify optimal parameters different use cases constraints.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"","code":"evaluate_performance_trade_offs(   quality_metrics,   performance_metrics,   performance_weight = 0.3 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"quality_metrics List quality metric results candidate. performance_metrics List performance metric results candidate. performance_weight Numeric weight (0-1) performance vs quality trade-. Higher values prioritize speed quality.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"Numeric vector trade-scores candidate.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"function combines normalized quality performance scores using specified weight. Quality scores include clustering metrics like modularity silhouette coefficients. Performance scores consider computational time memory efficiency.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/evaluate_performance_trade_offs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Evaluate Performance Trade-offs â€” evaluate_performance_trade_offs","text":"","code":"if (FALSE) { # \\dontrun{ # This function is typically called internally by auto_tune_small_cell_reduction # Example usage in isolation:  quality_list <- list(   list(overall = 0.8),   list(overall = 0.6),   list(overall = 0.9) )  performance_list <- list(   list(time = 1.2, valid = TRUE),   list(time = 0.8, valid = TRUE),    list(time = 2.1, valid = TRUE) )  trade_offs <- evaluate_performance_trade_offs(   quality_metrics = quality_list,   performance_metrics = performance_list,   performance_weight = 0.3 ) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_clustering_signature.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Clustering Signature â€” extract_clustering_signature","title":"Extract Clustering Signature â€” extract_clustering_signature","text":"Extracts standardized signature MONECA clustering results stability comparison across bootstrap samples.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_clustering_signature.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Clustering Signature â€” extract_clustering_signature","text":"","code":"extract_clustering_signature(segments, original_indices = NULL)"},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_clustering_signature.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Clustering Signature â€” extract_clustering_signature","text":"segments MONECA segmentation results. original_indices Original indices sampled data.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_clustering_signature.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Clustering Signature â€” extract_clustering_signature","text":"List containing clustering signature components.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_meaningful_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Meaningful Terms from Node Names â€” extract_meaningful_terms","title":"Extract Meaningful Terms from Node Names â€” extract_meaningful_terms","text":"Analyzes node names extract semantically meaningful terms generating descriptive segment names.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_meaningful_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Meaningful Terms from Node Names â€” extract_meaningful_terms","text":"","code":"extract_meaningful_terms(node_names)"},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_meaningful_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Meaningful Terms from Node Names â€” extract_meaningful_terms","text":"node_names Character vector node names","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_meaningful_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Meaningful Terms from Node Names â€” extract_meaningful_terms","text":"Character string meaningful term-based name, NULL","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_named_matrices.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Named Matrices â€” extract_named_matrices","title":"Extract Named Matrices â€” extract_named_matrices","text":"Extract Named Matrices","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_named_matrices.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Named Matrices â€” extract_named_matrices","text":"","code":"extract_named_matrices(segments, max_level, enhanced_membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_segment_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Segment Matrix â€” extract_segment_matrix","title":"Extract Segment Matrix â€” extract_segment_matrix","text":"Extract Segment Matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/extract_segment_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Segment Matrix â€” extract_segment_matrix","text":"","code":"extract_segment_matrix(moneca_results, enhanced_membership, level)"},{"path":"https://gmontaletti.github.io/MONECA/reference/find.segments.html","id":null,"dir":"Reference","previous_headings":"","what":"Find Segments in Mobility Networks â€” find.segments","title":"Find Segments in Mobility Networks â€” find.segments","text":"Identifies discrete groups segments based weighted network matrix using clique-based algorithm. function implements core segmentation algorithm iteratively assigns nodes segments based network ties.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find.segments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find Segments in Mobility Networks â€” find.segments","text":"","code":"find.segments(   mat,   cliques,   cut.off = 1,   mode = \"symmetric\",   delete.upper.tri = TRUE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/find.segments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find Segments in Mobility Networks â€” find.segments","text":"mat weighted adjacency matrix representing mobility flows relationships. include row column names representing categories/classes. cliques list cliques (complete subgraphs) network, typically obtained igraph::cliques(). cut.Numeric threshold minimum weight relative risk considered network tie. Default 1. mode Character string specifying handle asymmetric relationships: \"symmetric\" (default): Standard symmetric treatment \"Mutual\": mutual ties (bidirectional) considered \"Unmutual\": Unidirectional ties allowed delete.upper.tri Logical indicating whether process lower triangle matrix efficiency. Default TRUE.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find.segments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find Segments in Mobility Networks â€” find.segments","text":"list two components: membership factor indicating segment membership node cliques list element contains indices nodes       belonging segment","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find.segments.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find Segments in Mobility Networks â€” find.segments","text":"algorithm works iteratively examining strongest remaining ties network assigning nodes segments based clique membership. uses greedy approach prioritizes stronger connections larger existing segments.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/find_best_level_with_structure.html","id":null,"dir":"Reference","previous_headings":"","what":"Find Best Level With Structure and Names â€” find_best_level_with_structure","title":"Find Best Level With Structure and Names â€” find_best_level_with_structure","text":"Find Best Level Structure Names","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find_best_level_with_structure.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find Best Level With Structure and Names â€” find_best_level_with_structure","text":"","code":"find_best_level_with_structure(segments, enhanced_membership, max_level)"},{"path":"https://gmontaletti.github.io/MONECA/reference/find_segments_optimized.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimized Segment Finding with Vectorized Operations â€” find_segments_optimized","title":"Optimized Segment Finding with Vectorized Operations â€” find_segments_optimized","text":"High-performance implementation segment finding algorithm using: - Pre-sorted edges single-pass processing - Union-find O(alpha(n)) group merging - Vectorized clique membership testing - Optional sparse matrix support","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find_segments_optimized.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Optimized Segment Finding with Vectorized Operations â€” find_segments_optimized","text":"","code":"find_segments_optimized(mat, cliques, cut.off = 1, progress = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/find_segments_optimized.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Optimized Segment Finding with Vectorized Operations â€” find_segments_optimized","text":"mat Weight matrix weight.matrix() cliques List cliques igraph cut.Minimum weight threshold progress Show progress bar","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/find_segments_optimized.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Optimized Segment Finding with Vectorized Operations â€” find_segments_optimized","text":"List membership cliques","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/first.level.summary.html","id":null,"dir":"Reference","previous_headings":"","what":"First level summary â€” first.level.summary","title":"First level summary â€” first.level.summary","text":"First level summary","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/first.level.summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"First level summary â€” first.level.summary","text":"","code":"first.level.summary(   segments,   small.cell.reduction = segments$small.cell.reduction )"},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"Fits standard log-linear models mobility tables statistical testing mobility structure. Supports independence, quasi-independence, quasi-symmetry, uniform association, MONECA topology models.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"","code":"fit_mobility_model(   mx,   type = c(\"independence\", \"quasi_independence\", \"quasi_symmetry\", \"uniform_association\",     \"moneca_topology\"),   level = NULL,   scores = c(\"integer\", \"midrank\"),   small.cell.reduction = 0 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"mx mobility matrix margins (totals row/column), moneca object. moneca object, matrix extracted mat.list[[1]]. type Character string specifying model type. One : \"independence\" origin-destination association. Baseline     2(n-1) parameters. \"quasi_independence\" Accounts diagonal immobility     cells. Adds n diagonal parameters. Standard mobility table baseline. \"quasi_symmetry\" Tests whether mobility O->D equals D->O.     Adds n diagonal n*(n-1)/2 symmetric pair parameters. \"uniform_association\" Single-parameter association model     using row/column scores. \"moneca_topology\" Tests whether MONECA segments explain     mobility structure beyond diagonal effects. Requires moneca object     explicit segment membership. level Integer specifying hierarchical level MONECA topology model. Required type = \"moneca_topology\" mx moneca object. Default NULL. scores Character string specifying score type uniform association model: \"integer\" (default) \"midrank\". small.cell.reduction Numeric. Cells counts value set zero fitting. Default 0 (reduction).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"object class \"moneca_loglinear\" containing: model glm fit object type Model type string deviance Residual deviance (G-squared) df Residual degrees freedom aic Akaike Information Criterion bic Bayesian Information Criterion p_value P-value chi-squared goodness--fit test dissimilarity_index Proportion cases misclassified coefficients Named coefficient vector fitted Fitted values reshaped n x n matrix residuals Pearson residuals reshaped n x n matrix design_info List describing design matrix construction original_matrix input mobility matrix (margins) segment_level Level used (moneca_topology , NULL otherwise)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"models fit Poisson log-linear models using glm(). deviance statistic (G-squared) tests goodness fit relative saturated model. non-significant p-value indicates model adequately describes observed mobility patterns. BIC computed using number cells (n-squared) sample size, standard R approach GLMs. contingency table comparisons based total count N, users refer deviance degrees freedom directly. dissimilarity index indicates proportion individuals need reclassified model fit exactly. Values 0.05 indicate good fit; 0.03 indicates excellent fit.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/fit_mobility_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit Log-Linear Models to Mobility Tables â€” fit_mobility_model","text":"","code":"# Generate test data and run MONECA mx <- generate_mobility_data(n_classes = 5, seed = 42) seg <- moneca_fast(mx, segment.levels = 3) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100%  # Fit different models m_ind <- fit_mobility_model(mx, type = \"independence\") m_qi <- fit_mobility_model(mx, type = \"quasi_independence\")  # Fit MONECA topology model m_top <- fit_mobility_model(seg, type = \"moneca_topology\", level = 2)  # Compare models compare_mobility_models(m_ind, m_qi, m_top) #> Log-Linear Model Comparison #> =========================== #>  #>               model deviance df      aic      bic   p_value dissimilarity #>  moneca_topology_L2  364.959  9  571.921  591.423  4.05e-73         0.046 #>  quasi_independence 1244.431 11 1447.393 1464.457 4.29e-260         0.077 #>        independence 9126.035 16 9318.997 9329.967  0.00e+00         0.392 #>  #> Likelihood-Ratio Tests: #>             model_1            model_2 delta_deviance delta_df   p_value #>        independence quasi_independence       7881.604        5  0.00e+00 #>  quasi_independence moneca_topology_L2        879.472        2 1.06e-191"},{"path":"https://gmontaletti.github.io/MONECA/reference/force.segments.html","id":null,"dir":"Reference","previous_headings":"","what":"Force Segments â€” force.segments","title":"Force Segments â€” force.segments","text":"Creates two-level segment object forced solution based external variable. internal function creating custom segmentation structures.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/force.segments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Force Segments â€” force.segments","text":"","code":"force.segments(segments, variable)"},{"path":"https://gmontaletti.github.io/MONECA/reference/force.segments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Force Segments â€” force.segments","text":"segments moneca object returned moneca. variable vector specifying forced segment assignments.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/force.segments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Force Segments â€” force.segments","text":"moneca object forced segmentation level 2.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Data-Driven Candidate Values â€” generate_candidate_values","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"Generates candidate values small.cell.reduction parameter using data-driven approaches including percentile analysis, matrix sparsity assessment, network density optimization.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"","code":"generate_candidate_values(   mx,   method = \"hybrid\",   max_candidates = 20,   include_zero = TRUE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"mx Mobility matrix analysis. method Character string specifying generation strategy: \"percentile\": Percentile-based thresholds data distribution \"sparsity\": Matrix sparsity-informed selection \"density\": Network density optimization targets \"hybrid\": Combination multiple strategies (default) max_candidates Maximum number candidates generate. Default 20. include_zero Logical indicating whether include 0 candidate. Default TRUE.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"Numeric vector candidate small.cell.reduction values, sorted   ascending order.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"Percentile Method: Generates thresholds based distribution non-zero values mobility matrix. Uses quantiles 5 Sparsity Method: Analyzes matrix sparsity patterns generates candidates preserve different levels network connectivity. Density Method: Targets specific network density levels (0.1, 0.2, etc.) estimating required thresholds. Hybrid Method: Combines approaches selects diverse, non-redundant candidates covering full parameter space.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_candidate_values.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Data-Driven Candidate Values â€” generate_candidate_values","text":"","code":"if (FALSE) { # \\dontrun{ # Generate sample data mobility_data <- generate_mobility_data(n_classes = 5, seed = 123)  # Percentile-based candidates candidates_pct <- generate_candidate_values(mobility_data, \"percentile\")  # Sparsity-informed candidates   candidates_sparse <- generate_candidate_values(mobility_data, \"sparsity\")  # Hybrid approach (recommended) candidates_hybrid <- generate_candidate_values(mobility_data, \"hybrid\")  print(candidates_hybrid) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_example_datasets.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Predefined Example Datasets â€” generate_example_datasets","title":"Generate Predefined Example Datasets â€” generate_example_datasets","text":"Creates collection predefined mobility datasets different structural characteristics. examples useful tutorials, testing different moneca parameters, demonstrating various mobility regime types.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_example_datasets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Predefined Example Datasets â€” generate_example_datasets","text":"","code":"generate_example_datasets()"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_example_datasets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Predefined Example Datasets â€” generate_example_datasets","text":"named list containing mobility matrices different characteristics: simple Small 4-class example clear segmentation complex Larger 8-class example hierarchical structure rigid High immobility example showing strong class boundaries fluid Low immobility example extensive mobility polarized Example strong upper/lower class divide gradual Example smooth class transitions matrix standard moneca format row/column totals.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_example_datasets.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Predefined Example Datasets â€” generate_example_datasets","text":"function provides ready--use examples demonstrate different types social mobility structures: Simple: Good learning moneca basics Complex: Tests algorithm performance larger structures Rigid: Shows segmentation low-mobility societies Fluid: Tests segmentation high-mobility contexts Polarized: Demonstrates class divide patterns Gradual: Shows continuous mobility gradients examples particularly useful : Tutorial teaching materials Comparing moneca parameters across mobility types Testing visualization functions Benchmarking algorithm performance","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_example_datasets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Predefined Example Datasets â€” generate_example_datasets","text":"","code":"if (FALSE) { # \\dontrun{ # Load all example datasets examples <- generate_example_datasets() names(examples)  # Examine the simple example print(examples$simple)  # Compare different mobility regimes rigid_seg <- moneca(examples$rigid, segment.levels = 3) fluid_seg <- moneca(examples$fluid, segment.levels = 3)  # Visualize different structures plot_moneca_ggraph(rigid_seg, title = \"Rigid Class Structure\") plot_moneca_ggraph(fluid_seg, title = \"Fluid Mobility Regime\") } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_level_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Level Name Based on Strategy â€” generate_level_name","title":"Generate Level Name Based on Strategy â€” generate_level_name","text":"Internal helper function generate meaningful level names segments.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_level_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Level Name Based on Strategy â€” generate_level_name","text":"","code":"generate_level_name(   node_names,   membership_id,   naming_strategy,   custom_names,   separator,   max_concat_length,   pattern_rules )"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_level_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Level Name Based on Strategy â€” generate_level_name","text":"node_names Character vector node names segment membership_id Character string membership ID (e.g., \"2.1\") naming_strategy Character string specifying naming approach custom_names Named list custom names separator Character string concatenation max_concat_length Maximum nodes concatenate pattern_rules Named list pattern replacement rules","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_level_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Level Name Based on Strategy â€” generate_level_name","text":"Character string generated level name","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"Creates synthetic social mobility tables configurable patterns mimic real-world mobility structures. function essential testing moneca algorithms, creating examples, understanding different mobility patterns affect segmentation results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"","code":"generate_mobility_data(   n_classes = 10,   n_total = 10000,   immobility_strength = 0.6,   class_clustering = 0.3,   noise_level = 0.1,   class_names = NULL,   seed = NULL )"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"n_classes Integer specifying number social classes occupational categories. Must least 2. Default 10. n_total Integer specifying total sample size (number individuals). Must least large n_classes. Default 10000. immobility_strength Numeric value (0-1) controlling strength diagonal immobility (tendency remain origin class). Higher values create rigid class structures. Default 0.6. class_clustering Numeric value (0-1) controlling tendency mobility adjacent classes social hierarchy. Higher values create gradual, short-distance mobility. Default 0.3. noise_level Numeric value (0-1) controlling amount random mobility non-adjacent classes. Higher values create chaotic mobility patterns. Default 0.1. class_names Character vector names social classes. NULL, classes named \"Class 1\", \"Class 2\", etc. Length must equal n_classes. seed Integer random seed ensure reproducible results. Default NULL (seed set).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"square matrix moneca format : Core matrix Upper-left (n_classes x n_classes) contains mobility flows Row margins Last column contains origin class totals Column margins Last row contains destination class totals Grand total Bottom-right cell contains total sample size matrix includes row column names easy interpretation.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"function generates mobility data using hierarchical model reflects common patterns social mobility research: Diagonal Dominance: people remain origin class Distance Effects: Mobility likely adjacent classes Marginal Heterogeneity: Class sizes vary realistically Random Component: unpredictable mobility occurs generated data can used test different mobility regimes affect moneca segmentation create realistic examples demonstrations. Parameter combinations: High immobility + low clustering = rigid class boundaries Low immobility + high clustering = fluid structured mobility High noise = chaotic mobility patterns Balanced parameters = realistic social mobility","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_mobility_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Realistic Synthetic Mobility Data â€” generate_mobility_data","text":"","code":"# Basic synthetic data with default parameters basic_data <- generate_mobility_data() print(basic_data[1:6, 1:6])  # Show first 5 classes plus totals #>         Class 1 Class 2 Class 3 Class 4 Class 5 Class 6 #> Class 1     255      64      42       7       4       4 #> Class 2     194     703     179     104      11       7 #> Class 3     135     276    1046     280     156      17 #> Class 4       2      25      51     141      40      18 #> Class 5       4       3      28      58     207      60 #> Class 6       5       7       1      23      71     251  # Small example for quick testing test_data <- generate_mobility_data(   n_classes = 5,   n_total = 1000,   immobility_strength = 0.7,   class_clustering = 0.2,   seed = 42 )  # Professional class structure with custom names professional_data <- generate_mobility_data(   n_classes = 6,   n_total = 5000,   class_names = c(\"Upper\", \"Upper-Middle\", \"Middle\",                    \"Lower-Middle\", \"Working\", \"Lower\"),   immobility_strength = 0.5,   class_clustering = 0.4,   seed = 123 )  # Highly fluid mobility regime fluid_data <- generate_mobility_data(   n_classes = 8,   immobility_strength = 0.3,   class_clustering = 0.1,   noise_level = 0.3 )  # Use in moneca analysis seg <- moneca(test_data, segment.levels = 3) #>    |                                                                               |                                                                      |   0% #> 33% ready! #>    |                                                                               |===================================                                   |  50% #> 67% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>  if (FALSE) { # \\dontrun{ plot_moneca_ggraph(seg, title = \"Synthetic Mobility Analysis\") } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_segment_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Segment Network Plot â€” generate_segment_plot","title":"Generate Segment Network Plot â€” generate_segment_plot","text":"Generate Segment Network Plot","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_segment_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Segment Network Plot â€” generate_segment_plot","text":"","code":"generate_segment_plot(   segment_matrix,   enhanced_membership,   mobility_metrics,   centrality_metrics,   plot_layout,   plot_node_color,   node_size_metric )"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_semantic_fallback.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Semantic Fallback Name â€” generate_semantic_fallback","title":"Generate Semantic Fallback Name â€” generate_semantic_fallback","text":"Creates intelligent fallback names using segment composition analysis clear patterns detected.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_semantic_fallback.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Semantic Fallback Name â€” generate_semantic_fallback","text":"","code":"generate_semantic_fallback(node_names, membership_id)"},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_semantic_fallback.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Semantic Fallback Name â€” generate_semantic_fallback","text":"node_names Character vector node names membership_id Character string membership ID","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_semantic_fallback.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Semantic Fallback Name â€” generate_semantic_fallback","text":"Character string semantic fallback name","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_summary_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Summary Report as Data Frame â€” generate_summary_report","title":"Generate Summary Report as Data Frame â€” generate_summary_report","text":"Generate Summary Report Data Frame","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/generate_summary_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Summary Report as Data Frame â€” generate_summary_report","text":"","code":"generate_summary_report(   results,   segments,   max_level,   analysis_level = max_level )"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_representative.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Representative Node for a Segment â€” get_representative","title":"Get Representative Node for a Segment â€” get_representative","text":"Returns name central node specific group.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_representative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Representative Node for a Segment â€” get_representative","text":"","code":"get_representative(meta, level, group_id)"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_representative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Representative Node for a Segment â€” get_representative","text":"meta moneca_segments object. level Integer. hierarchical level. group_id Integer. group (segment) index.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_representative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Representative Node for a Segment â€” get_representative","text":"character string: representative node name.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_representative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Representative Node for a Segment â€” get_representative","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% meta <- moneca_segments(seg) get_representative(meta, level = 2, group_id = 1) #> [1] \"Class 6\""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_groups.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Segment Groups at a Given Level â€” get_segment_groups","title":"Get Segment Groups at a Given Level â€” get_segment_groups","text":"Returns list integer vectors representing group membership.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_groups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Segment Groups at a Given Level â€” get_segment_groups","text":"","code":"get_segment_groups(meta, level = 2)"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_groups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Segment Groups at a Given Level â€” get_segment_groups","text":"meta moneca_segments object. level Integer. hierarchical level (default 2).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_groups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Segment Groups at a Given Level â€” get_segment_groups","text":"list integer vectors, one per group, containing member indices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_groups.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Segment Groups at a Given Level â€” get_segment_groups","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% meta <- moneca_segments(seg) get_segment_groups(meta, level = 2) #> [[1]] #> [1] 4 5 6 #>  #> [[2]] #> [1] 1 2 #>  #> [[3]] #> [1] 3 #>"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_label.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Segment Label â€” get_segment_label","title":"Get Segment Label â€” get_segment_label","text":"Returns formatted label specific group (e.g., \"+2\" group 3 representative \"\").","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Segment Label â€” get_segment_label","text":"","code":"get_segment_label(meta, level, group_id)"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Segment Label â€” get_segment_label","text":"meta moneca_segments object. level Integer. hierarchical level. group_id Integer. group (segment) index.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Segment Label â€” get_segment_label","text":"character string: formatted label.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_label.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Segment Label â€” get_segment_label","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% meta <- moneca_segments(seg) get_segment_label(meta, level = 2, group_id = 1) #> [1] \"Class 6+2\""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Segment Map at a Given Level â€” get_segment_map","title":"Get Segment Map at a Given Level â€” get_segment_map","text":"Returns segment map data frame specific hierarchical level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Segment Map at a Given Level â€” get_segment_map","text":"","code":"get_segment_map(meta, level = 2)"},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Segment Map at a Given Level â€” get_segment_map","text":"meta moneca_segments object. level Integer. hierarchical level (default 2).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Segment Map at a Given Level â€” get_segment_map","text":"data.frame columns segment, main_node,   members, n_members, label.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/get_segment_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Segment Map at a Given Level â€” get_segment_map","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% meta <- moneca_segments(seg) get_segment_map(meta, level = 2) #>   segment main_node                   members n_members     label #> 1       1   Class 6 Class 4, Class 5, Class 6         3 Class 6+2 #> 2       2   Class 1          Class 1, Class 2         2 Class 1+1 #> 3       3   Class 3                   Class 3         1   Class 3"},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":null,"dir":"Reference","previous_headings":"","what":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"Creates network visualizations moneca clustering results using ggplot2. function provides extensive customization options superseded plot_moneca_ggraph use cases.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"","code":"gg.moneca(   segments,   level = NULL,   layout = NULL,   edges = NULL,   mode = \"directed\",   vertex.size = \"total\",   vertex.fill = \"segment\",   vertex.alpha = 1,   vertex.color = \"black\",   vertex.shape = 21,   show.edges = TRUE,   edge.size = 1,   edge.alpha = \"weight\",   edge.color = \"weight\",   edge.line = \"solid\",   show.text = TRUE,   text.size = 3,   text.color = \"black\",   text.alpha = 1,   text.vjust = 1.5,   show.borders = TRUE,   border.size = 1,   border.fill = NA,   border.color = \"black\",   border.alpha = 1,   border.padding = 0.7,   border.text = TRUE,   border.labels = \"segments\",   border.text.size = 4,   border.text.color = \"black\",   border.text.vjust = -0.2,   border.text.hjust = 1,   midpoints = TRUE,   midpoint.arrow = arrow(angle = 20, length = unit(0.33, \"cm\"), ends = \"last\", type =     \"closed\"),   edge.text = FALSE,   edge.text.size = 3,   edge.text.alpha = 0.9,   legend = \"side\" )"},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"segments moneca object returned moneca. level Integer vector specifying hierarchical levels display. layout Matrix node coordinates layout function result. edges Edge matrix transformed edge weights visualization. mode Character string specifying graph mode (\"directed\" \"undirected\"). vertex.size Aesthetic vertex size. Can \"total\", \"mobility\", numeric. vertex.fill Aesthetic vertex fill color. Can \"segment\" color specification. vertex.alpha Numeric value (0-1) vertex transparency. vertex.color Color vertex borders. vertex.shape Numeric code vertex shape (see ggplot2 shapes). show.edges Logical indicating whether display edges. edge.size Size specification edges. edge.alpha Transparency edges. Can \"weight\" numeric. edge.color Color specification edges. Can \"weight\" color name. edge.line Line type edges (\"solid\", \"dashed\", etc.). show.text Logical indicating whether show vertex labels. text.size Numeric size vertex labels. text.color Color vertex labels. text.alpha Transparency vertex labels. text.vjust Vertical adjustment labels. show.borders Logical indicating whether show segment boundaries. border.size Size segment borders. border.fill Fill color segment boundaries. border.color Color segment border lines. border.alpha Transparency segment borders. border.padding Padding around segment boundaries. border.text Logical indicating whether show segment labels. border.labels Character vector custom segment labels. border.text.size Size segment labels. border.text.color Color segment labels. border.text.vjust Vertical adjustment segment labels. border.text.hjust Horizontal adjustment segment labels. midpoints Logical indicating whether show edge midpoints. midpoint.arrow Logical indicating whether show arrows midpoints. edge.text Logical indicating whether show edge labels. edge.text.size Size edge labels. edge.text.alpha Transparency edge labels. legend Position legend (\"side\", \"bottom\", \"none\", etc.).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"ggplot2 object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"function provides highly customizable complex interface creating moneca visualizations. requires eliter package functionality. users, plot_moneca_ggraph offers modern user-friendly interface better defaults. Note: function maintained backward compatibility longer actively developed. New features added ggraph-based plotting functions instead.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/gg.moneca.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Legacy ggplot2 Visualization for moneca Objects â€” gg.moneca","text":"","code":"if (FALSE) { # \\dontrun{ # Using synthetic data mobility_data <- generate_mobility_data(n_classes = 5, seed = 123) seg <- moneca(mobility_data, segment.levels = 2) gg.moneca(seg)  # Custom styling gg.moneca(seg,           vertex.fill = \"red\",          edge.color = \"blue\",          show.borders = FALSE) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/initialize_tuning_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize Tuning Cache for Performance Optimization â€” initialize_tuning_cache","title":"Initialize Tuning Cache for Performance Optimization â€” initialize_tuning_cache","text":"Creates cache structure store computed results avoid redundant calculations parameter tuning.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/initialize_tuning_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize Tuning Cache for Performance Optimization â€” initialize_tuning_cache","text":"","code":"initialize_tuning_cache()"},{"path":"https://gmontaletti.github.io/MONECA/reference/initialize_tuning_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialize Tuning Cache for Performance Optimization â€” initialize_tuning_cache","text":"List containing cache structure.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/layout.matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Layout matrix â€” layout.matrix","title":"Layout matrix â€” layout.matrix","text":"matrix coordinates segments using Fruchterman-Reingold algorithm.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/layout.matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Layout matrix â€” layout.matrix","text":"","code":"layout.matrix(   segments,   attraction = c(320, 40, 10, 4, 2),   level = seq(segments$segment.list),   mode = \"directed\",   weight.adjustment = 1,   start.temp = 20,   niter = 10000,   tie.adjustment = 0.4,   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/layout.matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Layout matrix â€” layout.matrix","text":"segments segment object moneca(). attraction distance segment points level. level included levels. mode mode (directed undirected). weight.adjustment Weight adjustment factor. start.temp Starting temperature algorithm. niter Number iterations. tie.adjustment Tie adjustment factor. ... Additional arguments passed layout algorithm.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/layout.matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Layout matrix â€” layout.matrix","text":"matrix x,y coordinates node.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/level.matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","title":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","text":"Extracts mobility matrix given hierarchical level moneca result, strips \"Total\" margin (unless include_total = TRUE), labels rows columns central node within segment. Centrality measured sum incoming outgoing relative-risk weights within segment subgraph.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/level.matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","text":"","code":"level.matrix(segments, level = 2, include_total = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/level.matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","text":"segments moneca object returned moneca moneca_fast. level Integer. hierarchical level extract (default 2). Level 1 returns original input matrix. include_total Logical. TRUE, keep \"Total\" row column returned matrix (default FALSE).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/level.matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","text":"matrix rows columns labeled central node   segment. matrix carries \"segment_map\" attribute:   data.frame columns segment (integer index),   main_node (label chosen segment), members   (comma-separated string member names), n_members (number   members segment).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/level.matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract and Label Hierarchical Mobility Matrix â€” level.matrix","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% mx2 <- level.matrix(seg, level = 2) mx2 #>           Class 6+2 Class 1+1 Class 3 #> Class 6+2       134         6       9 #> Class 1+1        17       223      22 #> Class 3          20        14      55 #> attr(,\"segment_map\") #>   segment main_node                   members n_members #> 1       1   Class 6 Class 4, Class 5, Class 6         3 #> 2       2   Class 1          Class 1, Class 2         2 #> 3       3   Class 3                   Class 3         1 attr(mx2, \"segment_map\") #>   segment main_node                   members n_members #> 1       1   Class 6 Class 4, Class 5, Class 6         3 #> 2       2   Class 1          Class 1, Class 2         2 #> 3       3   Class 3                   Class 3         1"},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.mat.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Mobility Matrix â€” mob.mat","title":"Example Mobility Matrix â€” mob.mat","text":"mobility matrix showing occupational transitions sample population. example data demonstrating moneca functionality.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.mat.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Mobility Matrix â€” mob.mat","text":"numeric matrix row column names representing occupational categories.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.mat.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example Mobility Matrix â€” mob.mat","text":"Example data generated package demonstration.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.seg.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Segmentation Results â€” mob.seg","title":"Example Segmentation Results â€” mob.seg","text":"Pre-computed moneca segmentation results mob.mat example data. example data demonstrating moneca functionality.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.seg.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Segmentation Results â€” mob.seg","text":"moneca object containing segmentation results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/mob.seg.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example Segmentation Results â€” mob.seg","text":"Generated mob.mat using moneca().","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/modern_plotting.html","id":null,"dir":"Reference","previous_headings":"","what":"Modern MONECA Plotting with ggraph â€” modern_plotting","title":"Modern MONECA Plotting with ggraph â€” modern_plotting","text":"Enhanced plotting functions using ggplot2 ggraph moneca objects. functions replace old plotting system modern, customizable network visualizations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":null,"dir":"Reference","previous_headings":"","what":"MONECA - Mobility Network Clustering Analysis â€” moneca","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"Main function performing hierarchical clustering analysis mobility tables. MONECA creates weighted networks mobility data uses cliques identify discrete nested clusters positions high internal mobility.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"","code":"moneca(   mx = mx,   segment.levels = 3,   cut.off = 1,   mode = \"symmetric\",   delete.upper.tri = TRUE,   small.cell.reduction = 0,   auto_tune = FALSE,   tune_method = \"stability\",   tune_verbose = FALSE,   use_maximal_cliques = FALSE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"mx mobility table (square matrix) row column totals last row/column. Row names identify categories/classes. segment.levels Integer specifying number hierarchical segmentation levels compute. Default 3. algorithm may return fewer levels meaningful segmentation possible. cut.Numeric threshold minimum relative risk considered significant tie. Default 1 (mobility random expectation required). mode Character string specifying edge mode (\"symmetric\", \"Mutual\", \"Unmutual\"). Currently fully implemented - uses symmetric mode. delete.upper.tri Logical indicating whether use lower triangle efficiency. Default TRUE. small.cell.reduction Numeric value handle small cell counts. Cells counts threshold set 0. Default 0 (reduction). auto_tune Logical indicating whether automatically tune small.cell.reduction parameter. TRUE, uses optimization methods select best value. Default FALSE. tune_method Character string specifying auto-tuning method auto_tune TRUE. Options \"stability\" (default), \"quality\", \"performance\". See auto_tune_small_cell_reduction details. tune_verbose Logical indicating whether print verbose messages auto-tuning. Default FALSE. use_maximal_cliques Logical indicating whether use maximal cliques (faster, fewer cliques) instead cliques (slower, complete enumeration). Default FALSE (use cliques algorithmic correctness). Set TRUE performance optimization dense graphs.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"object class \"moneca\" containing: segment.list list segment memberships hierarchical level.       element list vectors containing original row indices. mat.list list aggregated mobility matrices level,       rows/columns represent segments instead original categories. small.cell.reduction small cell reduction parameter used.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"original antongrau/MONECA implementation progress bar functionality. memory-optimized version, use moneca_fast(). MONECA implements iterative algorithm : Converts mobility table relative risk matrix Identifies network cliques based threshold Groups nodes segments using clique structure Aggregates mobility table segments Repeats process specified number levels algorithm stops early segmentation possible (e.g., nodes collapse single segment).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"ToubÃ¸l, J., & Larsen, . G. (2017). Mapping Social Class Structure: Occupational Mobility Social Class Categories Using Network Analysis. Sociology, 51(6), 1257-1276.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MONECA - Mobility Network Clustering Analysis â€” moneca","text":"","code":"# Generate synthetic mobility data mobility_data <- generate_mobility_data(n_classes = 6, seed = 42)  # Run moneca analysis seg <- moneca(mobility_data, segment.levels = 3) #>    |                                                                               |                                                                      |   0%   |                                                                               |============                                                          |  17% #> 29% ready! #>    |                                                                               |=======================                                               |  33%   |                                                                               |===================================                                   |  50% #> 57% ready! #>    |                                                                               |===============================================                       |  67%   |                                                                               |==========================================================            |  83% #> 86% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0% #> 100% ready! #>  print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================  # Run moneca with auto-tuning for optimal small.cell.reduction seg_tuned <- moneca(mobility_data, segment.levels = 3,                      auto_tune = TRUE, tune_method = \"stability\",                      tune_verbose = TRUE) #> Auto-tuning small.cell.reduction parameter using method: stability #> Parallel decision: NO ( 1 cores) #> Starting auto-tuning for small.cell.reduction parameter... #> Method: stability  #> Matrix size: 7 x 7  #> Parallel processing: NO  #> Generated 20 candidate values #>  #> Evaluating 20 candidates using optimized batch processing... #>    |                                                                               |                                                                      |   0%   |                                                                               |====                                                                  |   5%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |=======                                                               |  10%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==========                                                            |  15%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==============                                                        |  20%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==================                                                    |  25%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |=====================                                                 |  30%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |========================                                              |  35%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |============================                                          |  40%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |================================                                      |  45%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |===================================                                   |  50%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================                                |  55%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==========================================                            |  60%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==============================================                        |  65%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |=================================================                     |  70%   |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |====================================================                  |  75%   |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |========================================================              |  80%   |                                                                               |============================================================          |  85%   |                                                                               |===============================================================       |  90%   |                                                                               |==================================================================    |  95%   |                                                                               |======================================================================| 100% #>  #>  #> Batch evaluation completed #> - Valid results: 15 of 20  #> - Mean stability score: 0.531  #> - Mean quality score: 0.502  #> - Weight matrices cached: 20  #>  #> Optimal small.cell.reduction: 51  #> Total tuning time: 46.85 seconds #> Selected optimal small.cell.reduction: 51 #>    |                                                                               |                                                                      |   0%   |                                                                               |==============                                                        |  20% #> 33% ready! #>    |                                                                               |============================                                          |  40% #> 50% ready! #>    |                                                                               |==========================================                            |  60%   |                                                                               |========================================================              |  80% #> 83% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>  #> Auto-tuning small.cell.reduction parameter using method: stability #> Parallel decision: NO ( 1 cores) #> Starting auto-tuning for small.cell.reduction parameter... #> Method: stability  #> Matrix size: 4 x 4  #> Parallel processing: NO  #> Generated 20 candidate values #>  #> Evaluating 20 candidates using optimized batch processing... #>    |                                                                               |                                                                      |   0%   |                                                                               |====                                                                  |   5%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |=======                                                               |  10%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==========                                                            |  15%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==============                                                        |  20%   |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==================                                                    |  25%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |=====================                                                 |  30%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |========================                                              |  35%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |============================                                          |  40%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |================================                                      |  45%   |                                                                               |===================================                                   |  50%   |                                                                               |======================================                                |  55%   |                                                                               |==========================================                            |  60%   |                                                                               |==============================================                        |  65%   |                                                                               |=================================================                     |  70%   |                                                                               |====================================================                  |  75%   |                                                                               |========================================================              |  80%   |                                                                               |============================================================          |  85%   |                                                                               |===============================================================       |  90%   |                                                                               |==================================================================    |  95%   |                                                                               |======================================================================| 100% #>  #>  #> Batch evaluation completed #> - Valid results: 8 of 20  #> - Mean stability score: 0.385  #> - Mean quality score: 0.247  #> - Weight matrices cached: 20  #>  #> Optimal small.cell.reduction: 10  #> Total tuning time: 22.91 seconds #> Selected optimal small.cell.reduction: 10 #>    |                                                                               |                                                                      |   0% #> 100% ready! #>  #> Auto-tuning small.cell.reduction parameter using method: stability #> Parallel decision: NO ( 1 cores) #> Starting auto-tuning for small.cell.reduction parameter... #> Method: stability  #> Matrix size: 3 x 3  #> Parallel processing: NO  #> Generated 20 candidate values #>  #> Evaluating 20 candidates using optimized batch processing... #>    |                                                                               |                                                                      |   0%   |                                                                               |====                                                                  |   5%   |                                                                               |=======                                                               |  10%   |                                                                               |==========                                                            |  15%   |                                                                               |==============                                                        |  20%   |                                                                               |==================                                                    |  25%   |                                                                               |=====================                                                 |  30%   |                                                                               |========================                                              |  35%   |                                                                               |============================                                          |  40%   |                                                                               |================================                                      |  45%   |                                                                               |===================================                                   |  50%   |                                                                               |======================================                                |  55%   |                                                                               |==========================================                            |  60%   |                                                                               |==============================================                        |  65%   |                                                                               |=================================================                     |  70%   |                                                                               |====================================================                  |  75%   |                                                                               |========================================================              |  80%   |                                                                               |============================================================          |  85%   |                                                                               |===============================================================       |  90%   |                                                                               |==================================================================    |  95%   |                                                                               |======================================================================| 100% #>  #>  #> Batch evaluation completed #> - Valid results: 0 of 20  #> - Mean stability score: 0  #> - Mean quality score: 0  #> - Weight matrices cached: 20  #>  #> Optimal small.cell.reduction: 0  #> Total tuning time: 2.79 seconds #> Selected optimal small.cell.reduction: 0 print(seg_tuned) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================  # Examine segment membership membership <- segment.membership(seg) print(membership) #>      name membership #> 1 Class 1        4.1 #> 2 Class 2        4.1 #> 3 Class 3        4.1 #> 4 Class 4        4.1 #> 5 Class 5        4.1 #> 6 Class 6        4.1"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Legacy Network Plot for MONECA Results â€” moneca.plot","title":"Legacy Network Plot for MONECA Results â€” moneca.plot","text":"Creates network visualization MONECA segmentation results using base graphics igraph. modern visualizations, use plot_moneca_ggraph.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Legacy Network Plot for MONECA Results â€” moneca.plot","text":"","code":"moneca.plot(   segments,   layout = NULL,   edges = NULL,   mode = \"directed\",   level = NULL,   vertex.size = 5,   vertex.frame.color = \"black\",   edge.curved = FALSE,   vertex.color = \"grey50\",   vertex.label.color = \"black\",   vertex.label.cex = 0.5,   vertex.label.dist = 0.12,   edge.arrow.size = 0.1,   mark.col = NULL,   mark.expand = 10,   border.col = \"black\",   edge.width = 1,   edge.color = \"black\" )"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Legacy Network Plot for MONECA Results â€” moneca.plot","text":"segments moneca object returned moneca. layout matrix node coordinates, typically layout.matrix. edges adjacency matrix edges, typically segment.edges. mode Character string specifying graph mode (\"directed\" \"undirected\"). level Integer vector hierarchical levels visualize. vertex.size Numeric value vertex size. Default 5. vertex.frame.color Color vertex borders. Default \"black\". edge.curved Logical curved edges. Default FALSE. vertex.color Color vertices. Default \"grey50\". vertex.label.color Color vertex labels. Default \"black\". vertex.label.cex Size multiplier labels. Default 0.5. vertex.label.dist Distance labels vertices. Default 0.12. edge.arrow.size Size edge arrows. Default 0.1. mark.col Color segment markers. Default NULL. mark.expand Expansion factor segment boundaries. Default 10. border.col Color segment borders. Default \"black\". edge.width Width edges. Default 1. edge.color Color edges. Can color name matrix. Default \"black\".","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Legacy Network Plot for MONECA Results â€” moneca.plot","text":"NULL (creates plot side effect).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca.plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Legacy Network Plot for MONECA Results â€” moneca.plot","text":"function provides backward compatibility earlier versions MONECA. new analyses, consider using plot_moneca_ggraph offers modern styling customization options.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":null,"dir":"Reference","previous_headings":"","what":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"Memory-optimized version main function performing hierarchical clustering analysis mobility tables. MONECA creates weighted networks mobility data uses cliques identify discrete nested clusters positions high internal mobility. optimized version moneca algorithm improved performance large datasets. Implements various performance optimizations including vectorization early stopping. Supports automatic margin detection optional density reduction large matrices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"","code":"moneca_fast(   mx = mx,   segment.levels = 3,   cut.off = 1,   mode = \"symmetric\",   delete.upper.tri = TRUE,   small.cell.reduction = 0,   use.sparse = FALSE,   min.density = 0,   max.clique.size = NULL,   progress = TRUE,   auto_tune = FALSE,   tune_method = \"stability\",   tune_verbose = FALSE,   use_maximal_cliques = FALSE,   isolates = FALSE,   has_margins = \"auto\",   reduce_density = \"auto\",   density_params = list() )  moneca_fast(   mx = mx,   segment.levels = 3,   cut.off = 1,   mode = \"symmetric\",   delete.upper.tri = TRUE,   small.cell.reduction = 0,   use.sparse = FALSE,   min.density = 0,   max.clique.size = NULL,   progress = TRUE,   auto_tune = FALSE,   tune_method = \"stability\",   tune_verbose = FALSE,   use_maximal_cliques = FALSE,   isolates = FALSE,   has_margins = \"auto\",   reduce_density = \"auto\",   density_params = list() )"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"mx mobility table (square matrix). Can include row column totals last row/column, core matrix without totals. Row names identify categories/classes. See has_margins parameter. segment.levels Integer specifying number hierarchical segmentation levels compute. Default 3. cut.Numeric threshold minimum relative risk considered significant tie. Default 1. mode Character string specifying edge mode. Currently uses symmetric mode. delete.upper.tri Logical indicating whether use lower triangle. Default TRUE. small.cell.reduction Numeric value handle small cell counts. Default 0. use.sparse Logical indicating whether use sparse matrices large data. Default FALSE. min.density Minimum strength-based density continue processing. Calculated mean(strength)/max(strength). Default 0 (disabled algorithmic fidelity). Set 0.01 higher early stopping optimization sparse graphs. max.clique.size Maximum size cliques consider (NULL limit). Default NULL. progress Logical indicating whether show progress bars. Default TRUE. auto_tune Logical indicating whether automatically tune small.cell.reduction parameter. TRUE, uses optimization methods select best value. Default FALSE. tune_method Character string specifying auto-tuning method auto_tune TRUE. Options \"stability\" (default), \"quality\", \"performance\". See auto_tune_small_cell_reduction details. tune_verbose Logical indicating whether print verbose messages auto-tuning. Default FALSE. use_maximal_cliques Logical indicating whether use maximal cliques (faster, fewer cliques) instead cliques (slower, complete enumeration). Default FALSE (use cliques algorithmic correctness). Set TRUE performance optimization dense graphs. isolates Logical. TRUE, returns additional summary information isolates (categories belonging multi-member segment final level). Isolates grouped category called \"altri\". Default FALSE. has_margins Controls whether input matrix includes totals row/column. \"auto\" (default): Automatically detects last row/column     contains marginal totals TRUE: Matrix already totals last row/column FALSE: Matrix core matrix without totals; margins     generated automatically reduce_density Controls density reduction preprocessing large matrices. \"auto\" (default): Applies density reduction matrix     30+ categories weight matrix count density exceeds 0.7 TRUE: Always apply density reduction FALSE: Never apply density reduction density_params Named list additional parameters passed reduce_density. example: list(method = \"svd\", normalization = \"ppmi\", k = 20). See reduce_density available parameters.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"object class \"moneca\" containing: segment.list list segment memberships hierarchical level.       element list vectors containing original row indices. mat.list list aggregated mobility matrices level,       rows/columns represent segments instead original categories. small.cell.reduction small cell reduction parameter used. object class \"moneca\" structure original moneca() function.   returned list always includes: margins_added Logical indicating whether margins generated density_reduction NULL density reduction applied, list       metadata reduction (method, k, variance_explained, etc.) isolates = TRUE, returned list also includes: isolates_summary list containing: membership Data frame columns name (category name)           group (segment name \"altri\" isolates) mobility_matrix Matrix mobility counts groups,           including \"altri\" group isolates","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"version includes intelligent memory management dense graphs optimized clique enumeration prevent memory issues large datasets. MONECA implements iterative algorithm : Converts mobility table relative risk matrix Identifies network cliques based threshold Groups nodes segments using clique structure Aggregates mobility table segments Repeats process specified number levels algorithm stops early segmentation possible (e.g., nodes collapse single segment). **Algorithm Features:** Simple memory-efficient clique testing using direct subset checking Intelligent dense graph detection fallback maximal cliques Streamlined implementation based original bejler.test approach Maintains algorithmic correctness minimizing memory overhead implementation optimized single-core performance using: Vectorized matrix operations improved speed Optional sparse matrix support via use.sparse parameter Early stopping via min.density threshold (disabled default) Clique size limiting via max.clique.size parameter Pre-computed max clique size early skip impossible merges Optimized node ordering clique membership tests Margin Handling: has_margins = \"auto\", function checks whether last row column matrix contain row/column sums core matrix. detected, margins generated automatically. Density Reduction: Large matrices (30+ categories) high density can preprocessed using reduce_density remove noise clustering. controlled reduce_density density_params. Produces identical results moneca using default parameters reduce_density = FALSE. use: system - recommended use cases Small large datasets want explicit control optimization parameters","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"ToubÃ¸l, J., & Larsen, . G. (2017). Mapping Social Class Structure: Occupational Mobility Social Class Categories Using Network Analysis. Sociology, 51(6), 1257-1276.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_fast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MONECA Fast - Memory-Optimized Mobility Network Clustering Analysis â€” moneca_fast","text":"","code":"# Generate synthetic mobility data mobility_data <- generate_mobility_data(n_classes = 6, seed = 42)  # Run moneca analysis (fast version) seg <- moneca_fast(mobility_data, segment.levels = 3) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================  # Run with auto-tuning for optimal parameters seg_tuned <- moneca_fast(mobility_data, segment.levels = 3,                          auto_tune = TRUE, tune_method = \"stability\") #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% print(seg_tuned) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================  # Examine segment membership membership <- segment.membership(seg) print(membership) #>      name membership #> 1 Class 1        4.1 #> 2 Class 2        4.1 #> 3 Class 3        4.1 #> 4 Class 4        4.1 #> 5 Class 5        4.1 #> 6 Class 6        4.1  # Visualize with modern plotting if (FALSE) { # \\dontrun{ plot_moneca_ggraph(seg, node_color = \"segment\", title = \"MONECA Clustering\") } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_graph_from_adjacency.html","id":null,"dir":"Reference","previous_headings":"","what":"Export fast moneca functions for use in package â€” moneca_graph_from_adjacency","title":"Export fast moneca functions for use in package â€” moneca_graph_from_adjacency","text":"Export fast moneca functions use package","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_graph_from_adjacency.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export fast moneca functions for use in package â€” moneca_graph_from_adjacency","text":"","code":"moneca_graph_from_adjacency(...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_segments.html","id":null,"dir":"Reference","previous_headings":"","what":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","title":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","text":"Constructs moneca_segments object provides single, authoritative description every segment every hierarchical level. Group membership built using progressive-merge algorithm level.matrix, representative node group chosen maximising total directed strength asymmetric weight matrix.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_segments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","text":"","code":"moneca_segments(segments)"},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_segments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","text":"segments moneca object returned moneca moneca_fast.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_segments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","text":"moneca_segments object (S3 class) containing: levels list one entry per hierarchical level.     entry $groups (list integer vectors member     indices) $map (data.frame columns segment,     main_node, members, n_members, label). weight_matrix asymmetric relative-risk matrix used     centrality computation (NA values). original_names Character vector node names (excluding     \"Total\"). n_levels Integer, number hierarchical levels. small.cell.reduction Numeric, small.cell.reduction     parameter stored moneca object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/moneca_segments.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Canonical Segment Metadata for MONECA Results â€” moneca_segments","text":"","code":"mob <- generate_mobility_data(n_classes = 6, n_total = 500, seed = 42) seg <- moneca_fast(mob, segment.levels = 2) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% meta <- moneca_segments(seg) print(meta) #> moneca_segments object #>   Nodes: 6  #>   Levels: 3  #>     Level 1: 6 groups #>     Level 2: 3 groups #>     Level 3: 2 groups get_segment_map(meta, level = 2) #>   segment main_node                   members n_members     label #> 1       1   Class 6 Class 4, Class 5, Class 6         3 Class 6+2 #> 2       2   Class 1          Class 1, Class 2         2 Class 1+1 #> 3       3   Class 3                   Class 3         1   Class 3"},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":null,"dir":"Reference","previous_headings":"","what":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"variant MONECA uses maximal cliques improved performance. Maximal cliques complete subgraphs extended adding another node, providing faster computation cost potentially different clustering results compared standard algorithm.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"","code":"new_moneca(   mx = mx,   segment.levels = 3,   cut.off = 1,   mode = \"symmetric\",   delete.upper.tri = TRUE,   small.cell.reduction = 0,   auto_tune = FALSE,   tune_method = \"stability\",   tune_verbose = FALSE,   max.clique.size = NULL,   progress = FALSE,   use.sparse = FALSE,   min.density = 0 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"mx mobility table (square matrix) row column totals last row/column. Row names identify categories/classes. segment.levels Integer specifying number hierarchical segmentation levels compute. Default 3. algorithm may return fewer levels meaningful segmentation possible. cut.Numeric threshold minimum relative risk considered significant tie. Default 1 (mobility random expectation required). mode Character string specifying edge mode (\"symmetric\", \"Mutual\", \"Unmutual\"). Currently fully implemented - uses symmetric mode. delete.upper.tri Logical indicating whether use lower triangle efficiency. Default TRUE. small.cell.reduction Numeric value handle small cell counts. Cells counts threshold set 0. Default 0 (reduction). auto_tune Logical indicating whether automatically tune small.cell.reduction parameter. TRUE, uses optimization methods select best value. Default FALSE. tune_method Character string specifying auto-tuning method auto_tune TRUE. Options \"stability\" (default), \"quality\", \"performance\". See auto_tune_small_cell_reduction details. tune_verbose Logical indicating whether print verbose messages auto-tuning. Default FALSE. max.clique.size Maximum size cliques consider (NULL limit). Default NULL. Useful preventing memory issues dense graphs. specified, uses optimized moneca_fast implementation. progress Logical indicating whether show progress bars computation. Default FALSE. Set TRUE long-running analyses. use.sparse Logical indicating whether use sparse matrices large data. Default FALSE. applicable max.clique.size specified. min.density Minimum strength-based density continue processing. Calculated mean(strength)/max(strength). Default 0 (disabled). applicable max.clique.size specified. Set 0.01 higher early stopping optimization sparse graphs.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"object class \"moneca\" containing: segment.list list segment memberships hierarchical level.       element list vectors containing original row indices. mat.list list aggregated mobility matrices level,       rows/columns represent segments instead original categories. small.cell.reduction small cell reduction parameter used.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"function always uses maximal cliques (via igraph::max_cliques()), typically results : Faster computation: Maximal cliques fewer number     faster find cliques Different results: Clustering may differ standard MONECA     maximal cliques restrictive Better scalability: Recommended large networks (>20 nodes)     dense graphs function intelligently selects underlying implementation: max.clique.size, progress, use.sparse,     min.density specified, uses moneca_fast     advanced performance features Otherwise, uses standard moneca implementation use new_moneca(): Working large networks (>20 nodes) Dense mobility tables standard MONECA slow computational speed prioritized exhaustive clique enumeration Exploratory analysis approximate clustering acceptable use standard moneca(): Small medium networks (<20 nodes) need comprehensive clique-based segmentation Publication-quality results requiring original algorithm computational time constraint","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"performance-considerations","dir":"Reference","previous_headings":"","what":"Performance Considerations","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"performance gain using maximal cliques depends graph density: Sparse graphs: 2-5x speedup Medium density: 5-20x speedup Dense graphs: 20-100x speedup","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"result-differences","dir":"Reference","previous_headings":"","what":"Result Differences","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"Maximal cliques produce different valid results represent restrictive interpretation network structure. Key differences: Maximal cliques may merge segments -cliques separate Hierarchical structure may fewer levels Overall clustering quality remains high interpretation differs","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"ToubÃ¸l, J., & Larsen, . G. (2017). Mapping Social Class Structure: Occupational Mobility Social Class Categories Using Network Analysis. Sociology, 51(6), 1257-1276.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/new_moneca.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"New MONECA - Fast Clustering with Maximal Cliques â€” new_moneca","text":"","code":"if (FALSE) { # \\dontrun{ # Generate synthetic mobility data mobility_data <- generate_mobility_data(n_classes = 6, seed = 42)  # Basic usage - uses maximal cliques seg_new <- new_moneca(mobility_data, segment.levels = 3) print(seg_new)  # Compare with standard moneca seg_standard <- moneca(mobility_data, segment.levels = 3)  # Visualize results plot_moneca_ggraph(seg_new, node_color = \"segment\") } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/optimized_algorithms.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimized Algorithms for MONECA Clustering â€” optimized_algorithms","title":"Optimized Algorithms for MONECA Clustering â€” optimized_algorithms","text":"module provides highly optimized implementations core MONECA algorithms using vectorization, efficient data structures, optional data.table integration maximum performance.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/pearson_residuals.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Pearson Residuals â€” pearson_residuals","title":"Calculate Pearson Residuals â€” pearson_residuals","text":"Computes Pearson residuals standardize marginal distribution effects.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/pearson_residuals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Pearson Residuals â€” pearson_residuals","text":"","code":"pearson_residuals(mx)"},{"path":"https://gmontaletti.github.io/MONECA/reference/pearson_residuals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Pearson Residuals â€” pearson_residuals","text":"mx mobility matrix (core, without totals)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/pearson_residuals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Pearson Residuals â€” pearson_residuals","text":"Matrix Pearson residuals","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_nmf_reduction.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform NMF Reduction â€” perform_nmf_reduction","title":"Perform NMF Reduction â€” perform_nmf_reduction","text":"Applies Non-negative Matrix Factorization returns reconstruction original matrix use filter.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_nmf_reduction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform NMF Reduction â€” perform_nmf_reduction","text":"","code":"perform_nmf_reduction(mx, k, verbose = FALSE, seed = NULL)"},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_nmf_reduction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform NMF Reduction â€” perform_nmf_reduction","text":"mx Input matrix (non-negative) k Number components verbose Print progress seed Random seed","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_nmf_reduction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform NMF Reduction â€” perform_nmf_reduction","text":"List reconstructed matrix original (non-negative) matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform SVD (with optional irlba) â€” perform_svd","title":"Perform SVD (with optional irlba) â€” perform_svd","text":"Perform SVD (optional irlba)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform SVD (with optional irlba) â€” perform_svd","text":"","code":"perform_svd(mx, k)"},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform SVD (with optional irlba) â€” perform_svd","text":"mx Matrix decompose k Number components","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform SVD (with optional irlba) â€” perform_svd","text":"SVD result list","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd_reduction.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform SVD Reduction â€” perform_svd_reduction","title":"Perform SVD Reduction â€” perform_svd_reduction","text":"Applies truncated SVD reconstructs matrix.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd_reduction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform SVD Reduction â€” perform_svd_reduction","text":"","code":"perform_svd_reduction(mx, k, verbose = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd_reduction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform SVD Reduction â€” perform_svd_reduction","text":"mx Normalized matrix k Number components verbose Print progress","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/perform_svd_reduction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform SVD Reduction â€” perform_svd_reduction","text":"Reconstructed matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":null,"dir":"Reference","previous_headings":"","what":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"Creates focused visualizations mobility patterns single focal node (ego). function shows incoming outgoing mobility flows specific category, making ideal understanding individual position dynamics.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"","code":"plot_ego_ggraph(   segments,   mobility_matrix,   ego_id,   min_weight = 0,   layout = \"stress\",   highlight_color = \"red\",   flow_color = \"viridis\",   node_size_range = c(2, 8),   edge_width_range = c(0.2, 3),   title = NULL,   segment_naming = \"auto\",   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"segments moneca object returned moneca. mobility_matrix original mobility matrix used moneca analysis. include row column totals. ego_id Integer character specifying focal node. Can : Integer: Row/column index mobility matrix Character: Row/column name mobility matrix min_weight Numeric threshold minimum edge weight include nodes. nodes connected ego edge weights >= min_weight shown. Default 0 (show connected nodes). Use higher values focus stronger mobility flows. layout Character string specifying layout algorithm. Default \"stress\" often works well ego networks. options include \"fr\", \"kk\", \"dh\". highlight_color Color ego (focal) node. Default \"red\". flow_color Character string specifying color scheme mobility flows. Default \"viridis\". Can viridis variant (\"viridis\", \"plasma\", \"inferno\", etc.). node_size_range Numeric vector length 2 specifying range node sizes. Default c(3, 12). edge_width_range Numeric vector length 2 specifying range edge widths. Default c(0.5, 3). title Character string plot title. Default NULL. segment_naming Specifies name segments visualization. Can : Character string: \"auto\" (default), \"concat\", \"pattern\", \"custom\" -     passed segment.membership.enhanced automatic naming data.frame: Custom segment labels columns \"name\" (node names     mobility matrix) \"segment_label\" (desired custom labels). allows complete     control segment naming NULL: Uses default \"auto\" strategy data.frame provided, custom labels override automatically generated names. data.frame approach useful meaningful business names multilingual applications. ... Additional arguments passed ggraph layout function.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"ggplot2 object showing ego network visualization.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"Ego networks particularly useful understanding mobility patterns specific social positions. visualization highlights: focal position (ego) distinct color Incoming mobility flows (edges pointing ego) Outgoing mobility flows (edges ego) relative strength different flows edge width color non-zero mobility flows displayed reduce visual clutter. Edge colors widths scaled represent volume mobility flows.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_ego_ggraph.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ego Network Visualization with ggraph â€” plot_ego_ggraph","text":"","code":"if (FALSE) { # \\dontrun{ # Generate synthetic data and run MONECA mobility_data <- generate_mobility_data(n_classes = 6, seed = 123) seg <- moneca(mobility_data, segment.levels = 3)  # Ego network for the middle category (index 3) plot_ego_ggraph(seg, mobility_data, ego_id = 3,                 title = \"Mobility from Middle Class\") } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"Creates dendrogram-like visualization hierarchical clustering results moneca analysis. function shows categories progressively aggregated across segmentation levels, making hierarchical structure clear.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"","code":"plot_moneca_dendrogram(   segments,   height_method = \"uniform\",   color_segments = TRUE,   show_labels = TRUE,   label_size = 3,   branch_width = 1,   title = \"MONECA Hierarchical Clustering\",   subtitle = NULL,   color_palette = \"Set3\",   theme_style = \"minimal\",   vertical = TRUE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"segments moneca object returned moneca. height_method Character string specifying calculate dendrogram heights: \"uniform\" (default): Equal spacing levels \"mobility\": Height based mobility reduction levels \"segments\": Height based number segments level color_segments Logical indicating whether color branches final segment membership. Default TRUE. show_labels Logical indicating whether show category labels bottom. Default TRUE. label_size Numeric size labels. Default 3. branch_width Numeric width dendrogram branches. Default 1. title Character string plot title. Default \"MONECA Hierarchical Clustering\". subtitle Character string plot subtitle. Default NULL. color_palette Character string specifying RColorBrewer palette segment colors. Default \"Set3\". theme_style Character string specifying plot theme. Options \"minimal\" (default), \"classic\", \"void\". vertical Logical indicating whether plot vertically (TRUE, default) horizontally (FALSE).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"ggplot2 object representing dendrogram.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"function creates dendrogram visualization clearly shows: individual categories (leaves) grouped level hierarchical relationships segments progressive aggregation individual categories larger segments dendrogram branches show merging points categories segments combined based MONECA algorithm's clique detection. Unlike traditional hierarchical clustering, MONECA can create non-binary trees multiple categories merge simultaneously. Visual Features: Curved branches: Uses smooth curves instead angular segments better aesthetics Horizontal layout: Levels progress horizontally (left right) categories arranged vertically -Crossing Layout: Categories automatically ordered using hierarchical algorithm completely eliminates line crossings levels algorithm processes segments aggregated level , ensuring level, categories grouped optimally prevent crossing lines. creates clearest possible visualization hierarchical structure.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_dendrogram.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot MONECA Results as Dendrogram â€” plot_moneca_dendrogram","text":"","code":"if (FALSE) { # \\dontrun{ # Generate synthetic data and run MONECA mobility_data <- generate_mobility_data(n_classes = 8, seed = 123) seg <- moneca(mobility_data, segment.levels = 3)  # Basic dendrogram plot_moneca_dendrogram(seg) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":null,"dir":"Reference","previous_headings":"","what":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"Creates sophisticated network visualizations MONECA clustering results using ggraph ggplot2. function provides modern, highly customizable plots support multiple layout algorithms, node aesthetics, segment highlighting.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"","code":"plot_moneca_ggraph(   segments,   level = NULL,   layout = \"fr\",   edges = \"auto\",   node_size = \"total\",   node_color = \"segment\",   node_alpha = 0.8,   edge_width = \"weight\",   edge_color = \"grey50\",   edge_alpha = 0.6,   show_labels = TRUE,   label_size = 3,   show_segments = TRUE,   segment_alpha = 0.3,   color_palette = \"Set3\",   theme_style = \"void\",   title = NULL,   segment_naming = \"auto\",   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"segments moneca object returned moneca. level Integer vector specifying hierarchical levels visualize. Default displays levels except first (represents individual categories). layout Character string matrix specifying layout algorithm: \"fr\" (default): Fruchterman-Reingold force-directed layout \"kk\": Kamada-Kawai layout \"dh\": Davidson-Harel layout \"mds\": Multidimensional scaling \"stress\": Stress majorization Matrix: Custom coordinate matrix (n_nodes x 2) edges Edge matrix \"auto\" automatically generate using segment.edges. Default \"auto\". node_size Aesthetic mapping node size: \"total\": Size total mobility volume (default) \"mobility\": Size -diagonal mobility rate Numeric vector: Custom sizes node Single numeric: Fixed size nodes node_color Aesthetic mapping node color: \"segment\" (default): Color segment membership \"mobility\": Color mobility rate Character vector: Custom colors node Single color: Fixed color nodes node_alpha Numeric value (0-1) node transparency. Default 0.8. edge_width Aesthetic edge width: \"weight\" (default): Width proportional edge weight Numeric: Fixed width edges edge_color Color edges. Default \"grey50\". edge_alpha Numeric value (0-1) edge transparency. Default 0.6. show_labels Logical indicating whether display node labels. Default TRUE. label_size Numeric size node labels. Default 3. show_segments Logical indicating whether highlight segment boundaries. Default TRUE. segment_alpha Numeric value (0-1) segment boundary transparency. Default 0.3. color_palette Character string specifying color palette segments. Can RColorBrewer palette name. Default \"Set3\". theme_style Character string specifying plot theme: \"void\" (default): Clean background axes \"minimal\": Minimal theme subtle gridlines \"classic\": Traditional ggplot2 theme title Character string plot title. Default NULL (title). segment_naming Specifies name segments visualization. Can : Character string: \"auto\" (default), \"concat\", \"pattern\", \"custom\" -     passed segment.membership.enhanced automatic naming data.frame: Custom segment labels columns \"name\" (node names     mobility matrix) \"segment_label\" (desired custom labels). allows complete     control segment naming NULL: Uses default \"auto\" strategy data.frame provided, custom labels override automatically generated names. data.frame approach useful meaningful business names (e.g., \"Upper Management\" instead \"Segment 1\") multilingual applications. ... Additional arguments passed ggraph layout functions.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"ggplot2 object can customized displayed.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"function creates publication-quality network visualizations extensive customization options. automatically handles node positioning, edge rendering, segment highlighting. resulting plot can modified using standard ggplot2 syntax. interactive exploration, different layout algorithms may work better different network structures. Force-directed layouts (\"fr\") work well cases, \"stress\" layouts often produce cleaner results dense networks. Segment Naming: new data.frame approach segment_naming provides complete control segments labeled. particularly useful : Business applications meaningful names essential (e.g., \"Senior Management\" vs \"Segment 1\") Multilingual visualizations labels need translation Presentations consistent, professional terminology required Partial customization specific segments need custom names","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_moneca_ggraph.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Modern Network Visualization for MONECA Results â€” plot_moneca_ggraph","text":"","code":"if (FALSE) { # \\dontrun{ # Generate synthetic data and run MONECA mobility_data <- generate_mobility_data(n_classes = 6, seed = 123) seg <- moneca(mobility_data, segment.levels = 3)  # Basic network plot plot_moneca_ggraph(seg)  # Customized plot with different aesthetics plot_moneca_ggraph(seg,   layout = \"stress\",   node_color = \"mobility\",   color_palette = \"Spectral\",   title = \"Social Mobility Network\" ) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_scree.html","id":null,"dir":"Reference","previous_headings":"","what":"Scree Plot for Component Selection â€” plot_scree","title":"Scree Plot for Component Selection â€” plot_scree","text":"Creates ggplot2 visualization variance explained per component, useful selecting number components (k) dimensionality reduction.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_scree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scree Plot for Component Selection â€” plot_scree","text":"","code":"plot_scree(   mx,   max_components = 50,   variance_target = 0.75,   show_elbow = TRUE,   title = NULL )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_scree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scree Plot for Component Selection â€” plot_scree","text":"mx mobility matrix totals row/column max_components Maximum number components display. Default 50. variance_target Optional numeric (0-1) show target variance line. Default 0.75. show_elbow Logical indicating whether highlight elbow point. Default TRUE. title Optional plot title","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_scree.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scree Plot for Component Selection â€” plot_scree","text":"ggplot2 object","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_scree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scree Plot for Component Selection â€” plot_scree","text":"","code":"# Generate test data data <- generate_mobility_data(n_classes = 30, seed = 123)  # Basic scree plot plot_scree(data)   # With custom variance target plot_scree(data, variance_target = 0.80)   # Without elbow detection plot_scree(data, show_elbow = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize Segment Quality Metrics â€” plot_segment_quality","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"Creates comprehensive visualizations segment quality metrics MONECA analysis. function provides multiple plot types help assess quality characteristics segmentation.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"","code":"plot_segment_quality(   segments,   plot_type = \"overview\",   level = 2,   metrics = NULL,   color_palette = NULL,   theme_style = \"minimal\",   title = NULL,   show_labels = TRUE,   label_size = 3,   segment_naming = \"auto\" )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"segments moneca object returned moneca. plot_type Character string specifying type visualization: \"overview\" (default): Multi-panel overview key metrics \"cohesion\": Within-mobility vs segment size scatter plot \"radar\": Radar/spider plot normalized metrics per segment \"heatmap\": Heatmap metrics across levels \"evolution\": Line plot showing metric evolution across levels level Integer specifying hierarchical level visualize. Default 2. Use NULL levels (valid plot types). metrics Character vector metrics include. Default includes . Options: \"within.mobility\", \"share..mobility\", \"Density\", \"Nodes\", \"Max.path\", \"share..total\" color_palette Character string specifying RColorBrewer palette. Default \"Set3\" categorical data, \"RdYlBu\" continuous. theme_style Character string specifying plot theme: \"minimal\" (default), \"classic\", \"void\". title Character string plot title. Default auto-generated based plot type. show_labels Logical indicating whether show segment labels. Default TRUE. label_size Numeric size labels. Default 3. segment_naming Specifies name segments visualization. Can : Character string: \"auto\" (default), \"concat\", \"pattern\", \"custom\" -     passed segment.membership.enhanced automatic naming data.frame: Custom segment labels required columns \"name\" \"segment_label\".     parameter accepts direct output segment.membership.enhanced,     making easy maintain consistent segment naming across visualizations.     data.frame must : \"name\": Node names original mobility matrix \"segment_label\": Meaningful segment names (e.g., \"Executive_Leadership\") NULL: Uses default \"auto\" strategy Recommended workflow: Generate enhanced membership enhanced <- segment.membership.enhanced(segments, naming_strategy = \"pattern\") pass directly: plot_segment_quality(segments, segment_naming = enhanced). ensures consistent, meaningful segment names across plot types visualizations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"ggplot2 object (list ggplot2 objects \"overview\" type).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"plot type serves different analytical purpose: Overview: Four-panel display showing: Within-mobility segment (bar chart) Segment sizes (nodes) Network density Share total mobility Cohesion: Scatter plot within-mobility y-axis segment size x-axis. Ideal segments appear upper-right (large cohesive). Points sized share mobility. Radar: Multi-dimensional comparison showing metrics normalized 0-1 scale. Useful comparing segment profiles. Heatmap: Shows metrics across levels segments. Colors indicate metric values, making patterns easy spot. Evolution: Line plots showing metric changes across hierarchical levels segment lineage.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_segment_quality.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize Segment Quality Metrics â€” plot_segment_quality","text":"","code":"if (FALSE) { # \\dontrun{ # Generate data and run MONECA mobility_data <- generate_mobility_data(n_classes = 8, seed = 123) seg <- moneca(mobility_data, segment.levels = 3)  # Overview of level 2 quality plot_segment_quality(seg)  # Radar plot for segment comparison plot_segment_quality(seg, plot_type = \"radar\", level = 2) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":null,"dir":"Reference","previous_headings":"","what":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"Creates series network plots showing segmentation evolves across hierarchical levels moneca analysis. \"stair plot\" provides insight progressive clustering social positions.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"","code":"plot_stair_ggraph(   segments,   levels = seq_along(segments$segment.list),   layout = NULL,   ncol = 2,   segment_naming = \"auto\",   include_first_level = TRUE,   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"segments moneca object returned moneca. levels Integer vector specifying hierarchical levels visualize. Default includes levels. layout Layout specification consistency across plots. Can : NULL (default): Use layout.matrix() consistent positioning Character string: Layout algorithm name (\"fr\", \"kk\", \"stress\", etc.) Matrix: Custom coordinate matrix node positions ncol Integer specifying number columns plot grid. Default 2. Set 1 vertical arrangement. segment_naming Specifies name segments across visualization levels. Can : Character string: \"auto\" (default), \"concat\", \"pattern\", \"custom\" -     passed segment.membership.enhanced automatic naming data.frame: Custom segment labels columns \"name\" (node names     mobility matrix) \"segment_label\" (desired custom labels). allows complete     control segment naming across hierarchical levels NULL: Uses default \"auto\" strategy data.frame provided, custom labels override automatically generated names consistently across levels. data.frame approach particularly useful stair plots maintains consistent naming across hierarchical progression. include_first_level Logical indicating whether include first level (individual classes without segmentation). Default TRUE. ... Additional arguments passed plot_moneca_ggraph.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"combine_plots = TRUE, returns combined plot grid object. combine_plots = FALSE, returns list ggplot objects, one level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"stair plot helps visualize hierarchical nature MONECA segmentation showing larger segments higher levels break smaller, specific segments lower levels. particularly useful : Understanding segmentation process Identifying optimal levels analysis Presenting results different audiences Comparing segmentation stability across levels using consistent layout across plots, relative positions nodes remain , making easier track segments evolve.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/plot_stair_ggraph.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Multi-Level Segmentation Visualization (Stair Plot) â€” plot_stair_ggraph","text":"","code":"if (FALSE) { # \\dontrun{ # Generate synthetic data and run MONECA mobility_data <- generate_mobility_data(n_classes = 6, seed = 123) seg <- moneca(mobility_data, segment.levels = 4)  # Basic stair plot stair_plots <- plot_stair_ggraph(seg)  # Customized stair plot with specific levels custom_stair <- plot_stair_ggraph(seg,                                  levels = c(2, 3),                                  layout = \"stress\",                                  ncol = 1) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.density_reduced.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for density_reduced Objects â€” print.density_reduced","title":"Print Method for density_reduced Objects â€” print.density_reduced","text":"Print Method density_reduced Objects","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.density_reduced.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for density_reduced Objects â€” print.density_reduced","text":"","code":"# S3 method for class 'density_reduced' print(x, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.density_reduced.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for density_reduced Objects â€” print.density_reduced","text":"x density_reduced object ... Additional arguments (ignored)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.density_reduced.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for density_reduced Objects â€” print.density_reduced","text":"Invisibly returns object","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.descriptive.moneca.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","title":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","text":"Internal function formats displays detailed statistics calculated print.moneca method. function creates formatted tables showing network properties mobility statistics across hierarchical levels.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.descriptive.moneca.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","text":"","code":"# S3 method for class 'descriptive.moneca' print(x, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.descriptive.moneca.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","text":"x descriptive.moneca object containing calculated statistics. ... Additional arguments (currently unused).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.descriptive.moneca.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","text":"NULL (called side effects - printing formatted output).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.descriptive.moneca.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Print Method for Descriptive MONECA Statistics â€” print.descriptive.moneca","text":"internal function responsible formatted display MONECA analysis results. creates several summary tables: Degree distributions (, , ) level Edge weight distributions level Diagonal mobility percentages Network density connectivity statistics","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.first_level_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Print first level summary â€” print.first_level_summary","title":"Print first level summary â€” print.first_level_summary","text":"Print first level summary","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.first_level_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print first level summary â€” print.first_level_summary","text":"","code":"# S3 method for class 'first_level_summary' print(x, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.first_level_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print first level summary â€” print.first_level_summary","text":"x first_level_summary object. ... Additional arguments (unused).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.first_level_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print first level summary â€” print.first_level_summary","text":"Invisibly returns object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for moneca Objects (Enhanced) â€” print.moneca","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"Displays comprehensive mobility analysis results moneca clustering clear, interpretable statistics improved labeling. Output structured follow natural flow analysis overall patterns detailed metrics.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"","code":"# S3 method for class 'moneca' print(   x,   small.cell.reduction = x$small.cell.reduction,   show.degree.stats = TRUE,   digits = 1,   ... )"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"x moneca object returned moneca. small.cell.reduction Numeric threshold small cell handling. NULL, uses value moneca object. show.degree.stats Logical. TRUE (default), displays detailed degree distribution statistics hierarchical level. digits Integer. Number decimal places numeric output (default 1). ... Additional arguments (currently unused).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"Invisibly returns NULL. function called side effect   printing formatted summary.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"output organized four main sections follow analysis workflow: Section 1: OVERALL MOBILITY PATTERNS Overall Population Mobility Rate: Percentage total     population experiences form mobility (moves origin     different destination). Calculated : (total -diagonal cells) / (grand total).     rate 20 Average Mobility Concentration: Mean percentage mobility     captured significant pathways (edges relative risk > 1) across     segmentation levels. Higher values indicate mobility concentrated     fewer, stronger pathways rather dispersed randomly. Section 2: HIERARCHICAL SEGMENTATION ANALYSIS Internal Mobility Within Segments (percent): Shows percentage mobility remains within segment boundaries     level. Level 1 represents original categories (always 100     category segment). Higher levels show increasing aggregation. Values decrease higher levels segments combine different origin     categories, naturally reducing internal cohesion. High values (>70 Mobility Concentration Significant Pathways Level (percent): Percentage total mobility flowing edges relative risk > 1. Indicates much mobility follows stronger--expected pathways     versus random distribution. Higher values suggest clearer mobility structure; lower values indicate     dispersed patterns. Network Structure Level: Active Segments/Classes: Number nodes network.     Decreases higher levels categories aggregate segments. Significant Edges: Count mobility pathways relative     risk > 1. represent stronger--expected mobility connections. Network Density: Proportion possible edges exist.     Calculated : (actual edges) / (possible edges). Range 0-1. Isolated Segments: Number segments significant     connections segments. Isolates represent positions exchange     members primarily internally weak external connections. Section 3: DETAILED WEIGHTED DEGREE DISTRIBUTIONS (optional) Shows distribution statistics (Min, Q1, Median, Mean, Q3, Max) : Total Weighted Connections: Sum weighted incoming outgoing     connections (strength) node. Represents total volume mobility     flows, just count connections. Outward Mobility Strength: Sum weights outgoing edges     origin. High -strength indicates positions send large volumes     destinations, weighted relative risk. Inward Mobility Strength: Sum weights incoming edges     destination. High -strength indicates positions receive large     volumes origins, weighted relative risk. Edge Weight Distribution: Distribution relative risk values     significant edges. Values > 1 indicate mobility expected levels.     Higher values represent stronger mobility pathways.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"technical-terms","dir":"Reference","previous_headings":"","what":"Technical Terms","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"Isolate node (category segment) significant     connections nodes. mobility analysis, isolates represent     positions either high internal retention weak     exchange positions. necessarily problematic - may indicate     genuinely distinct positions. Relative Risk Ratio observed expected mobility     independence. Values > 1 indicate mobility exceeds random expectation;     < 1 indicates expectation. Used edge weights network. Network Density Proportion possible connections     actually exist. fully connected network (density = 1), every position     significant mobility every position. Low density indicates     mobility channeled specific pathways. Degree/Strength weighted networks, use strength     instead simple degree: sum edge weights connected node.     -strength = sum incoming edge weights, -strength = sum outgoing     edge weights, total strength = sum . High strength nodes handle large     volumes mobility flow, just many connections. Segmentation Level Hierarchical aggregation level. Level 1 =     original categories, Level 2 = first aggregation based cliques, etc.     Higher levels represent coarser groupings.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print Method for moneca Objects (Enhanced) â€” print.moneca","text":"","code":"# Generate data and run analysis mobility_data <- generate_mobility_data(n_classes = 6, seed = 42) seg <- moneca(mobility_data, segment.levels = 3) #>    |                                                                               |                                                                      |   0%   |                                                                               |============                                                          |  17% #> 29% ready! #>    |                                                                               |=======================                                               |  33%   |                                                                               |===================================                                   |  50% #> 57% ready! #>    |                                                                               |===============================================                       |  67%   |                                                                               |==========================================================            |  83% #> 86% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0% #> 100% ready! #>   # Print comprehensive summary with all statistics print(seg) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================  # Hide detailed degree distributions for cleaner output print(seg, show.degree.stats = FALSE) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>    60.7    74.0    89.2   100.0  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>    79.5    74.0    89.2   100.0  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> ================================================================================  # Show more decimal places for precision print(seg, digits = 2) #>  #> ================================================================================ #>                         moneca MOBILITY ANALYSIS RESULTS                         #> ================================================================================ #>  #> OVERALL MOBILITY PATTERNS #> ------------------------------------------------------------------------------- #> Overall Population Mobility Rate:                    39.3% #> Average Mobility Concentration (all levels):         85.7% #>  #> HIERARCHICAL SEGMENTATION ANALYSIS #> ------------------------------------------------------------------------------- #>  #> Internal Mobility Within Segments (%): #> Level 1 Level 2 Level 3 Level 4  #>   60.68   74.03   89.21  100.00  #>  #> Mobility Concentration in Significant Pathways by Level (%): #> Level 1 Level 2 Level 3 Level 4  #>   79.48   74.03   89.21  100.00  #>  #> Network Structure by Level: #>                                    Level 1      Level 2      Level 3      Level 4  #> ------------------------------------------------------------------------------- #> Active Segments/Classes:                 6            3            2            1  #> Significant Edges:                       7            0            0            0  #> Network Density:                     0.233        0.000        0.000          NaN  #> Isolated Segments:                       0            3            2            1  #>  #> DETAILED WEIGHTED DEGREE DISTRIBUTIONS (STRENGTH) #> ------------------------------------------------------------------------------- #>  #> Total Weighted Connections (Strength In + Out): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.11 1.16   2.64 2.97 4.62 5.47 #> Level 2 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 3 0.00 0.00   0.00 0.00 0.00 0.00 #> Level 4 0.00 0.00   0.00 0.00 0.00 0.00 #>  #> Outward Mobility Strength (Weighted Out-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 1.04   1.21 1.48 2.09 3.12 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Inward Mobility Strength (Weighted In-Degree): #>         Min   Q1 Median Mean   Q3  Max #> Level 1   0 0.28   1.36 1.48 2.17 3.82 #> Level 2   0 0.00   0.00 0.00 0.00 0.00 #> Level 3   0 0.00   0.00 0.00 0.00 0.00 #> Level 4   0 0.00   0.00 0.00 0.00 0.00 #>  #> Edge Weight Distribution (Relative Risk Values): #>          Min   Q1 Median Mean   Q3  Max #> Level 1 1.02 1.06    1.3 1.27 1.42 1.62 #> Level 2   NA   NA     NA  NaN   NA   NA #> Level 3   NA   NA     NA  NaN   NA   NA #> Level 4   NA   NA     NA  NaN   NA   NA #>  #> ================================================================================"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_loglinear.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for moneca_loglinear Objects â€” print.moneca_loglinear","title":"Print Method for moneca_loglinear Objects â€” print.moneca_loglinear","text":"Displays formatted summary log-linear model fit mobility table, including deviance, degrees freedom, p-value, fit indices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_loglinear.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for moneca_loglinear Objects â€” print.moneca_loglinear","text":"","code":"# S3 method for class 'moneca_loglinear' print(x, digits = 3, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_loglinear.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for moneca_loglinear Objects â€” print.moneca_loglinear","text":"x moneca_loglinear object. digits Integer specifying number significant digits numeric output. Default 3. ... Additional arguments (ignored).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_loglinear.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for moneca_loglinear Objects â€” print.moneca_loglinear","text":"Invisibly returns object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_model_comparison.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for moneca_model_comparison Objects â€” print.moneca_model_comparison","title":"Print Method for moneca_model_comparison Objects â€” print.moneca_model_comparison","text":"Displays formatted comparison multiple log-linear model fits, including fit statistics table likelihood-ratio tests nested models.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_model_comparison.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for moneca_model_comparison Objects â€” print.moneca_model_comparison","text":"","code":"# S3 method for class 'moneca_model_comparison' print(x, digits = 3, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_model_comparison.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for moneca_model_comparison Objects â€” print.moneca_model_comparison","text":"x moneca_model_comparison object. digits Integer specifying number significant digits numeric output. Default 3. ... Additional arguments (ignored).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_model_comparison.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for moneca_model_comparison Objects â€” print.moneca_model_comparison","text":"Invisibly returns object.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_segments.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for moneca_segments Objects â€” print.moneca_segments","title":"Print Method for moneca_segments Objects â€” print.moneca_segments","text":"Print Method moneca_segments Objects","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_segments.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for moneca_segments Objects â€” print.moneca_segments","text":"","code":"# S3 method for class 'moneca_segments' print(x, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_segments.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for moneca_segments Objects â€” print.moneca_segments","text":"x moneca_segments object. ... Additional arguments (ignored).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_segments.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print Method for moneca_segments Objects â€” print.moneca_segments","text":"Invisibly returns x.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_tuning.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Method for MONECA Tuning Results â€” print.moneca_tuning","title":"Print Method for MONECA Tuning Results â€” print.moneca_tuning","text":"Provides formatted output auto-tuning results.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_tuning.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Method for MONECA Tuning Results â€” print.moneca_tuning","text":"","code":"# S3 method for class 'moneca_tuning' print(x, ...)"},{"path":"https://gmontaletti.github.io/MONECA/reference/print.moneca_tuning.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Method for MONECA Tuning Results â€” print.moneca_tuning","text":"x Object class \"moneca_tuning\". ... Additional arguments (unused).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":null,"dir":"Reference","previous_headings":"","what":"Reduce Density of Large Mobility Matrices â€” reduce_density","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"Preprocesses large mobility matrices reduce noise dimensionality reduction techniques. function designed matrices 60+ categories noise can obscure meaningful mobility patterns.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"","code":"reduce_density(   mx,   method = c(\"svd\", \"nmf\"),   normalization = c(\"none\", \"pearson\", \"ppmi\"),   k = \"auto\",   variance_target = 0.75,   threshold = NULL,   threshold_type = c(\"sd\", \"percentile\"),   verbose = FALSE,   seed = NULL,   filter_quantile = \"auto\" )"},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"mx mobility matrix totals row/column standard moneca format. Must least 4 rows/columns (excluding totals). method Character string specifying dimensionality reduction method: \"svd\" (default): Singular Value Decomposition - fast     memory-efficient, produces continuous values \"nmf\": Non-negative Matrix Factorization - preserves     non-negativity, better interpretability count data normalization Character string specifying pre-processing normalization: \"none\" (default): normalization, use raw counts \"pearson\": Pearson residuals - standardizes marginal effects \"ppmi\": Positive Pointwise Mutual Information - emphasizes     mobility chance levels k Number components retain. Either \"auto\" (default) automatic selection based variance explained, positive integer. Typical range 60+ category matrices 15-25. variance_target Numeric value (0-1) specifying target cumulative variance explain k = \"auto\". Default 0.75. Higher values retain detail also noise. threshold Optional sparsification threshold. Can : NULL (default): thresholding \"auto\": Automatic threshold (mean + 1 SD) Numeric: Values threshold set zero threshold_type Character string specifying numeric threshold interpreted: \"sd\" (default): Number standard deviations mean \"percentile\": Percentile threshold (0-100) verbose Logical indicating whether print progress information. Default FALSE. seed Optional integer reproducibility. Particularly important NMF uses random initialization. filter_quantile Controls quantile threshold filtering. Applies SVD NMF methods. Can : \"auto\" (default): Automatically selects threshold via elbow     detection reconstruction values Numeric (0-1): Keep cells reconstruction values     quantile. E.g., 0.75 keeps top 75 SVD NMF use reconstruction values filter identify significant cells, return original values cells. preserves count interpretability reducing network density.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"object class \"density_reduced\" (inherits matrix)   following attributes: method reduction method used (\"svd\" \"nmf\") normalization normalization method used k Number components retained variance_explained Proportion variance explained (SVD ) filter_quantile filter quantile used select cells threshold_applied threshold value applied () original_dims Dimensions original core matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"function implements pipeline reducing noise large mobility matrices: Input Validation: Checks matrix format extracts core     matrix (excluding totals row/column) Normalization: Optionally transforms counts using PPMI     Pearson residuals Component Selection: k = \"auto\", uses variance     explained elbow detection Dimensionality Reduction: Applies SVD NMF extract     dominant patterns Reconstruction: Reconstructs matrix reduced components Filtering: Uses reconstruction values filter identify     significant cells. Cells reconstruction values threshold     (based filter_quantile) set zero. Original cell values     preserved cells pass filter. Thresholding: Optionally applies additional thresholding Totals: Recalculates row/column totals SVD, reconstruction \\(M \\approx U_k \\Sigma_k V_k^T\\) k components retained. NMF, factorization \\(M \\approx W H\\) non-negative factors. methods use reconstruction values filter cells preserving original counts retained cells.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"dependencies","dir":"Reference","previous_headings":"","what":"Dependencies","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"irlba: Optional, fast truncated SVD. Falls back base R     svd() available. RcppML: Required method = \"nmf\"","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/reduce_density.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reduce Density of Large Mobility Matrices â€” reduce_density","text":"","code":"# Generate large synthetic data large_data <- generate_mobility_data(n_classes = 60, n_total = 30000, seed = 123)  # Basic SVD reduction with auto k selection reduced <- reduce_density(large_data, verbose = TRUE) #> Input matrix: 61 x 61 (core: 60 x 60) #> Total observations: 30000 #> Computing singular values for automatic k selection... #> Warning: You're computing too large a percentage of total singular values, use a standard svd instead. #>   Variance target (75%): k = 12 #>   Elbow detection: k = 10 #>   Selected k = 12 (76.2% variance explained) #> Using k = 12 components #> Performing SVD with k = 12 components... #> Auto quantile selection: keep top 25.0% of cells (elbow at 269/3006) #> SVD filter: keeping 752/3006 cells (25.0%) with reconstruction >= 2.4375 #> Reduction complete: 30000 -> 24784 observations (82.6% retained) print(reduced) #> Density-Reduced Mobility Matrix #> ================================ #> Dimensions: 60 x 60 categories #> Method: svd #> Normalization: none #> Components (k): 12 #> Variance explained: 76.2% #> Filter quantile: 25.0% (keeps top cells by reconstruction) #> Observations: 30000 -> 24784 (82.6% retained) #>  #> Core matrix preview (first 5x5): #>         Class 1 Class 2 Class 3 Class 4 Class 5 #> Class 1     208      45      23       1       0 #> Class 2     139     581     167      69       0 #> Class 3       1       5      26       5       3 #> Class 4       0      31      79     270      57 #> Class 5       0       0      90     161     702  # SVD with PPMI normalization reduced_ppmi <- reduce_density(large_data,                                normalization = \"ppmi\",                                variance_target = 0.80,                                verbose = TRUE) #> Input matrix: 61 x 61 (core: 60 x 60) #> Total observations: 30000 #> Applied ppmi normalization #> Computing singular values for automatic k selection... #> Warning: You're computing too large a percentage of total singular values, use a standard svd instead. #>   Variance target (80%): k = 14 #>   Elbow detection: k = 13 #>   Selected k = 14 (82.9% variance explained) #> Using k = 14 components #> Performing SVD with k = 14 components... #> Auto quantile selection: keep top 25.0% of cells (elbow at 437/1989) #> SVD filter: keeping 498/1989 cells (25.0%) with reconstruction >= 0.3741 #> Reduction complete: 30000 -> 27821 observations (92.7% retained)  # NMF reduction with fixed k if (FALSE) { # \\dontrun{ reduced_nmf <- reduce_density(large_data,                               method = \"nmf\",                               k = 20,                               seed = 42) } # }  # With thresholding to increase sparsity reduced_sparse <- reduce_density(large_data,                                  threshold = 1,                                  threshold_type = \"sd\") #> Warning: You're computing too large a percentage of total singular values, use a standard svd instead.  # Continue with standard moneca pipeline seg <- moneca(reduced, segment.levels = 3) #>    |                                                                               |                                                                      |   0%   |                                                                               |                                                                      |   1%   |                                                                               |=                                                                     |   1%   |                                                                               |=                                                                     |   2%   |                                                                               |==                                                                    |   3%   |                                                                               |===                                                                   |   4%   |                                                                               |===                                                                   |   5%   |                                                                               |====                                                                  |   5%   |                                                                               |====                                                                  |   6%   |                                                                               |=====                                                                 |   6%   |                                                                               |=====                                                                 |   7%   |                                                                               |=====                                                                 |   8%   |                                                                               |======                                                                |   8%   |                                                                               |======                                                                |   9%   |                                                                               |=======                                                               |  10%   |                                                                               |========                                                              |  11%   |                                                                               |========                                                              |  12%   |                                                                               |=========                                                             |  12%   |                                                                               |=========                                                             |  13%   |                                                                               |==========                                                            |  14%   |                                                                               |==========                                                            |  15%   |                                                                               |===========                                                           |  16%   |                                                                               |============                                                          |  17%   |                                                                               |============                                                          |  18%   |                                                                               |=============                                                         |  18%   |                                                                               |=============                                                         |  19%   |                                                                               |==============                                                        |  19%   |                                                                               |==============                                                        |  20%   |                                                                               |===============                                                       |  21%   |                                                                               |===============                                                       |  22%   |                                                                               |================                                                      |  23%   |                                                                               |=================                                                     |  24% #> 25% ready! #>    |                                                                               |=================                                                     |  25%   |                                                                               |==================                                                    |  25%   |                                                                               |==================                                                    |  26%   |                                                                               |===================                                                   |  27%   |                                                                               |====================                                                  |  28%   |                                                                               |====================                                                  |  29%   |                                                                               |=====================                                                 |  30%   |                                                                               |=====================                                                 |  31%   |                                                                               |======================                                                |  31%   |                                                                               |======================                                                |  32%   |                                                                               |=======================                                               |  32%   |                                                                               |=======================                                               |  33%   |                                                                               |========================                                              |  34%   |                                                                               |=========================                                             |  35%   |                                                                               |=========================                                             |  36%   |                                                                               |==========================                                            |  37%   |                                                                               |==========================                                            |  38%   |                                                                               |===========================                                           |  38%   |                                                                               |===========================                                           |  39%   |                                                                               |============================                                          |  40%   |                                                                               |=============================                                         |  41%   |                                                                               |=============================                                         |  42%   |                                                                               |==============================                                        |  42%   |                                                                               |==============================                                        |  43%   |                                                                               |==============================                                        |  44%   |                                                                               |===============================                                       |  44%   |                                                                               |===============================                                       |  45%   |                                                                               |================================                                      |  45%   |                                                                               |================================                                      |  46%   |                                                                               |=================================                                     |  47%   |                                                                               |==================================                                    |  48%   |                                                                               |==================================                                    |  49%   |                                                                               |===================================                                   |  49% #> 50% ready! #>    |                                                                               |===================================                                   |  50%   |                                                                               |===================================                                   |  51%   |                                                                               |====================================                                  |  51%   |                                                                               |====================================                                  |  52%   |                                                                               |=====================================                                 |  53%   |                                                                               |======================================                                |  54%   |                                                                               |======================================                                |  55%   |                                                                               |=======================================                               |  55%   |                                                                               |=======================================                               |  56%   |                                                                               |========================================                              |  56%   |                                                                               |========================================                              |  57%   |                                                                               |========================================                              |  58%   |                                                                               |=========================================                             |  58%   |                                                                               |=========================================                             |  59%   |                                                                               |==========================================                            |  60%   |                                                                               |===========================================                           |  61%   |                                                                               |===========================================                           |  62%   |                                                                               |============================================                          |  62%   |                                                                               |============================================                          |  63%   |                                                                               |=============================================                         |  64%   |                                                                               |=============================================                         |  65%   |                                                                               |==============================================                        |  66%   |                                                                               |===============================================                       |  67%   |                                                                               |===============================================                       |  68%   |                                                                               |================================================                      |  68%   |                                                                               |================================================                      |  69%   |                                                                               |=================================================                     |  69%   |                                                                               |=================================================                     |  70%   |                                                                               |==================================================                    |  71%   |                                                                               |==================================================                    |  72%   |                                                                               |===================================================                   |  73%   |                                                                               |====================================================                  |  74%   |                                                                               |====================================================                  |  75% #> 75% ready! #>    |                                                                               |=====================================================                 |  75%   |                                                                               |=====================================================                 |  76%   |                                                                               |======================================================                |  77%   |                                                                               |=======================================================               |  78%   |                                                                               |=======================================================               |  79%   |                                                                               |========================================================              |  80%   |                                                                               |========================================================              |  81%   |                                                                               |=========================================================             |  81%   |                                                                               |=========================================================             |  82%   |                                                                               |==========================================================            |  82%   |                                                                               |==========================================================            |  83%   |                                                                               |===========================================================           |  84%   |                                                                               |============================================================          |  85%   |                                                                               |============================================================          |  86%   |                                                                               |=============================================================         |  87%   |                                                                               |=============================================================         |  88%   |                                                                               |==============================================================        |  88%   |                                                                               |==============================================================        |  89%   |                                                                               |===============================================================       |  90%   |                                                                               |================================================================      |  91%   |                                                                               |================================================================      |  92%   |                                                                               |=================================================================     |  92%   |                                                                               |=================================================================     |  93%   |                                                                               |=================================================================     |  94%   |                                                                               |==================================================================    |  94%   |                                                                               |==================================================================    |  95%   |                                                                               |===================================================================   |  95%   |                                                                               |===================================================================   |  96%   |                                                                               |====================================================================  |  97%   |                                                                               |===================================================================== |  98%   |                                                                               |===================================================================== |  99%   |                                                                               |======================================================================|  99%   |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0%   |                                                                               |====                                                                  |   6%   |                                                                               |========                                                              |  11%   |                                                                               |============                                                          |  17%   |                                                                               |================                                                      |  22% #> 26% ready! #>    |                                                                               |===================                                                   |  28%   |                                                                               |=======================                                               |  33%   |                                                                               |===========================                                           |  39%   |                                                                               |===============================                                       |  44%   |                                                                               |===================================                                   |  50% #> 53% ready! #>    |                                                                               |=======================================                               |  56%   |                                                                               |===========================================                           |  61%   |                                                                               |===============================================                       |  67%   |                                                                               |===================================================                   |  72%   |                                                                               |======================================================                |  78% #> 79% ready! #>    |                                                                               |==========================================================            |  83%   |                                                                               |==============================================================        |  89%   |                                                                               |==================================================================    |  94%   |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0%   |                                                                               |==============                                                        |  20% #> 33% ready! #>    |                                                                               |============================                                          |  40% #> 50% ready! #>    |                                                                               |==========================================                            |  60%   |                                                                               |========================================================              |  80% #> 83% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.colors.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Colors for Segments â€” segment.colors","title":"Generate Colors for Segments â€” segment.colors","text":"Creates grayscale color scheme MONECA segments based internal mobility rates. Darker colors indicate higher immobility (lower internal mobility).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.colors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Colors for Segments â€” segment.colors","text":"","code":"segment.colors(segments)"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.colors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Colors for Segments â€” segment.colors","text":"segments moneca object returned moneca.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.colors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Colors for Segments â€” segment.colors","text":"list color vectors, one hierarchical level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.colors.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Colors for Segments â€” segment.colors","text":"function calculates grayscale colors intensity reflects immobility rate within segment. Segments higher immobility (stable positions) receive darker colors.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.edges.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Segment Edge Matrix â€” segment.edges","title":"Extract Segment Edge Matrix â€” segment.edges","text":"Creates adjacency matrix representing edges segments based mobility flows. function used network visualization analysis.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.edges.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Segment Edge Matrix â€” segment.edges","text":"","code":"segment.edges(   segments,   cut.off = 1,   mode = \"directed\",   level = NULL,   segment.reduction = NULL,   method = \"all\",   top = 3,   diagonal = NULL,   small.cell.reduction = 0 )"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.edges.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Segment Edge Matrix â€” segment.edges","text":"segments moneca object returned moneca. cut.Numeric threshold minimum relative risk include edge. Default 1. mode Character string specifying graph mode (\"directed\" \"undirected\"). Default \"directed\". level Integer vector specifying hierarchical levels include. Default includes levels. segment.reduction Integer vector specifying levels remove internal segment edges. Default includes levels. method Character string specifying edge filtering method: \"\" (default): Include edges threshold \"top.\": Keep top outgoing edges per node \"top.\": Keep top incoming edges per node top Integer specifying many top edges keep using \"top.\" \"top.\" methods. Default 3. diagonal Controls diagonal values. NULL (default), diagonal zeroed. small.cell.reduction Numeric threshold small cell handling.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.edges.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Segment Edge Matrix â€” segment.edges","text":"square matrix representing edge weights nodes/segments.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.dataframe.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","title":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","text":"Creates dataframe showing segment membership row original mobility matrix across segmentation levels positional code format.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.dataframe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","text":"","code":"segment.membership.dataframe(moneca_results, names = TRUE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.dataframe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","text":"moneca_results moneca object returned moneca moneca_fast. names Logical indicating whether generate descriptive labels level (default TRUE). TRUE, creates additional columns segment labels showing representative node name count members.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.dataframe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","text":"dataframe : name: name row original matrix index: index row original matrix level_X: segmentation level X (excluding level 1), segment       assignment using progressive numbering (001, 002, etc.) name_level_X: (names=TRUE) Descriptive labels level showing       representative node count members format \"NodeName (+N)\" id_full: Positional code format \"xxx.xxx.xxx\" representing hierarchical position","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.dataframe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Segment Membership Dataframe from MONECA Results â€” segment.membership.dataframe","text":"","code":"# Generate example data mx <- generate_mobility_data(n_classes = 5, immobility_strength = 0.7)  # Run moneca analysis seg <- moneca_fast(mx, segment.levels = 3) #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0%  # Generate membership dataframe membership_df <- segment.membership.dataframe(seg) print(membership_df) #>      name index level_2 name_level_2 level_3 name_level_3 level_4 name_level_4 #> 1 Class 1     1     002 Class 2 (+1)     002 Class 2 (+1)     001 Class 2 (+4) #> 2 Class 2     2     002 Class 2 (+1)     002 Class 2 (+1)     001 Class 2 (+4) #> 3 Class 3     3     003 Class 3 (+0)     001 Class 3 (+2)     001 Class 2 (+4) #> 4 Class 4     4     001 Class 4 (+1)     001 Class 3 (+2)     001 Class 2 (+4) #> 5 Class 5     5     001 Class 4 (+1)     001 Class 3 (+2)     001 Class 2 (+4) #>           id_full #> 1 001.002.002.001 #> 2 001.002.002.002 #> 3 001.001.003.003 #> 4 001.001.001.004 #> 5 001.001.001.005"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"Returns segment membership information additional column containing meaningful segment names derived constituent nodes. function extends segment.membership adding intelligent naming strategies aggregated segments.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"","code":"segment.membership.enhanced(   segments,   level = seq(segments$segment.list),   naming_strategy = \"auto\",   custom_names = NULL,   separator = \" + \",   max_concat_length = 2,   pattern_rules = NULL )"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"segments moneca object returned moneca. level Integer vector specifying hierarchical levels include. Default includes available levels. naming_strategy Character string specifying naming approach: \"auto\" (default): Automatic naming based segment composition \"concat\": Concatenate node names separator \"pattern\": Use pattern recognition common suffixes/prefixes \"custom\": Use user-provided names custom_names parameter custom_names Named list providing custom names specific segments. Format: list(\"level.segment\" = \"Custom Name\"), e.g., list(\"2.1\" = \"Blue Collar\") separator Character string used separate names concatenating. Default \" + \". max_concat_length Maximum number names concatenate switching pattern-based naming. Default 2. pattern_rules Enhanced pattern rules list priorities semantic categories. Default includes comprehensive occupational industry patterns (avoiding generic social class terms).","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"data frame three columns: name Character vector original category names membership Character vector indicating segment membership, formatted       \"level.segment\" (e.g., \"2.1\" level 2, segment 1) segment_label Character vector meaningful segment names derived       constituent nodes user-provided names","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"function applies different naming strategies based segment composition: Individual nodes: Keep original name unchanged Small segments (<= max_concat_length): Concatenate names Large segments: Apply pattern recognition use generic names Custom names: Override automatic naming user-provided names enhanced pattern recognition system uses weighted scoring identify occupational hierarchies, industry sectors, employment types. creates semantically meaningful names like \"Executive_Leadership\", \"Professional_Services\", \"Technical_Specialists\" based segment composition, avoiding generic terms.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.enhanced.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Enhanced Segment Membership with Meaningful Names â€” segment.membership.enhanced","text":"","code":"if (FALSE) { # \\dontrun{ # Generate data and run analysis mob_data <- generate_mobility_data(n_classes = 6, seed = 42) seg <- moneca(mob_data, segment.levels = 3)  # Get enhanced membership with automatic naming enhanced <- segment.membership.enhanced(seg) print(enhanced) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Segment Membership Information â€” segment.membership","title":"Extract Segment Membership Information â€” segment.membership","text":"Returns data frame showing segment original category belongs across specified hierarchical levels moneca analysis.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Segment Membership Information â€” segment.membership","text":"","code":"segment.membership(segments, level = seq(segments$segment.list))"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Segment Membership Information â€” segment.membership","text":"segments moneca object returned moneca. level Integer vector specifying hierarchical levels include. Default includes available levels.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Segment Membership Information â€” segment.membership","text":"data frame two columns: name Character vector original category names membership Character vector indicating segment membership, formatted       \"level.segment\" (e.g., \"2.1\" level 2, segment 1)","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Segment Membership Information â€” segment.membership","text":"membership strings indicate hierarchical level specific segment within level. example, \"2.3\" means category belongs segment 3 level 2 hierarchy.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.membership.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Segment Membership Information â€” segment.membership","text":"","code":"# Generate data and run analysis mob_data <- generate_mobility_data(n_classes = 5, seed = 42) seg <- moneca(mob_data, segment.levels = 3) #>    |                                                                               |                                                                      |   0%   |                                                                               |==================                                                    |  25% #> 40% ready! #>    |                                                                               |===================================                                   |  50% #> 60% ready! #>    |                                                                               |====================================================                  |  75% #> 80% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0% #> 50% ready! #>    |                                                                               |======================================================================| 100% #> 100% ready! #>   # Get membership information membership <- segment.membership(seg) print(membership) #>      name membership #> 1 Class 1        4.1 #> 2 Class 2        4.1 #> 3 Class 3        4.1 #> 4 Class 4        4.1 #> 5 Class 5        4.1  # Get membership for specific levels only membership_level2 <- segment.membership(seg, level = 2)"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate Segment Quality Metrics â€” segment.quality","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"Calculates comprehensive quality metrics segment across hierarchical levels moneca analysis. function provides detailed statistics segment cohesion, size, network properties, mobility patterns.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"","code":"segment.quality(segments, final.solution = FALSE, segment_naming = \"auto\")"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"segments moneca object returned moneca. final.solution Logical indicating whether return final (aggregated) solution unique segment. Default FALSE, returns metrics levels. segment_naming Character string data frame specifying name segments. Used create readable segment labels output. Options include: \"auto\" (default): Use simple \"Segment X\" format \"concat\": Concatenate member names \"pattern\": Use pattern-based naming \"custom\": Custom naming strategy Data frame: Must columns \"name\" \"segment_label\" custom mapping using data frame, function match original category names custom labels use segment naming. creates \"segment_label\" column output can used plotting functions.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"data frame following columns hierarchical level: Membership Segment membership identifier format \"level.segment\"       (e.g., \"2.1\" means level 2, segment 1) [Level]: Segment Integer segment identifier level [Level]: within.mobility Proportion mobility stays within       segment (diagonal/total). Higher values indicate cohesive segments.       Range: 0-1, 1 means mobility internal. [Level]: share..mobility Segment's share total mobility       system. Indicates relative importance/size segment.       Range: 0-1, values sum 1 across segments. [Level]: Density Network density within segment (proportion       possible edges exist). Higher values indicate interconnected nodes.       Range: 0-1, 1 means fully connected. [Level]: Nodes Number original categories/nodes segment [Level]: Max.path Maximum shortest path length (diameter) within       segment. Lower values indicate compact segments. [Level]: share..total Segment's share total population/observations       based marginal totals. Differs share..mobility considering       population size rather flow volume. final.solution = TRUE, returns simplified data frame   aggregated metrics unique segment.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"function evaluates multiple aspects segmentation quality: Cohesion Metrics: within.mobility: Key quality indicator - proportion mobility     contained within segment boundaries. Values > 0.7 suggest strong segments. Density: interconnected nodes within segment.     Dense segments (> 0.5) indicate tight communities. Size Metrics: share..mobility: Relative importance based flow volume share..total: Relative size based population Nodes: Absolute size terms categories Structure Metrics: Max.path: Network diameter - smaller values indicate     compact, well-connected segments output ordered final level's segment sizes easier interpretation.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/segment.quality.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Evaluate Segment Quality Metrics â€” segment.quality","text":"","code":"# Generate data and run MONECA mobility_data <- generate_mobility_data(n_classes = 8, seed = 123) seg <- moneca(mobility_data, segment.levels = 3) #>    |                                                                               |                                                                      |   0%   |                                                                               |=======                                                               |  10%   |                                                                               |==============                                                        |  20% #> 27% ready! #>    |                                                                               |=====================                                                 |  30%   |                                                                               |============================                                          |  40%   |                                                                               |===================================                                   |  50% #> 55% ready! #>    |                                                                               |==========================================                            |  60%   |                                                                               |=================================================                     |  70%   |                                                                               |========================================================              |  80% #> 82% ready! #>    |                                                                               |===============================================================       |  90%   |                                                                               |======================================================================| 100% #> 100% ready! #>  #>    |                                                                               |                                                                      |   0% #> 100% ready! #>   # Get detailed quality metrics for all levels quality_full <- segment.quality(seg) print(quality_full) #>         Membership 1: Segment 1: within.mobility 1: share.of.mobility #> Class 5        4.1          5              0.648                0.284 #> Class 4        4.1          4              0.491                0.139 #> Class 3        4.1          3              0.108                0.054 #> Class 6        4.1          6              0.567                0.158 #> Class 7        4.1          7              0.319                0.048 #> Class 8        4.1          8              0.290                0.021 #> Class 2        4.1          2              0.676                0.215 #> Class 1        4.1          1              0.559                0.082 #>         1: Density 1: Nodes 1: Max.path 1: share.of.total 2: Segment #> Class 5        NaN        1           0             0.284          3 #> Class 4        NaN        1           0             0.139          3 #> Class 3        NaN        1           0             0.054          3 #> Class 6        NaN        1           0             0.158          1 #> Class 7        NaN        1           0             0.048          1 #> Class 8        NaN        1           0             0.021          1 #> Class 2        NaN        1           0             0.215          2 #> Class 1        NaN        1           0             0.082          2 #>         2: within.mobility 2: share.of.mobility 2: Density 2: Nodes 2: Max.path #> Class 5              0.777                0.476  0.3333333        3           1 #> Class 4              0.777                0.476  0.3333333        3           1 #> Class 3              0.777                0.476  0.3333333        3           1 #> Class 6              0.692                0.227  0.8333333        3           2 #> Class 7              0.692                0.227  0.8333333        3           2 #> Class 8              0.692                0.227  0.8333333        3           2 #> Class 2              0.825                0.297  1.0000000        2           1 #> Class 1              0.825                0.297  1.0000000        2           1 #>         2: share.of.total 3: Segment 3: within.mobility 3: share.of.mobility #> Class 5             0.476          1              0.926                0.703 #> Class 4             0.476          1              0.926                0.703 #> Class 3             0.476          1              0.926                0.703 #> Class 6             0.227          1              0.926                0.703 #> Class 7             0.227          1              0.926                0.703 #> Class 8             0.227          1              0.926                0.703 #> Class 2             0.297         NA                 NA                   NA #> Class 1             0.297         NA                 NA                   NA #>         3: Density 3: Nodes 3: Max.path 3: share.of.total 4: Segment #> Class 5  0.2666667        6           3             0.703          1 #> Class 4  0.2666667        6           3             0.703          1 #> Class 3  0.2666667        6           3             0.703          1 #> Class 6  0.2666667        6           3             0.703          1 #> Class 7  0.2666667        6           3             0.703          1 #> Class 8  0.2666667        6           3             0.703          1 #> Class 2         NA       NA          NA                NA          1 #> Class 1         NA       NA          NA                NA          1 #>         4: within.mobility 4: share.of.mobility 4: Density 4: Nodes 4: Max.path #> Class 5                  1                    1  0.2142857        8           3 #> Class 4                  1                    1  0.2142857        8           3 #> Class 3                  1                    1  0.2142857        8           3 #> Class 6                  1                    1  0.2142857        8           3 #> Class 7                  1                    1  0.2142857        8           3 #> Class 8                  1                    1  0.2142857        8           3 #> Class 2                  1                    1  0.2142857        8           3 #> Class 1                  1                    1  0.2142857        8           3 #>         4: share.of.total #> Class 5                 1 #> Class 4                 1 #> Class 3                 1 #> Class 6                 1 #> Class 7                 1 #> Class 8                 1 #> Class 2                 1 #> Class 1                 1  # Get only final solution summary quality_final <- segment.quality(seg, final.solution = TRUE) print(quality_final) #>         Membership within.mobility share.of.mobility   Density Nodes Max.path #> Class 5        4.1               1                 1 0.2142857     8        3 #>         share.of.total Segment segment_label #> Class 5              1     4.1     Class 8+7  # Use custom segment naming with final solution custom_names <- data.frame(   name = c(\"Class1\", \"Class2\", \"Class3\"),   segment_label = c(\"Executive\", \"Professional\", \"Technical\"),   stringsAsFactors = FALSE ) quality_labeled <- segment.quality(seg, final.solution = TRUE, segment_naming = custom_names) print(quality_labeled) #>         Membership within.mobility share.of.mobility   Density Nodes Max.path #> Class 5        4.1               1                 1 0.2142857     8        3 #>         share.of.total Segment segment_label #> Class 5              1     4.1     Class 8+7  if (FALSE) { # \\dontrun{ # Visualize segment quality plot_segment_quality(seg) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment_matrix_optimized.html","id":null,"dir":"Reference","previous_headings":"","what":"Fast Segment Matrix Aggregation â€” segment_matrix_optimized","title":"Fast Segment Matrix Aggregation â€” segment_matrix_optimized","text":"Aggregates mobility matrix segment membership using optimized matrix operations.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment_matrix_optimized.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fast Segment Matrix Aggregation â€” segment_matrix_optimized","text":"","code":"segment_matrix_optimized(mx, membership)"},{"path":"https://gmontaletti.github.io/MONECA/reference/segment_matrix_optimized.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fast Segment Matrix Aggregation â€” segment_matrix_optimized","text":"mx Mobility matrix membership Factor integer vector segment assignments","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/segment_matrix_optimized.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fast Segment Matrix Aggregation â€” segment_matrix_optimized","text":"Aggregated matrix segments","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_filter_quantile_auto.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic Filter Quantile Selection for NMF â€” select_filter_quantile_auto","title":"Automatic Filter Quantile Selection for NMF â€” select_filter_quantile_auto","text":"Selects filter quantile NMF based elbow detection sorted reconstruction values. elbow point marks \"signal\" transitions \"noise\" - cells beyond point contribute little overall structure captured NMF.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_filter_quantile_auto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic Filter Quantile Selection for NMF â€” select_filter_quantile_auto","text":"","code":"select_filter_quantile_auto(reconstruction, verbose = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/select_filter_quantile_auto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Automatic Filter Quantile Selection for NMF â€” select_filter_quantile_auto","text":"reconstruction NMF reconstruction matrix (W * H) verbose Print progress messages","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_filter_quantile_auto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Automatic Filter Quantile Selection for NMF â€” select_filter_quantile_auto","text":"Numeric quantile value (proportion keep, e.g., 0.75 = keep top 75","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_k_auto.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic Component Selection â€” select_k_auto","title":"Automatic Component Selection â€” select_k_auto","text":"Selects number components k based variance explained elbow detection.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_k_auto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic Component Selection â€” select_k_auto","text":"","code":"select_k_auto(mx, variance_target, verbose = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/select_k_auto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Automatic Component Selection â€” select_k_auto","text":"mx Normalized matrix variance_target Target cumulative variance (0-1) verbose Print progress messages","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/select_k_auto.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Automatic Component Selection â€” select_k_auto","text":"List k variance_explained","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/setup_parallel_processing.html","id":null,"dir":"Reference","previous_headings":"","what":"Setup Parallel Processing for Auto-Tuning â€” setup_parallel_processing","title":"Setup Parallel Processing for Auto-Tuning â€” setup_parallel_processing","text":"Configures parallel processing cluster enhanced performance.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/setup_parallel_processing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Setup Parallel Processing for Auto-Tuning â€” setup_parallel_processing","text":"","code":"setup_parallel_processing(n_cores = NULL, verbose = FALSE)"},{"path":"https://gmontaletti.github.io/MONECA/reference/setup_parallel_processing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Setup Parallel Processing for Auto-Tuning â€” setup_parallel_processing","text":"n_cores Number cores use. NULL, auto-detects optimal number. verbose Logical indicating whether print setup messages.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/setup_parallel_processing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Setup Parallel Processing for Auto-Tuning â€” setup_parallel_processing","text":"List containing parallel setup information.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Legacy Multi-Level Stair Plot â€” stair.plot","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"Creates series plots showing segmentation evolves across hierarchical levels using legacy ggplot2 system. modern stair plots, use plot_stair_ggraph.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"","code":"stair.plot(   segments,   level = NULL,   layout = NULL,   edges = NULL,   mode = \"directed\",   vertex.size = \"total\",   vertex.alpha = 1,   vertex.color = \"black\",   vertex.shape = 21,   show.edges = TRUE,   edge.size = 0.5,   edge.alpha = \"weight\",   edge.color = \"black\",   edge.line = \"solid\",   show.text = FALSE,   text.size = 3,   text.color = \"black\",   text.alpha = 1,   text.vjust = 1.5,   show.borders = TRUE,   border.size = 1,   border.fill = NA,   border.color = \"black\",   border.alpha = 1,   border.padding = 1,   border.text = TRUE,   border.labels = \"segments\",   border.text.size = 4,   border.text.color = \"black\",   border.text.vjust = -0.2,   border.text.hjust = 1,   midpoints = TRUE,   midpoint.arrow = arrow(angle = 20, length = unit(0.33, \"cm\"), ends = \"last\", type =     \"closed\"),   edge.text = FALSE,   edge.text.size = 3,   edge.text.alpha = 0.9,   legend = \"side\",   level.title = \"Level\" )"},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"segments moneca object returned moneca. level Integer vector specifying levels include stair plot. layout Layout matrix consistent node positioning across plots. edges Edge matrix specification network edges. mode Character string specifying graph mode (\"directed\" \"undirected\"). vertex.size Specification vertex sizes (\"total\" numeric). vertex.alpha Numeric transparency vertices (0-1). vertex.color Color specification vertex borders. vertex.shape Numeric shape code vertices. show.edges Logical indicating whether display edges. edge.size Numeric size edges. edge.alpha Transparency edges (\"weight\" numeric). edge.color Color specification edges. edge.line Line type edges (\"solid\", \"dashed\", etc.). show.text Logical indicating whether show vertex labels. text.size Numeric size text labels. text.color Color text labels. text.alpha Transparency text labels. text.vjust Vertical adjustment text labels. show.borders Logical indicating whether show segment boundaries. border.size Size segment borders. border.fill Fill color segment boundaries. border.color Color segment border lines. border.alpha Transparency segment borders. border.padding Padding around segment boundaries. border.text Logical indicating whether show segment labels. border.labels Specification segment labels. border.text.size Size segment labels. border.text.color Color segment labels. border.text.vjust Vertical adjustment segment labels. border.text.hjust Horizontal adjustment segment labels. midpoints Logical indicating whether show edge midpoints. midpoint.arrow Logical indicating whether show arrows midpoints. edge.text Logical indicating whether show edge labels. edge.text.size Size edge labels. edge.text.alpha Transparency edge labels. legend Position specification legend. level.title Specification level titles.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"list ggplot2 objects, one segmentation level.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"function creates multiple plots showing progression segmentation across hierarchical levels. plot uses layout maintain consistency, making easy see segments merge split across levels. Note: function maintained backward compatibility requires eliter package. new analyses, use plot_stair_ggraph offers better performance modern styling.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/stair.plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Legacy Multi-Level Stair Plot â€” stair.plot","text":"","code":"if (FALSE) { # \\dontrun{ # Using synthetic data mobility_data <- generate_mobility_data(n_classes = 6, seed = 123) seg <- moneca(mobility_data, segment.levels = 3) plots <- stair.plot(seg) plots[[2]]  # Display second level  # Customized stair plot custom_stairs <- stair.plot(seg,                            level = c(2, 3, 4),                            vertex.size = \"total\",                            show.borders = TRUE,                            border.text.size = 5) } # }"},{"path":"https://gmontaletti.github.io/MONECA/reference/vertex.mobility.html","id":null,"dir":"Reference","previous_headings":"","what":"Vertex mobility â€” vertex.mobility","title":"Vertex mobility â€” vertex.mobility","text":"Calculate mobility metrics vertex network.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/vertex.mobility.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vertex mobility â€” vertex.mobility","text":"","code":"vertex.mobility(segments)"},{"path":"https://gmontaletti.github.io/MONECA/reference/vertex.mobility.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vertex mobility â€” vertex.mobility","text":"segments moneca object moneca().","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/vertex.mobility.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Vertex mobility â€” vertex.mobility","text":"data frame mobility metrics vertex.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Relative Risk Weight Matrix â€” weight.matrix","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"Converts mobility table relative risk matrix comparing observed mobility flows expected flows independence. matrix forms basis network construction moneca analysis.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"","code":"weight.matrix(   mx,   cut.off = 1,   symmetric = TRUE,   diagonal = NULL,   small.cell.reduction = 0,   auto_tune = FALSE,   tune_method = \"stability\",   tune_verbose = FALSE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"mx mobility table (square matrix) row column totals last row/column. cut.Numeric threshold minimum relative risk. Values set NA. Default 1. symmetric Logical indicating whether force matrix symmetric adding transpose. Default TRUE. diagonal Controls diagonal values. NULL (default), diagonal set NA. Otherwise, diagonal values preserved. small.cell.reduction Numeric value handling small cells. Cells counts threshold set 0 calculating relative risks. Default 0. auto_tune Logical indicating whether automatically tune small.cell.reduction parameter. TRUE, uses optimization methods select best value. Default FALSE. tune_method Character string specifying auto-tuning method auto_tune TRUE. Options \"stability\" (default), \"quality\", \"performance\". See auto_tune_small_cell_reduction details. tune_verbose Logical indicating whether print verbose messages auto-tuning. Default FALSE.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"matrix relative risks : Values > 1 indicate mobility expected levels Values < 1 indicate mobility expected levels Values cut.set NA auto_tune TRUE, matrix includes additional attributes: auto_tuning: Complete results auto-tuning process auto_tuned: Logical flag indicating auto-tuning used tuned_small_cell_reduction: selected optimal value","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"relative risk cell (,j) calculated : $$RR_{ij} = O_{ij} / E_{ij}$$ \\(O_{ij}\\) observed count \\(E_{ij}\\) expected count independence: \\(E_{ij} = (n_i * n_j) / N\\)","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/reference/weight.matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Relative Risk Weight Matrix â€” weight.matrix","text":"","code":"# Create a simple mobility table mob_table <- matrix(c(100, 20, 10, 130,                       15, 80, 25, 120,                       5,  10, 50,  65,                       120, 110, 85, 315),                     nrow = 4, byrow = TRUE) rownames(mob_table) <- colnames(mob_table) <- c(\"A\", \"B\", \"C\", \"Total\")  # Calculate relative risk matrix rr_matrix <- weight.matrix(mob_table, cut.off = 1.5)  # Use automatic tuning for small.cell.reduction parameter rr_matrix_tuned <- weight.matrix(mob_table, auto_tune = TRUE,                                  tune_method = \"stability\", tune_verbose = TRUE) #> Auto-tuning small.cell.reduction parameter using method: stability #> Parallel decision: NO ( 1 cores) #> Starting auto-tuning for small.cell.reduction parameter... #> Method: stability  #> Matrix size: 4 x 4  #> Parallel processing: NO  #> Generated 20 candidate values #>  #> Evaluating 20 candidates using optimized batch processing... #>    |                                                                               |                                                                      |   0%   |                                                                               |====                                                                  |   5%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |=======                                                               |  10%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==========                                                            |  15%   |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==============                                                        |  20%   |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |==================                                                    |  25%   |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |======================================================================| 100% #>    |                                                                               |                                                                      |   0% #>    |                                                                               |=====================                                                 |  30%   |                                                                               |========================                                              |  35%   |                                                                               |============================                                          |  40%   |                                                                               |================================                                      |  45%   |                                                                               |===================================                                   |  50%   |                                                                               |======================================                                |  55%   |                                                                               |==========================================                            |  60%   |                                                                               |==============================================                        |  65%   |                                                                               |=================================================                     |  70%   |                                                                               |====================================================                  |  75%   |                                                                               |========================================================              |  80%   |                                                                               |============================================================          |  85%   |                                                                               |===============================================================       |  90%   |                                                                               |==================================================================    |  95%   |                                                                               |======================================================================| 100% #>  #>  #> Batch evaluation completed #> - Valid results: 5 of 20  #> - Mean stability score: 0.235  #> - Mean quality score: 0.154  #> - Weight matrices cached: 20  #>  #> Optimal small.cell.reduction: 0  #> Total tuning time: 22.62 seconds #> Selected optimal small.cell.reduction: 0  # Check tuning results if (attr(rr_matrix_tuned, \"auto_tuned\", exact = TRUE)) {   optimal_value <- attr(rr_matrix_tuned, \"tuned_small_cell_reduction\", exact = TRUE)   message(\"Optimal small.cell.reduction: \", optimal_value) } #> Optimal small.cell.reduction: 0"},{"path":"https://gmontaletti.github.io/MONECA/reference/weight_matrix_optimized.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimized Weight Matrix Calculation â€” weight_matrix_optimized","title":"Optimized Weight Matrix Calculation â€” weight_matrix_optimized","text":"Vectorized computation relative risk weight matrix optional data.table acceleration large matrices.","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight_matrix_optimized.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Optimized Weight Matrix Calculation â€” weight_matrix_optimized","text":"","code":"weight_matrix_optimized(   mx,   cut.off = 1,   small.cell.reduction = 0,   symmetric = TRUE )"},{"path":"https://gmontaletti.github.io/MONECA/reference/weight_matrix_optimized.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Optimized Weight Matrix Calculation â€” weight_matrix_optimized","text":"mx Mobility matrix totals cut.Minimum relative risk threshold small.cell.reduction Minimum cell count symmetric Whether symmetrize matrix","code":""},{"path":"https://gmontaletti.github.io/MONECA/reference/weight_matrix_optimized.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Optimized Weight Matrix Calculation â€” weight_matrix_optimized","text":"Weight matrix NA values cutoff","code":""},{"path":[]},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-9-2","dir":"Changelog","previous_headings":"Maintenance Release","what":"Bug Fixes","title":"moneca 0.9.2","text":"Fixed moneca_fast() algorithmic correctness: function now produces identical results moneca() implementing consistent clique progression logic. Previously, moneca_fast() sometimes miss valid cliques moneca() find, leading different clustering outcomes. Fixed print.moneca() edge case: print method now correctly handles 1x1 matrices without errors. Previously, attempting print moneca object single-element matrix level cause indexing error.","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"documentation-0-9-2","dir":"Changelog","previous_headings":"Maintenance Release","what":"Documentation","title":"moneca 0.9.2","text":"Added performance analyses: Comprehensive benchmarking comparing moneca(), moneca_fast(), moneca_parallel() implementations. Results show three now produce identical outputs offering different performance characteristics various dataset sizes.","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"project-maintenance-0-9-2","dir":"Changelog","previous_headings":"Maintenance Release","what":"Project Maintenance","title":"moneca 0.9.2","text":"Cleaned repository structure: Moved development scripts, benchmarks, analysis files reference directory maintain clean R package structure.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"maintenance-release-0-9-1","dir":"Changelog","previous_headings":"","what":"Maintenance Release","title":"moneca 0.9.1","text":"Version bump maintenance documentation updates core functionality remains stable v0.9.0","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"breaking-changes-0-9-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"moneca 0.9.0","text":"Removed moneca_fast_fixed() function: experimental function outdated inconsistent v0.9.0 fixes. Users use moneca_fast() instead, now includes optimizations use_maximal_cliques parameter explicit control. Fixed clique detection inconsistencies across implementations: three implementations (moneca(), moneca_fast(), moneca_parallel()) now use cliques default algorithmic correctness reproducibility. Previously: moneca() moneca_parallel() silently switching maximal cliques graphs edge_density > 0.6 && n_vertices > 15 moneca_fast() always using maximal cliques caused three implementations produce different clustering results New explicit user control: Added use_maximal_cliques parameter three functions: Default: FALSE (use cliques - algorithmic fidelity) Set TRUE performance optimization dense graphs automatic switching - user makes explicit choice Removed automatic fallback logic igraph compatibility layer prevent unintended behavior changes","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"impact-0-9-0","dir":"Changelog","previous_headings":"","what":"Impact","title":"moneca 0.9.0","text":"Scientific correctness: implementations now produce identical results default Reproducibility: Results consistent across moneca(), moneca_fast(), moneca_parallel() Performance: Users dense graphs can explicitly enable use_maximal_cliques=TRUE Migration: relying previous behavior, set use_maximal_cliques=TRUE explicitly","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-9-0","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.9.0","text":"Algorithm equivalence tests: Added comprehensive test suite (test-algorithm-equivalence.R) validating implementations produce identical results","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-9-0","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.9.0","text":"Fixed architectural issue wrapper layer (igraph_compatibility.R) overriding algorithm-level clique selection decisions Removed conflicting threshold checks (0.6/15 wrapper vs 0.7/20 algorithm layer) Changed moneca_fast() default min.density 0.01 0 (disabled) ensure algorithmic fidelity. Users wanting early stopping optimization can explicitly set min.density > 0.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-8-1","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.8.1","text":"Fixed calculate_gini() Gini coefficient calculation: function now correctly includes zero values inequality calculation, aligning standard mathematical definition documented behavior. Previously, function incorrectly filtered zeros calculation, led underestimating inequality distributions isolates highly centralized networks (e.g., star networks). fix improves accuracy network structure metrics cutoff sensitivity analysis.","code":""},{"path":[]},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"temporal-analysis-framework-0-7-0","dir":"Changelog","previous_headings":"Major New Features","what":"Temporal Analysis Framework","title":"moneca 0.7.0","text":"moneca_temporal(): Moving window clustering time series mobility matrices Maintains stable segment labels across time periods using Hungarian algorithm Tracks segment evolution transitions time Supports multiple aggregation methods (mean, sum, weighted) temporal windows Parallel processing support efficient temporal analysis temporal_stability_analysis(): Comprehensive stability metrics time assess_clustering_stability_parallel(): Multi-core stability evaluation Tracks clustering consistency across different time windows Provides stability scores temporal robustness metrics plot_temporal_segments(): Network evolution visualization across time plot_alluvial_diagram(): Flow-based visualization segment transitions plot_segment_timeline(): Temporal progression individual segments plot_transition_heatmap(): Heatmap visualization segment transitions plot_stability_metrics(): Temporal stability trend visualization aggregate_mobility_window(): Efficient temporal window aggregation match_segments_across_time(): Intelligent segment matching time periods compute_transition_matrix(): Segment--segment transition analysis export_node_trajectories(): Node-level temporal trajectory extraction","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"enhanced-documentation-0-7-0","dir":"Changelog","previous_headings":"Major New Features","what":"Enhanced Documentation","title":"moneca 0.7.0","text":"Added example_temporal_analysis.R practical workflows Complete documentation temporal functions roxygen2 Integration examples showing temporal analysis auto-tuning Performance optimization guides large temporal datasets test-temporal-clustering.R: Core temporal functionality validation test-temporal-stability.R: Stability analysis testing Comprehensive edge case handling error validation","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"temporal-processing-optimization-0-7-0","dir":"Changelog","previous_headings":"Performance Improvements","what":"Temporal Processing Optimization","title":"moneca 0.7.0","text":"Parallel temporal analysis: Multi-core processing temporal windows Memory-efficient aggregation: Optimized matrix operations large time series Progressive stability assessment: Efficient bootstrap-based temporal stability Caching system: Avoid redundant computations across temporal windows","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"temporal-analysis-integration-0-7-0","dir":"Changelog","previous_headings":"API Enhancements","what":"Temporal Analysis Integration","title":"moneca 0.7.0","text":"temporal functions integrate seamlessly existing moneca workflow Temporal results maintain full compatibility standard moneca objects Enhanced print methods temporal analysis results Comprehensive progress reporting long-running temporal analyses","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-s3-classes-0-7-0","dir":"Changelog","previous_headings":"API Enhancements","what":"New S3 Classes","title":"moneca 0.7.0","text":"moneca_temporal: Primary temporal analysis results object temporal_stability: Stability analysis results specialized methods Custom print methods clear temporal result interpretation","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"breaking-changes-0-7-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"moneca 0.7.0","text":"None - Full backward compatibility maintained. temporal functionality additive.","code":""},{"path":[]},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"comprehensive-auto-tuning-framework-0-6-0","dir":"Changelog","previous_headings":"Major New Features","what":"Comprehensive Auto-Tuning Framework","title":"moneca 0.6.0","text":"Automatic selection optimal small.cell.reduction parameter values Six sophisticated optimization methods available Eliminates manual parameter selection improves clustering quality Fully integrated main MONECA functions stability: Bootstrap-based stability assessment (recommended default) quality: Clustering quality optimization using silhouette modularity performance: Balanced approach optimizing quality vs computational speed pareto: Multi-objective optimization Pareto frontier analysis cross_validation: K-fold cross-validation conservative parameter selection bayesian: Gaussian Process optimization (requires GPfit package) moneca(): Core function auto_tune auto_tune_method parameters moneca_fast(): Optimized version auto-tuning capabilities moneca_fast_fixed(): Fixed-algorithm version auto-tuning moneca_parallel(): Parallel processing version auto-tuning weight.matrix(): Weight matrix computation parameter optimization weight.matrix.parallel(): Parallel weight matrix auto-tuning","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"core-auto-tuning-functions-0-6-0","dir":"Changelog","previous_headings":"New Functions","what":"Core Auto-Tuning Functions","title":"moneca 0.6.0","text":"auto_tune_small_cell_reduction(): Main auto-tuning function comprehensive optimization strategies auto_tune_small_cell_reduction_enhanced(): Enhanced version advanced features performance improvements generate_candidate_values(): Intelligent candidate parameter generation using data-driven methods assess_clustering_stability(): Bootstrap-based stability assessment parameter evaluation compute_tuning_metrics(): Comprehensive clustering quality metrics computation compute_extended_quality_metrics(): Extended quality assessment additional measures select_optimal_parameter(): Parameter selection multiple optimization strategies","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"multi-objective-optimization-0-6-0","dir":"Changelog","previous_headings":"New Functions","what":"Multi-Objective Optimization","title":"moneca 0.6.0","text":"pareto_optimization(): Multi-objective optimization Pareto frontier analysis compute_pareto_front(): Pareto front computation quality/performance trade-offs bayesian_parameter_optimization(): Bayesian optimization using Gaussian Processes cross_validation_tuning(): Cross-validation based parameter selection adaptive_candidate_generation(): Dynamic candidate generation based search progress","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"performance-optimization-0-6-0","dir":"Changelog","previous_headings":"New Functions","what":"Performance Optimization","title":"moneca 0.6.0","text":"parallel_stability_assessment(): Multi-core stability assessment faster tuning cached_weight_matrix_computation(): Caching system repeated weight matrix calculations performance_aware_tuning(): Speed-optimized tuning large datasets early_stopping_optimization(): Early termination efficient candidate screening","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"visualization-and-analysis-0-6-0","dir":"Changelog","previous_headings":"New Functions","what":"Visualization and Analysis","title":"moneca 0.6.0","text":"plot_tuning_results(): Comprehensive visualization auto-tuning results plot_pareto_front(): Pareto frontier visualization multi-objective results parameter_sensitivity_plot(): Sensitivity analysis visualization tuning_convergence_plot(): Convergence analysis optimization methods","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-vignettes-0-6-0","dir":"Changelog","previous_headings":"Enhanced Documentation","what":"New Vignettes","title":"moneca 0.6.0","text":"Detailed explanation auto-tuning methods Performance comparison benchmarking Best practices method selection guidelines Advanced use cases troubleshooting Real-world examples /comparisons Practical examples showing manual vs auto-tuned results Method comparison visualizations Parameter selection guidelines Performance optimization tips","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"enhanced-function-documentation-0-6-0","dir":"Changelog","previous_headings":"Enhanced Documentation","what":"Enhanced Function Documentation","title":"moneca 0.6.0","text":"Complete roxygen2 documentation auto-tuning functions Comprehensive examples demonstrating optimization methods Cross-references related functions Parameter selection guidance best practices","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"backward-compatibility-0-6-0","dir":"Changelog","previous_headings":"API Enhancements","what":"Backward Compatibility","title":"moneca 0.6.0","text":"existing functions maintain full backward compatibility Auto-tuning opt-(auto_tune = FALSE default) Manual parameter specification continues work unchanged breaking changes existing workflows","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-parameters-across-main-functions-0-6-0","dir":"Changelog","previous_headings":"API Enhancements","what":"New Parameters Across Main Functions","title":"moneca 0.6.0","text":"auto_tune: Enable/disable automatic parameter optimization auto_tune_method: Select optimization strategy n_trials: Number trials stability assessment performance_weight: Balance quality speed (0-1 scale) candidate_values: Custom parameter ranges testing seed: Reproducibility control optimization verbose: Progress reporting auto-tuning parallel_cores: Multi-core processing faster optimization","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"auto-tuning-result-attributes-0-6-0","dir":"Changelog","previous_headings":"API Enhancements","what":"Auto-Tuning Result Attributes","title":"moneca 0.6.0","text":"auto_tune_result: Complete optimization results best_parameter: Selected optimal parameter value best_score: Optimization score achieved method: Auto-tuning method used evaluation_time: Time spent optimization all_results: Complete candidate evaluation results","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"computational-efficiency-0-6-0","dir":"Changelog","previous_headings":"Performance Improvements","what":"Computational Efficiency","title":"moneca 0.6.0","text":"Multi-core processing: Parallel evaluation parameter candidates Caching system: Avoid redundant weight matrix computations Early stopping: Intelligent termination faster optimization Memory optimization: Efficient handling large mobility matrices Progress reporting: Real-time feedback long-running optimizations","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"speed-optimizations-0-6-0","dir":"Changelog","previous_headings":"Performance Improvements","what":"Speed Optimizations","title":"moneca 0.6.0","text":"Performance-aware tuning method time-constrained scenarios Adaptive candidate generation reducing unnecessary evaluations Optimized stability assessment using efficient resampling strategies Parallel processing support across auto-tuning methods","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"enhanced-clustering-assessment-0-6-0","dir":"Changelog","previous_headings":"Quality Improvements","what":"Enhanced Clustering Assessment","title":"moneca 0.6.0","text":"Multiple quality metrics: silhouette score, modularity, clustering coefficient Network density connectivity analysis Stability assessment across data perturbations Cross-validation robust parameter selection Extended quality metrics comprehensive evaluation","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"robust-optimization-0-6-0","dir":"Changelog","previous_headings":"Quality Improvements","what":"Robust Optimization","title":"moneca 0.6.0","text":"Multiple independent trials stability assessment Bootstrap resampling robust quality estimation Cross-validation prevent overfitting Multi-objective optimization considering multiple criteria simultaneously","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"dependencies-and-compatibility-0-6-0","dir":"Changelog","previous_headings":"Technical Infrastructure","what":"Dependencies and Compatibility","title":"moneca 0.6.0","text":"Added GPfit Suggests Bayesian optimization (optional) Enhanced parallel processing using parallel package Maintained full igraph compatibility (>= 1.3.0) auto-tuning functions work existing MONECA data structures","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"code-architecture-0-6-0","dir":"Changelog","previous_headings":"Technical Infrastructure","what":"Code Architecture","title":"moneca 0.6.0","text":"Modular auto-tuning framework clean separation concerns Consistent API across optimization methods Comprehensive error handling validation Extensive unit tests auto-tuning functionality","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"for-new-users-0-6-0","dir":"Changelog","previous_headings":"Migration Guide","what":"For New Users","title":"moneca 0.6.0","text":"","code":"# Recommended workflow with auto-tuning library(moneca) data <- generate_mobility_data(n_classes = 6, seed = 123)  # Use stability method for general analysis result <- moneca(data, segment.levels = 2,                   auto_tune = TRUE, auto_tune_method = \"stability\")  # Check auto-tuning results auto_info <- attr(result, \"auto_tune_result\") print(paste(\"Optimal parameter:\", auto_info$best_parameter))"},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"for-existing-users-0-6-0","dir":"Changelog","previous_headings":"Migration Guide","what":"For Existing Users","title":"moneca 0.6.0","text":"Existing code continues work unchanged Add auto_tune = TRUE enable optimization Compare results: moneca(data, auto_tune = TRUE) vs manual parameters Gradual migration: test auto-tuning subset analyses first","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"breaking-changes-0-6-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"moneca 0.6.0","text":"None - Full backward compatibility maintained","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-5-9","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.5.9","text":"New optimized implementation adaptive clustering strategies Automatic algorithm selection based graph density Hybrid approach combining maximal clique enumeration greedy processing Maintains full API compatibility existing moneca functions three implementations (original, fast, fast_fixed) remain active available Implemented find.segments.greedy() high-density graphs (density > 0.8) Optimized clique membership matrix processing moderate-sized problems Direct clique testing large-scale problems reduce memory usage Early stopping conditions based edge density thresholds","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"performance-improvements-0-5-9","dir":"Changelog","previous_headings":"","what":"Performance Improvements","title":"moneca 0.5.9","text":"Resolved exponential clique explosion issue caused hanging 270x270+ matrices Performance improvement: reduces computation time hours seconds large matrices Memory-efficient processing sparse matrix support Enhanced progress reporting error handling large-scale analyses Density > 0.8: Uses greedy edge processing (similar original moneca approach) Moderate density: Uses maximal clique enumeration size limits Sparse networks: Early termination individual node segments Automatic fallback mechanisms ensure robust performance across network types","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"technical-improvements-0-5-9","dir":"Changelog","previous_headings":"","what":"Technical Improvements","title":"moneca 0.5.9","text":"Robust version detection igraph >= 1.3.0 Automatic function mapping old new igraph APIs Custom wrapper functions consistent behavior across versions existing functions continue work unchanged Identical output structure format across implementations Parameter compatibility ensures seamless migration implementations","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-5-1","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.5.1","text":"Resolved parameter conflict â€˜show_segmentsâ€™ passed multiple times plot_moneca_ggraph() Fixed duplicate parameter passing caused vignette build failures Improved parameter handling stair plot visualization function","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-5-0","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.5.0","text":"plot_moneca_ggraph(), plot_ego_ggraph(), plot_stair_ggraph() now support advanced segment naming options Added support custom dataframe-based segment labeling via segment_naming parameter Can now provide dataframe segment label columns custom segment names Maintains full backward compatibility existing boolean string options Enhanced documentation comprehensive examples naming options","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-5-0","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.5.0","text":"Support dataframe input: data.frame(segment = c(1, 2), label = c(\"Group \", \"Group B\")) Automatic matching segment numbers custom labels Robust error handling invalid dataframe formats Clear validation messages proper dataframe structure plotting function examples now demonstrate new segment naming capabilities Enhanced vignette practical examples custom segment labeling Improved function documentation detailed parameter descriptions","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"technical-changes-0-5-0","dir":"Changelog","previous_headings":"","what":"Technical Changes","title":"moneca 0.5.0","text":"Enhanced parameter validation segment naming options Improved error messages invalid segment naming inputs Better integration custom labels existing plotting workflows","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"major-changes-0-4-0","dir":"Changelog","previous_headings":"","what":"Major Changes","title":"moneca 0.4.0","text":"references updated throughout codebase Installation command now: install_github(\"gmontaletti/moneca\") Load : library(moneca) now maintained fork original MONECA package Full attribution original authors preserved Active maintenance development continues Jonas Touboel: Original algorithm design methodology Anton Grau Larsen: Original package development implementation Giampaolo Montaletti: Current maintainer, modernization, new features","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"documentation-updates-0-4-0","dir":"Changelog","previous_headings":"","what":"Documentation Updates","title":"moneca 0.4.0","text":"README.md: Added comprehensive â€œForkâ€ section : Clear explanation fork relationship original MONECA Full credits original authors Summary key improvements modernizations Updated installation instructions DESCRIPTION: Updated proper Authors@R field ORCID information Package documentation: Updated throughout reflect new package name","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"technical-notes-0-4-0","dir":"Changelog","previous_headings":"","what":"Technical Notes","title":"moneca 0.4.0","text":"existing functionality remains unchanged Backward compatibility maintained functions breaking changes user-facing APIs Package namespace updated moneca throughout","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-3-3","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.3.3 (former MONECA)","text":"print.moneca() now uses strength (weighted degree) instead simple degree counts Statistics now represent mobility volume rather just connection counts accurate representation node importance weighted mobility networks Updated documentation explains difference degree strength Section renamed â€œDetailed Weighted Degree Distributions (Strength)â€","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"technical-changes-0-3-3","dir":"Changelog","previous_headings":"","what":"Technical Changes","title":"moneca 0.3.3 (former MONECA)","text":"Replaced degree() strength() network statistics calculations â€œTotal Weighted Connections (Strength + )â€ â€œOutward Mobility Strength (Weighted -Degree)â€ â€œInward Mobility Strength (Weighted -Degree)â€ Enhanced technical documentation strength vs degree definitions","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"breaking-changes-0-3-2","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"moneca 0.3.2","text":"Removed moneca_comprehensive_analysis() - functionality integrated enhanced print method Removed segment_mobility_analysis() - use standard analysis functions instead functions experimental better served existing core functions","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-3-2","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.3.2","text":"Now displays previously hidden statistics default Clearer labeling organization output Shows level-specific mobility concentration (just average) Includes detailed degree distributions show.degree.stats = TRUE (default) Better formatted output clear section headers New vignette: â€œmoneca-statisticsâ€ explaining statistics detail","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"documentation-0-3-2","dir":"Changelog","previous_headings":"","what":"Documentation","title":"moneca 0.3.2","text":"Comprehensive guide interpreting moneca statistics Clear explanations metric examples Practical interpretation guidelines","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-3-1","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.3.1","text":"Segment-level mobility analysis: New segment_mobility_analysis() function Enhanced dendrogram visualization: Improved plot_moneca_dendrogram() better styling","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-3-0","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.3.0","text":"Perfect dendrogram visualization: Zero crossing lines hierarchical plots Comprehensive analysis function: New moneca_comprehensive_analysis()","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-9","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.9","text":"Enhanced documentation visualizations Better error handling analysis functions","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-2-8","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.2.8","text":"Comprehensive comparison moneca() vs moneca_fast() algorithms Detailed step--step workflow explanations algorithms Performance benchmarking practical usage guidelines Parameter tuning recommendations moneca_fast() Neutral analysis pros cons approach","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-2-8","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.2.8","text":"Removed inappropriate guide_colourbar() warning edge colors plot_ego_ggraph() Added guide = \"none\" scale_edge_color_viridis() suppress unwanted legend Completely restructured hull rendering place hulls background layer Fixed coordinate extraction properly align hulls node positions Eliminated duplicate hull rendering code Improved layer ordering: hulls â†’ edges â†’ nodes â†’ labels","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-8","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.8","text":"Cleaner visualization output proper layer ordering Better hull positioning actually contains nodes robust coordinate handling custom layouts Enhanced documentation detailed algorithm internals","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-2-7","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.2.7","text":"Added wrapper functions moneca_cliques() moneca_max_cliques() automatically convert directed graphs undirected clique calculations Eliminated â€œEdge directions ignored maximal clique calculationâ€ warning Enhanced igraph compatibility layer proper clique handling","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-7","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.7","text":"Cleaner console output suppressed igraph warnings Better handling directed vs undirected graphs clique operations","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"code-modernization-0-2-6","dir":"Changelog","previous_headings":"","what":"Code Modernization","title":"moneca 0.2.6","text":"Translated Danish comments English throughout codebase gruppe â†’ group grupper â†’ groups niv.nu â†’ level.current niv.ned â†’ level.bejler â†’ candidate klike â†’ clique potentiel.klike â†’ potential.clique Updated function names: bejler.test â†’ clique.test Improved code readability accessibility international users","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-6","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.6","text":"Better code documentation clear English comments intuitive variable naming throughout package Enhanced maintainability future development","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"major-fixes-0-2-5","dir":"Changelog","previous_headings":"","what":"Major Fixes","title":"moneca 0.2.5","text":"Hulls now properly contain vertices using actual ggraph layout coordinates Improved coordinate extraction match node positions exactly Fixed layer ordering issues caused hulls appear disconnected segment hull now renders individually better visual accuracy","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-2-5","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.2.5","text":"Added include_first_level = TRUE parameter show individual classes Level 1 shows individual classes without segmentation Complete progression visualization individual classes final segments Better understanding segmentation evolution across hierarchical levels","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-5","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.5","text":"robust hull rendering works automatic custom layouts Consistent visualization approach across modern plotting functions Better documentation stair plot parameters","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-2-4","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.2.4","text":"Hulls now properly contain vertices instead plotted aside Improved coordinate extraction align ggraph layout system Better handling automatic layouts (â€œfrâ€, â€œstressâ€) custom coordinate matrices Fixed variable scope issues hull label positioning","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"technical-improvements-0-2-4","dir":"Changelog","previous_headings":"","what":"Technical Improvements","title":"moneca 0.2.4","text":"Enhanced layout coordinate handling better hull-vertex alignment robust segment boundary rendering across different layout types","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-2-3","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.2.3","text":"Hulls now render background layer instead covering nodes Proper rendering order: hulls â†’ edges â†’ nodes â†’ labels Applies plot_moneca_ggraph() plot_stair_ggraph() plot_ego_ggraph() now uses individual profession names instead segment names Better interpretability ego network analysis","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-3","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.3","text":"Cleaned redundant hull rendering code plot_stair_ggraph() consistent behavior across modern plotting functions","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-2","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.2","text":"Removed arrow heads edges cleaner network visualization Made edge alpha proportional edge weight better visual hierarchy Implemented rounded convex hulls ggforce package available Replaced individual node labels segment labels showing hulls Removed legends maximize plot space Added segment labels connected hull boundaries Reduced title size spacing compact plots","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"visual-enhancements-0-2-2","dir":"Changelog","previous_headings":"","what":"Visual Enhancements","title":"moneca 0.2.2","text":"Segment visualization now uses meaningful group names instead concatenated profession names Hull labels positioned segment boundaries bold text Edge transparency now reflects connection strength Cleaner, professional network visualizations","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"new-features-0-2-1","dir":"Changelog","previous_headings":"","what":"New Features","title":"moneca 0.2.1","text":"Uses maximal cliques instead cliques better performance dense networks Implements vectorized operations segmentation algorithm Adds support sparse matrices via Matrix package Includes early stopping conditions based edge density Adds option limit maximum clique size Maintains full compatibility existing MONECA output structure","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"improvements-0-2-1","dir":"Changelog","previous_headings":"","what":"Improvements","title":"moneca 0.2.1","text":"Performance optimizations reduce computation time, especially larger mobility tables use.sparse: Enable sparse matrix operations large datasets min.density: Set minimum edge density threshold early stopping max.clique.size: Limit clique sizes improve performance dense networks progress: Control progress bar display","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"documentation-0-2-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"moneca 0.2.1","text":"Added comprehensive tests moneca_fast() Added example demonstrating performance improvements inst/examples/moneca_fast_example.R","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"major-update---comprehensive-modernization-0-2-0","dir":"Changelog","previous_headings":"","what":"Major Update - Comprehensive Modernization","title":"moneca 0.2.0","text":"release represents major stabilization modernization MONECA package, including modern visualization, synthetic data generation, complete testing, enhanced documentation.","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"modern-visualization-system-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Modern Visualization System","title":"moneca 0.2.0","text":"plot_moneca_ggraph() - Modern network visualization using ggraph plot_ego_ggraph() - Ego network analysis plots contemporary styling plot_stair_ggraph() - Multi-level segmentation visualization Support various layouts: Fruchterman-Reingold, Kamada-Kawai, stress-based Customizable node aesthetics (size, color, shape segment/mobility) Advanced edge styling (width, color, transparency weight)","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"synthetic-data-generation-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Synthetic Data Generation","title":"moneca 0.2.0","text":"generate_mobility_data() - Create realistic synthetic mobility matrices generate_example_datasets() - Pre-configured datasets testing Customizable parameters: immobility strength, class clustering, noise levels Support custom class names reproducible generation seeds","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"testing-framework-0-2-0","dir":"Changelog","previous_headings":"New Features","what":"Testing Framework","title":"moneca 0.2.0","text":"Comprehensive test suite 30+ tests across major functions Tests core algorithms, plotting functions, data generation igraph compatibility testing across versions Edge case handling error validation","code":""},{"path":[]},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"igraph-compatibility-0-2-0","dir":"Changelog","previous_headings":"Improvements","what":"igraph Compatibility","title":"moneca 0.2.0","text":"Sophisticated compatibility layer igraph >= 1.3.0 Automatic function mapping old new APIs Custom implementation removed functions (e.g., norm_coords) Runtime version detection adaptation","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"code-quality-0-2-0","dir":"Changelog","previous_headings":"Improvements","what":"Code Quality","title":"moneca 0.2.0","text":"Fixed critical bugs matrix validation edge calculations Improved error messages input validation Better handling edge cases small datasets Memory usage optimizations","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"documentation-0-2-0","dir":"Changelog","previous_headings":"Improvements","what":"Documentation","title":"moneca 0.2.0","text":"New comprehensive vignette modern examples examples now use synthetic data (external dependencies) Updated README modern workflow Complete roxygen2 documentation functions","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"bug-fixes-0-2-0","dir":"Changelog","previous_headings":"","what":"Bug Fixes","title":"moneca 0.2.0","text":"Fixed viewport error plotting functions Resolved matrix validation issues moneca.plot() Fixed edge calculation bugs find.segments() Corrected vignette build errors tidygraph functions Fixed â€œclosureâ€ object subsetting error","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"backward-compatibility-0-2-0","dir":"Changelog","previous_headings":"","what":"Backward Compatibility","title":"moneca 0.2.0","text":"existing functions remain fully functional Legacy plotting functions (gg.moneca, moneca.plot) preserved Original API unchanged adding new features","code":""},{"path":"https://gmontaletti.github.io/MONECA/news/index.html","id":"dependencies-0-2-0","dir":"Changelog","previous_headings":"","what":"Dependencies","title":"moneca 0.2.0","text":"Now requires: ggraph (>= 2.0.0), tidygraph (>= 1.2.0), dplyr (>= 1.0.0) Maintains compatibility R >= 3.5.0 Full compatibility latest igraph versions","code":""}]
