% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/moneca_original.R
\name{moneca}
\alias{moneca}
\title{MONECA - Mobility Network Clustering Analysis}
\usage{
moneca(
  mx = mx,
  segment.levels = 3,
  cut.off = 1,
  mode = "symmetric",
  delete.upper.tri = TRUE,
  small.cell.reduction = 0,
  auto_tune = FALSE,
  tune_method = "stability",
  tune_verbose = FALSE,
  use_maximal_cliques = FALSE
)
}
\arguments{
\item{mx}{A mobility table (square matrix) with row and column totals in the last
row/column. Row names should identify the categories/classes.}

\item{segment.levels}{Integer specifying the number of hierarchical segmentation 
levels to compute. Default is 3. The algorithm may return fewer levels if no
further meaningful segmentation is possible.}

\item{cut.off}{Numeric threshold for the minimum relative risk to be considered
a significant tie. Default is 1 (no mobility above random expectation required).}

\item{mode}{Character string specifying edge mode ("symmetric", "Mutual", or 
"Unmutual"). Currently not fully implemented - uses symmetric mode.}

\item{delete.upper.tri}{Logical indicating whether to use only lower triangle 
for efficiency. Default is TRUE.}

\item{small.cell.reduction}{Numeric value to handle small cell counts. Cells with
counts below this threshold are set to 0. Default is 0 (no reduction).}

\item{auto_tune}{Logical indicating whether to automatically tune the 
small.cell.reduction parameter. When TRUE, uses optimization methods to
select the best value. Default is FALSE.}

\item{tune_method}{Character string specifying the auto-tuning method when
auto_tune is TRUE. Options are "stability" (default), "quality", or 
"performance". See \code{\link{auto_tune_small_cell_reduction}} for details.}

\item{tune_verbose}{Logical indicating whether to print verbose messages
during auto-tuning. Default is FALSE.}

\item{use_maximal_cliques}{Logical indicating whether to use maximal cliques
(faster, fewer cliques) instead of all cliques (slower, more complete enumeration).
Default is FALSE (use all cliques for algorithmic correctness). Set to TRUE for
performance optimization on very dense graphs.}
}
\value{
An object of class "moneca" containing:
  \describe{
    \item{segment.list}{A list of segment memberships for each hierarchical level.
      Each element is a list of vectors containing the original row indices.}
    \item{mat.list}{A list of aggregated mobility matrices for each level, where
      rows/columns represent segments instead of original categories.}
    \item{small.cell.reduction}{The small cell reduction parameter used.}
  }
}
\description{
Main function for performing hierarchical clustering analysis on mobility tables.
MONECA creates weighted networks from mobility data and uses cliques to identify
discrete and nested clusters of positions with high internal mobility.
}
\details{
This is the original antongrau/MONECA implementation with progress bar functionality. 
For memory-optimized version, use moneca_fast().


MONECA implements an iterative algorithm that:
\enumerate{
  \item Converts the mobility table to a relative risk matrix
  \item Identifies network cliques based on the threshold
  \item Groups nodes into segments using the clique structure
  \item Aggregates the mobility table by segments
  \item Repeats the process for the specified number of levels
}

The algorithm stops early if no further segmentation is possible (e.g., all
nodes collapse into a single segment).
}
\examples{
# Generate synthetic mobility data
mobility_data <- generate_mobility_data(n_classes = 6, seed = 42)

# Run moneca analysis
seg <- moneca(mobility_data, segment.levels = 3)
print(seg)

# Run moneca with auto-tuning for optimal small.cell.reduction
seg_tuned <- moneca(mobility_data, segment.levels = 3, 
                    auto_tune = TRUE, tune_method = "stability", 
                    tune_verbose = TRUE)
print(seg_tuned)

# Examine segment membership
membership <- segment.membership(seg)
print(membership)

}
\references{
ToubÃ¸l, J., & Larsen, A. G. (2017). Mapping the Social Class Structure: 
From Occupational Mobility to Social Class Categories Using Network Analysis.
Sociology, 51(6), 1257-1276.
}
\seealso{
\strong{Optimized implementations:}
\code{\link{moneca_fast}} for single-core optimization (vectorization, sparse matrices)

\strong{Core functions:}
\code{\link{find.segments}} for the core segmentation algorithm,
\code{\link{weight.matrix}} for relative risk calculation

\strong{Visualization and analysis:}
\code{\link{plot_moneca_ggraph}} for modern network visualization,
\code{\link{segment.membership}} for extracting segment memberships
}
